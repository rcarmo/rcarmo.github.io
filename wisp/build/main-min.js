require=function(e,t,n){function i(n,s){if(!t[n]){if(!e[n]){var o=typeof require=="function"&&require;if(!s&&o)return o(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var u=t[n]={exports:{}};e[n][0].call(u.exports,function(t){var r=e[n][1][t];return i(r?r:t)},u,u.exports)}return t[n].exports}var r=typeof require=="function"&&require;for(var s=0;s<n.length;s++)i(n[s]);return i}({"wisp/runtime":[function(require,module,exports){module.exports=require("57peRD")},{}],"57peRD":[function(require,module,exports){(function(){{var _ns_={id:"wisp.runtime",doc:"Core primitives required for runtime"}}var identity=exports.identity=function identity(x){return x};var isOdd=exports.isOdd=function isOdd(n){return n%2===1};var isEven=exports.isEven=function isEven(n){return n%2===0};var isDictionary=exports.isDictionary=function isDictionary(form){return isObject(form)&&isObject(Object.getPrototypeOf(form))&&isNil(Object.getPrototypeOf(Object.getPrototypeOf(form)))};var dictionary=exports.dictionary=function dictionary(){var pairs=Array.prototype.slice.call(arguments,0);return function loop(){var recur=loop;var keyValuesø1=pairs;var resultø1={};do{recur=keyValuesø1.length?function(){resultø1[keyValuesø1[0]]=keyValuesø1[1];return loop[0]=keyValuesø1.slice(2),loop[1]=resultø1,loop}():resultø1}while(keyValuesø1=loop[0],resultø1=loop[1],recur===loop);return recur}.call(this)};var keys=exports.keys=function keys(dictionary){return Object.keys(dictionary)};var vals=exports.vals=function vals(dictionary){return keys(dictionary).map(function(key){return(dictionary||0)[key]})};var keyValues=exports.keyValues=function keyValues(dictionary){return keys(dictionary).map(function(key){return[key,(dictionary||0)[key]]})};var merge=exports.merge=function merge(){return Object.create(Object.prototype,Array.prototype.slice.call(arguments).reduce(function(descriptor,dictionary){isObject(dictionary)?Object.keys(dictionary).forEach(function(key){return(descriptor||0)[key]=Object.getOwnPropertyDescriptor(dictionary,key)}):void 0;return descriptor},Object.create(Object.prototype)))};var isContainsVector=exports.isContainsVector=function isContainsVector(vector,element){return vector.indexOf(element)>=0};var mapDictionary=exports.mapDictionary=function mapDictionary(source,f){return Object.keys(source).reduce(function(target,key){(target||0)[key]=f((source||0)[key]);return target},{})};var toString=exports.toString=Object.prototype.toString;var isFn=exports.isFn=typeof/./==="function"?function(x){return toString.call(x)==="[object Function]"}:function(x){return typeof x==="function"};var isError=exports.isError=function isError(x){return x instanceof Error||toString.call(x)==="[object Error]"};var isString=exports.isString=function isString(x){return typeof x==="string"||toString.call(x)==="[object String]"};var isNumber=exports.isNumber=function isNumber(x){return typeof x==="number"||toString.call(x)==="[object Number]"};var isVector=exports.isVector=isFn(Array.isArray)?Array.isArray:function(x){return toString.call(x)==="[object Array]"};var isDate=exports.isDate=function isDate(x){return toString.call(x)==="[object Date]"};var isBoolean=exports.isBoolean=function isBoolean(x){return x===true||x===false||toString.call(x)==="[object Boolean]"};var isRePattern=exports.isRePattern=function isRePattern(x){return toString.call(x)==="[object RegExp]"};var isObject=exports.isObject=function isObject(x){return x&&typeof x==="object"};var isNil=exports.isNil=function isNil(x){return x===void 0||x===null};var isTrue=exports.isTrue=function isTrue(x){return x===true};var isFalse=exports.isFalse=function isFalse(x){return x===true};var reFind=exports.reFind=function reFind(re,s){return function(){var matchesø1=re.exec(s);return!isNil(matchesø1)?matchesø1.length===1?(matchesø1||0)[0]:matchesø1:void 0}.call(this)};var reMatches=exports.reMatches=function reMatches(pattern,source){return function(){var matchesø1=pattern.exec(source);return!isNil(matchesø1)&&(matchesø1||0)[0]===source?matchesø1.length===1?(matchesø1||0)[0]:matchesø1:void 0}.call(this)};var rePattern=exports.rePattern=function rePattern(s){return function(){var matchø1=reFind(/^(?:\(\?([idmsux]*)\))?(.*)/,s);return new RegExp((matchø1||0)[2],(matchø1||0)[1])}.call(this)};var inc=exports.inc=function inc(x){return x+1};var dec=exports.dec=function dec(x){return x-1};var str=exports.str=function str(){return String.prototype.concat.apply("",arguments)};var char=exports.char=function char(code){return String.fromCharCode(code)};var int=exports.int=function int(x){return isNumber(x)?x>=0?Math.floor(x):Math.floor(x):x.charCodeAt(0)};var subs=exports.subs=function subs(string,start,end){return string.substring(start,end)};var isPatternEqual=function isPatternEqual(x,y){return isRePattern(x)&&isRePattern(y)&&x.source===y.source&&x.global===y.global&&x.multiline===y.multiline&&x.ignoreCase===y.ignoreCase};var isDateEqual=function isDateEqual(x,y){return isDate(x)&&isDate(y)&&Number(x)===Number(y)};var isDictionaryEqual=function isDictionaryEqual(x,y){return isObject(x)&&isObject(y)&&function(){var xKeysø1=keys(x);var yKeysø1=keys(y);var xCountø1=xKeysø1.length;var yCountø1=yKeysø1.length;return xCountø1===yCountø1&&function loop(){var recur=loop;var indexø1=0;var countø1=xCountø1;var keysø1=xKeysø1;do{recur=indexø1<countø1?isEquivalent((x||0)[(keysø1||0)[indexø1]],(y||0)[(keysø1||0)[indexø1]])?(loop[0]=inc(indexø1),loop[1]=countø1,loop[2]=keysø1,loop):false:true}while(indexø1=loop[0],countø1=loop[1],keysø1=loop[2],recur===loop);return recur}.call(this)}.call(this)};var isVectorEqual=function isVectorEqual(x,y){return isVector(x)&&isVector(y)&&x.length===y.length&&function loop(){var recur=loop;var xsø1=x;var ysø1=y;var indexø1=0;var countø1=x.length;do{recur=indexø1<countø1?isEquivalent((xsø1||0)[indexø1],(ysø1||0)[indexø1])?(loop[0]=xsø1,loop[1]=ysø1,loop[2]=inc(indexø1),loop[3]=countø1,loop):false:true}while(xsø1=loop[0],ysø1=loop[1],indexø1=loop[2],countø1=loop[3],recur===loop);return recur}.call(this)};var isEquivalent=function isEquivalent(){switch(arguments.length){case 1:var x=arguments[0];return true;case 2:var x=arguments[0];var y=arguments[1];return x===y||(isNil(x)?isNil(y):isNil(y)?isNil(x):isString(x)?false:isNumber(x)?false:isFn(x)?false:isBoolean(x)?false:isDate(x)?isDateEqual(x,y):isVector(x)?isVectorEqual(x,y,[],[]):isRePattern(x)?isPatternEqual(x,y):"else"?isDictionaryEqual(x,y):void 0);default:var x=arguments[0];var y=arguments[1];var more=Array.prototype.slice.call(arguments,2);return function loop(){var recur=loop;var previousø1=x;var currentø1=y;var indexø1=0;var countø1=more.length;do{recur=isEquivalent(previousø1,currentø1)&&(indexø1<countø1?(loop[0]=currentø1,loop[1]=(more||0)[indexø1],loop[2]=inc(indexø1),loop[3]=countø1,loop):true)}while(previousø1=loop[0],currentø1=loop[1],indexø1=loop[2],countø1=loop[3],recur===loop);return recur}.call(this)}};var isEqual=exports.isEqual=isEquivalent;var isStrictEqual=exports.isStrictEqual=function isStrictEqual(){switch(arguments.length){case 1:var x=arguments[0];return true;case 2:var x=arguments[0];var y=arguments[1];return x===y;default:var x=arguments[0];var y=arguments[1];var more=Array.prototype.slice.call(arguments,2);return function loop(){var recur=loop;var previousø1=x;var currentø1=y;var indexø1=0;var countø1=more.length;do{recur=previousø1==currentø1&&(indexø1<countø1?(loop[0]=currentø1,loop[1]=(more||0)[indexø1],loop[2]=inc(indexø1),loop[3]=countø1,loop):true)}while(previousø1=loop[0],currentø1=loop[1],indexø1=loop[2],countø1=loop[3],recur===loop);return recur}.call(this)}};var greaterThan=exports.greaterThan=function greaterThan(){switch(arguments.length){case 1:var x=arguments[0];return true;case 2:var x=arguments[0];var y=arguments[1];return x>y;default:var x=arguments[0];var y=arguments[1];var more=Array.prototype.slice.call(arguments,2);return function loop(){var recur=loop;var previousø1=x;var currentø1=y;var indexø1=0;var countø1=more.length;do{recur=previousø1>currentø1&&(indexø1<countø1?(loop[0]=currentø1,loop[1]=(more||0)[indexø1],loop[2]=inc(indexø1),loop[3]=countø1,loop):true)}while(previousø1=loop[0],currentø1=loop[1],indexø1=loop[2],countø1=loop[3],recur===loop);return recur}.call(this)}};var notLessThan=exports.notLessThan=function notLessThan(){switch(arguments.length){case 1:var x=arguments[0];return true;case 2:var x=arguments[0];var y=arguments[1];return x>=y;default:var x=arguments[0];var y=arguments[1];var more=Array.prototype.slice.call(arguments,2);return function loop(){var recur=loop;var previousø1=x;var currentø1=y;var indexø1=0;var countø1=more.length;do{recur=previousø1>=currentø1&&(indexø1<countø1?(loop[0]=currentø1,loop[1]=(more||0)[indexø1],loop[2]=inc(indexø1),loop[3]=countø1,loop):true)}while(previousø1=loop[0],currentø1=loop[1],indexø1=loop[2],countø1=loop[3],recur===loop);return recur}.call(this)}};var lessThan=exports.lessThan=function lessThan(){switch(arguments.length){case 1:var x=arguments[0];return true;case 2:var x=arguments[0];var y=arguments[1];return x<y;default:var x=arguments[0];var y=arguments[1];var more=Array.prototype.slice.call(arguments,2);return function loop(){var recur=loop;var previousø1=x;var currentø1=y;var indexø1=0;var countø1=more.length;do{recur=previousø1<currentø1&&(indexø1<countø1?(loop[0]=currentø1,loop[1]=(more||0)[indexø1],loop[2]=inc(indexø1),loop[3]=countø1,loop):true)}while(previousø1=loop[0],currentø1=loop[1],indexø1=loop[2],countø1=loop[3],recur===loop);return recur}.call(this)}};var notGreaterThan=exports.notGreaterThan=function notGreaterThan(){switch(arguments.length){case 1:var x=arguments[0];return true;case 2:var x=arguments[0];var y=arguments[1];return x<=y;default:var x=arguments[0];var y=arguments[1];var more=Array.prototype.slice.call(arguments,2);return function loop(){var recur=loop;var previousø1=x;var currentø1=y;var indexø1=0;var countø1=more.length;do{recur=previousø1<=currentø1&&(indexø1<countø1?(loop[0]=currentø1,loop[1]=(more||0)[indexø1],loop[2]=inc(indexø1),loop[3]=countø1,loop):true)}while(previousø1=loop[0],currentø1=loop[1],indexø1=loop[2],countø1=loop[3],recur===loop);return recur}.call(this)}};var sum=exports.sum=function sum(){switch(arguments.length){case 0:return 0;case 1:var a=arguments[0];return a;case 2:var a=arguments[0];var b=arguments[1];return a+b;case 3:var a=arguments[0];var b=arguments[1];var c=arguments[2];return a+b+c;case 4:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];return a+b+c+d;case 5:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];var e=arguments[4];return a+b+c+d+e;case 6:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];var e=arguments[4];var f=arguments[5];return a+b+c+d+e+f;default:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];var e=arguments[4];var f=arguments[5];var more=Array.prototype.slice.call(arguments,6);return function loop(){var recur=loop;var valueø1=a+b+c+d+e+f;var indexø1=0;var countø1=more.length;do{recur=indexø1<countø1?(loop[0]=valueø1+(more||0)[indexø1],loop[1]=inc(indexø1),loop[2]=countø1,loop):valueø1}while(valueø1=loop[0],indexø1=loop[1],countø1=loop[2],recur===loop);return recur}.call(this)}};var subtract=exports.subtract=function subtract(){switch(arguments.length){case 0:return function(){throw TypeError("Wrong number of args passed to: -")}();case 1:var a=arguments[0];return 0-a;case 2:var a=arguments[0];var b=arguments[1];return a-b;case 3:var a=arguments[0];var b=arguments[1];var c=arguments[2];return a-b-c;case 4:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];return a-b-c-d;case 5:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];var e=arguments[4];return a-b-c-d-e;case 6:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];var e=arguments[4];var f=arguments[5];return a-b-c-d-e-f;default:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];var e=arguments[4];var f=arguments[5];var more=Array.prototype.slice.call(arguments,6);return function loop(){var recur=loop;var valueø1=a-b-c-d-e-f;var indexø1=0;var countø1=more.length;do{recur=indexø1<countø1?(loop[0]=valueø1-(more||0)[indexø1],loop[1]=inc(indexø1),loop[2]=countø1,loop):valueø1}while(valueø1=loop[0],indexø1=loop[1],countø1=loop[2],recur===loop);return recur}.call(this)}};var divide=exports.divide=function divide(){switch(arguments.length){case 0:return function(){throw TypeError("Wrong number of args passed to: /")}();case 1:var a=arguments[0];return 1/a;case 2:var a=arguments[0];var b=arguments[1];return a/b;case 3:var a=arguments[0];var b=arguments[1];var c=arguments[2];return a/b/c;case 4:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];return a/b/c/d;case 5:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];var e=arguments[4];return a/b/c/d/e;case 6:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];var e=arguments[4];var f=arguments[5];return a/b/c/d/e/f;default:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];var e=arguments[4];var f=arguments[5];var more=Array.prototype.slice.call(arguments,6);return function loop(){var recur=loop;var valueø1=a/b/c/d/e/f;var indexø1=0;var countø1=more.length;do{recur=indexø1<countø1?(loop[0]=valueø1/(more||0)[indexø1],loop[1]=inc(indexø1),loop[2]=countø1,loop):valueø1}while(valueø1=loop[0],indexø1=loop[1],countø1=loop[2],recur===loop);return recur}.call(this)}};var multiply=exports.multiply=function multiply(){switch(arguments.length){case 0:return 1;case 1:var a=arguments[0];return a;case 2:var a=arguments[0];var b=arguments[1];return a*b;case 3:var a=arguments[0];var b=arguments[1];var c=arguments[2];return a*b*c;case 4:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];return a*b*c*d;case 5:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];var e=arguments[4];return a*b*c*d*e;case 6:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];var e=arguments[4];var f=arguments[5];return a*b*c*d*e*f;default:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];var e=arguments[4];var f=arguments[5];var more=Array.prototype.slice.call(arguments,6);return function loop(){var recur=loop;var valueø1=a*b*c*d*e*f;var indexø1=0;var countø1=more.length;do{recur=indexø1<countø1?(loop[0]=valueø1*(more||0)[indexø1],loop[1]=inc(indexø1),loop[2]=countø1,loop):valueø1}while(valueø1=loop[0],indexø1=loop[1],countø1=loop[2],recur===loop);return recur}.call(this)}};var and=exports.and=function and(){switch(arguments.length){case 0:return true;case 1:var a=arguments[0];return a;case 2:var a=arguments[0];var b=arguments[1];return a&&b;case 3:var a=arguments[0];var b=arguments[1];var c=arguments[2];return a&&b&&c;case 4:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];return a&&b&&c&&d;case 5:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];var e=arguments[4];return a&&b&&c&&d&&e;case 6:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];var e=arguments[4];var f=arguments[5];return a&&b&&c&&d&&e&&f;default:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];var e=arguments[4];var f=arguments[5];var more=Array.prototype.slice.call(arguments,6);return function loop(){var recur=loop;var valueø1=a&&b&&c&&d&&e&&f;var indexø1=0;var countø1=more.length;do{recur=indexø1<countø1?(loop[0]=valueø1&&(more||0)[indexø1],loop[1]=inc(indexø1),loop[2]=countø1,loop):valueø1}while(valueø1=loop[0],indexø1=loop[1],countø1=loop[2],recur===loop);return recur}.call(this)}};var or=exports.or=function or(){switch(arguments.length){case 0:return void 0;case 1:var a=arguments[0];return a;case 2:var a=arguments[0];var b=arguments[1];return a||b;case 3:var a=arguments[0];var b=arguments[1];var c=arguments[2];return a||b||c;case 4:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];return a||b||c||d;case 5:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];var e=arguments[4];return a||b||c||d||e;case 6:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];var e=arguments[4];var f=arguments[5];return a||b||c||d||e||f;default:var a=arguments[0];var b=arguments[1];var c=arguments[2];var d=arguments[3];var e=arguments[4];var f=arguments[5];var more=Array.prototype.slice.call(arguments,6);return function loop(){var recur=loop;var valueø1=a||b||c||d||e||f;var indexø1=0;var countø1=more.length;do{recur=indexø1<countø1?(loop[0]=valueø1||(more||0)[indexø1],loop[1]=inc(indexø1),loop[2]=countø1,loop):valueø1}while(valueø1=loop[0],indexø1=loop[1],countø1=loop[2],recur===loop);return recur}.call(this)}};var print=exports.print=function print(){var more=Array.prototype.slice.call(arguments,0);return console.log.apply(void 0,more)};var max=exports.max=Math.max;var min=exports.min=Math.min})()},{}],"wisp/sequence":[function(require,module,exports){module.exports=require("Dhp18X")},{}],Dhp18X:[function(require,module,exports){{var _ns_={id:"wisp.sequence",doc:void 0};var wisp_runtime=require("./runtime");var isNil=wisp_runtime.isNil;var isVector=wisp_runtime.isVector;var isFn=wisp_runtime.isFn;var isNumber=wisp_runtime.isNumber;var isString=wisp_runtime.isString;var isDictionary=wisp_runtime.isDictionary;var keyValues=wisp_runtime.keyValues;var str=wisp_runtime.str;var dec=wisp_runtime.dec;var inc=wisp_runtime.inc;var merge=wisp_runtime.merge;var dictionary=wisp_runtime.dictionary}var List=function List(head,tail){this.head=head;this.tail=tail||list();this.length=inc(count(this.tail));return this};List.prototype.length=0;List.type="wisp.list";List.prototype.type=List.type;List.prototype.tail=Object.create(List.prototype);List.prototype.toString=function(){return function loop(){var recur=loop;var resultø1="";var listø1=this;do{recur=isEmpty(listø1)?""+"("+resultø1.substr(1)+")":(loop[0]=""+resultø1+" "+(isVector(first(listø1))?""+"["+first(listø1).join(" ")+"]":isNil(first(listø1))?"nil":isString(first(listø1))?JSON.stringify(first(listø1)):isNumber(first(listø1))?JSON.stringify(first(listø1)):first(listø1)),loop[1]=rest(listø1),loop)}while(resultø1=loop[0],listø1=loop[1],recur===loop);return recur}.call(this)};var lazySeqValue=function lazySeqValue(lazySeq){return!lazySeq.realized?(lazySeq.realized=true)&&(lazySeq.x=lazySeq.x()):lazySeq.x};var LazySeq=function LazySeq(realized,x){this.realized=realized||false;this.x=x;return this};LazySeq.type="wisp.lazy.seq";LazySeq.prototype.type=LazySeq.type;var lazySeq=exports.lazySeq=function lazySeq(realized,body){return new LazySeq(realized,body)};var isLazySeq=exports.isLazySeq=function isLazySeq(value){return value&&LazySeq.type===value.type};void 0;var isList=exports.isList=function isList(value){return value&&List.type===value.type};var list=exports.list=function list(){return arguments.length===0?Object.create(List.prototype):Array.prototype.slice.call(arguments).reduceRight(function(tail,head){return cons(head,tail)},list())};var cons=exports.cons=function cons(head,tail){return new List(head,tail)};var reverseList=function reverseList(sequence){return function loop(){var recur=loop;var itemsø1=[];var sourceø1=sequence;do{recur=isEmpty(sourceø1)?list.apply(void 0,itemsø1):(loop[0]=[first(sourceø1)].concat(itemsø1),loop[1]=rest(sourceø1),loop)}while(itemsø1=loop[0],sourceø1=loop[1],recur===loop);return recur}.call(this)};var isSequential=exports.isSequential=function isSequential(x){return isList(x)||isVector(x)||isLazySeq(x)||isDictionary(x)||isString(x)};var reverse=exports.reverse=function reverse(sequence){return isList(sequence)?reverseList(sequence):isVector(sequence)?sequence.reverse():isNil(sequence)?list():"else"?reverse(seq(sequence)):void 0};var map=exports.map=function map(f,sequence){return isVector(sequence)?sequence.map(function($1){return f($1)}):isList(sequence)?mapList(f,sequence):isNil(sequence)?list():"else"?map(f,seq(sequence)):void 0};var mapList=function mapList(f,sequence){return function loop(){var recur=loop;var resultø1=list();var itemsø1=sequence;do{recur=isEmpty(itemsø1)?reverse(resultø1):(loop[0]=cons(f(first(itemsø1)),resultø1),loop[1]=rest(itemsø1),loop)}while(resultø1=loop[0],itemsø1=loop[1],recur===loop);return recur}.call(this)};var filter=exports.filter=function filter(isF,sequence){return isVector(sequence)?sequence.filter(isF):isList(sequence)?filterList(isF,sequence):isNil(sequence)?list():"else"?filter(isF,seq(sequence)):void 0};var filterList=function filterList(isF,sequence){return function loop(){var recur=loop;var resultø1=list();var itemsø1=sequence;do{recur=isEmpty(itemsø1)?reverse(resultø1):(loop[0]=isF(first(itemsø1))?cons(first(itemsø1),resultø1):resultø1,loop[1]=rest(itemsø1),loop)}while(resultø1=loop[0],itemsø1=loop[1],recur===loop);return recur}.call(this)};var reduce=exports.reduce=function reduce(f){var params=Array.prototype.slice.call(arguments,1);return function(){var hasInitialø1=count(params)>=2;var initialø1=hasInitialø1?first(params):void 0;var sequenceø1=hasInitialø1?second(params):first(params);return isNil(sequenceø1)?initialø1:isVector(sequenceø1)?hasInitialø1?sequenceø1.reduce(f,initialø1):sequenceø1.reduce(f):isList(sequenceø1)?hasInitialø1?reduceList(f,initialø1,sequenceø1):reduceList(f,first(sequenceø1),rest(sequenceø1)):"else"?reduce(f,initialø1,seq(sequenceø1)):void 0}.call(this)};var reduceList=function reduceList(f,initial,sequence){return function loop(){var recur=loop;var resultø1=initial;var itemsø1=sequence;do{recur=isEmpty(itemsø1)?resultø1:(loop[0]=f(resultø1,first(itemsø1)),loop[1]=rest(itemsø1),loop)}while(resultø1=loop[0],itemsø1=loop[1],recur===loop);return recur}.call(this)};var count=exports.count=function count(sequence){return isNil(sequence)?0:seq(sequence).length};var isEmpty=exports.isEmpty=function isEmpty(sequence){return count(sequence)===0};var first=exports.first=function first(sequence){return isNil(sequence)?void 0:isList(sequence)?sequence.head:isVector(sequence)||isString(sequence)?(sequence||0)[0]:isLazySeq(sequence)?first(lazySeqValue(sequence)):"else"?first(seq(sequence)):void 0};var second=exports.second=function second(sequence){return isNil(sequence)?void 0:isList(sequence)?first(rest(sequence)):isVector(sequence)||isString(sequence)?(sequence||0)[1]:isLazySeq(sequence)?second(lazySeqValue(sequence)):"else"?first(rest(seq(sequence))):void 0};var third=exports.third=function third(sequence){return isNil(sequence)?void 0:isList(sequence)?first(rest(rest(sequence))):isVector(sequence)||isString(sequence)?(sequence||0)[2]:isLazySeq(sequence)?third(lazySeqValue(sequence)):"else"?second(rest(seq(sequence))):void 0};var rest=exports.rest=function rest(sequence){return isNil(sequence)?list():isList(sequence)?sequence.tail:isVector(sequence)||isString(sequence)?sequence.slice(1):isLazySeq(sequence)?rest(lazySeqValue(sequence)):"else"?rest(seq(sequence)):void 0};var lastOfList=function lastOfList(list){return function loop(){var recur=loop;var itemø1=first(list);var itemsø1=rest(list);do{recur=isEmpty(itemsø1)?itemø1:(loop[0]=first(itemsø1),loop[1]=rest(itemsø1),loop)}while(itemø1=loop[0],itemsø1=loop[1],recur===loop);return recur}.call(this)};var last=exports.last=function last(sequence){return isVector(sequence)||isString(sequence)?(sequence||0)[dec(count(sequence))]:isList(sequence)?lastOfList(sequence):isNil(sequence)?void 0:isLazySeq(sequence)?last(lazySeqValue(sequence)):"else"?last(seq(sequence)):void 0};var butlast=exports.butlast=function butlast(sequence){return function(){var itemsø1=isNil(sequence)?void 0:isString(sequence)?subs(sequence,0,dec(count(sequence))):isVector(sequence)?sequence.slice(0,dec(count(sequence))):isList(sequence)?list.apply(void 0,butlast(vec(sequence))):isLazySeq(sequence)?butlast(lazySeqValue(sequence)):"else"?butlast(seq(sequence)):void 0;return!(isNil(itemsø1)||isEmpty(itemsø1))?itemsø1:void 0}.call(this)};var take=exports.take=function take(n,sequence){return isNil(sequence)?list():isVector(sequence)?takeFromVector(n,sequence):isList(sequence)?takeFromList(n,sequence):isLazySeq(sequence)?take(n,lazySeqValue(sequence)):"else"?take(n,seq(sequence)):void 0};var takeVectorWhile=function takeVectorWhile(predicate,vector){return function loop(){var recur=loop;var resultø1=[];var tailø1=vector;var headø1=first(vector);do{recur=!isEmpty(tailø1)&&predicate(headø1)?(loop[0]=conj(resultø1,headø1),loop[1]=rest(tailø1),loop[2]=first(tailø1),loop):resultø1}while(resultø1=loop[0],tailø1=loop[1],headø1=loop[2],recur===loop);return recur}.call(this)};var takeListWhile=function takeListWhile(predicate,items){return function loop(){var recur=loop;var resultø1=[];var tailø1=items;var headø1=first(items);do{recur=!isEmpty(tailø1)&&isPredicate(headø1)?(loop[0]=conj(resultø1,headø1),loop[1]=rest(tailø1),loop[2]=first(tailø1),loop):list.apply(void 0,resultø1)}while(resultø1=loop[0],tailø1=loop[1],headø1=loop[2],recur===loop);return recur}.call(this)};var takeWhile=exports.takeWhile=function takeWhile(predicate,sequence){return isNil(sequence)?list():isVector(sequence)?takeVectorWhile(predicate,sequence):isList(sequence)?takeVectorWhile(predicate,sequence):"else"?takeWhile(predicate,lazySeqValue(sequence)):void 0};var takeFromVector=function takeFromVector(n,vector){return vector.slice(0,n)};var takeFromList=function takeFromList(n,sequence){return function loop(){var recur=loop;var takenø1=list();var itemsø1=sequence;var nø2=n;do{recur=nø2===0||isEmpty(itemsø1)?reverse(takenø1):(loop[0]=cons(first(itemsø1),takenø1),loop[1]=rest(itemsø1),loop[2]=dec(nø2),loop)}while(takenø1=loop[0],itemsø1=loop[1],nø2=loop[2],recur===loop);return recur}.call(this)};var dropFromList=function dropFromList(n,sequence){return function loop(){var recur=loop;var leftø1=n;var itemsø1=sequence;do{recur=leftø1<1||isEmpty(itemsø1)?itemsø1:(loop[0]=dec(leftø1),loop[1]=rest(itemsø1),loop)}while(leftø1=loop[0],itemsø1=loop[1],recur===loop);return recur}.call(this)};var drop=exports.drop=function drop(n,sequence){return n<=0?sequence:isString(sequence)?sequence.substr(n):isVector(sequence)?sequence.slice(n):isList(sequence)?dropFromList(n,sequence):isNil(sequence)?list():isLazySeq(sequence)?drop(n,lazySeqValue(sequence)):"else"?drop(n,seq(sequence)):void 0};var conjList=function conjList(sequence,items){return reduce(function(result,item){return cons(item,result)},sequence,items)};var conj=exports.conj=function conj(sequence){var items=Array.prototype.slice.call(arguments,1);return isVector(sequence)?sequence.concat(items):isString(sequence)?""+sequence+str.apply(void 0,items):isNil(sequence)?list.apply(void 0,reverse(items)):isList(sequence)||isLazySeq()?conjList(sequence,items):isDictionary(sequence)?merge(sequence,merge.apply(void 0,items)):"else"?function(){throw TypeError(""+"Type can't be conjoined "+sequence)}():void 0};var assoc=exports.assoc=function assoc(source){var keyValues=Array.prototype.slice.call(arguments,1);return conj(source,dictionary.apply(void 0,keyValues))};var concat=exports.concat=function concat(){var sequences=Array.prototype.slice.call(arguments,0);return reverse(reduce(function(result,sequence){return reduce(function(result,item){return cons(item,result)},result,seq(sequence))},list(),sequences))};var seq=exports.seq=function seq(sequence){return isNil(sequence)?void 0:isVector(sequence)||isList(sequence)||isLazySeq(sequence)?sequence:isString(sequence)?Array.prototype.slice.call(sequence):isDictionary(sequence)?keyValues(sequence):"default"?function(){throw TypeError(""+"Can not seq "+sequence)}():void 0};var isSeq=exports.isSeq=function isSeq(sequence){return isList(sequence)||isLazySeq(sequence)};var listToVector=function listToVector(source){return function loop(){var recur=loop;var resultø1=[];var listø1=source;do{recur=isEmpty(listø1)?resultø1:(loop[0]=function(){resultø1.push(first(listø1));return resultø1}(),loop[1]=rest(listø1),loop)}while(resultø1=loop[0],listø1=loop[1],recur===loop);return recur}.call(this)};var vec=exports.vec=function vec(sequence){return isNil(sequence)?[]:isVector(sequence)?sequence:isList(sequence)?listToVector(sequence):"else"?vec(seq(sequence)):void 0};var sort=exports.sort=function sort(f,items){return function(){var hasComparatorø1=isFn(f);var itemsø2=!hasComparatorø1&&isNil(items)?f:items;var compareø1=hasComparatorø1?function(a,b){return f(a,b)?0:1}:void 0;return isNil(itemsø2)?list():isVector(itemsø2)?itemsø2.sort(compareø1):isList(itemsø2)?list.apply(void 0,vec(itemsø2).sort(compareø1)):isDictionary(itemsø2)?seq(itemsø2).sort(compareø1):"else"?sort(f,seq(itemsø2)):void 0}.call(this)};var repeat=exports.repeat=function repeat(n,x){return function loop(){var recur=loop;var nø2=n;var resultø1=[];do{recur=nø2<=0?resultø1:(loop[0]=dec(nø2),loop[1]=conj(resultø1,x),loop)}while(nø2=loop[0],resultø1=loop[1],recur===loop);return recur}.call(this)};var isEvery=exports.isEvery=function isEvery(predicate,sequence){return vec(sequence).every(function($1){return predicate($1)})};var some=exports.some=function some(predicate,sequence){return function loop(){var recur=loop;var itemsø1=sequence;do{recur=isEmpty(itemsø1)?false:predicate(first(itemsø1))?true:"else"?(loop[0]=rest(itemsø1),loop):void 0}while(itemsø1=loop[0],recur===loop);return recur}.call(this)};var partition=exports.partition=function partition(){switch(arguments.length){case 2:var n=arguments[0];var coll=arguments[1];return partition(n,n,coll);case 3:var n=arguments[0];var step=arguments[1];var coll=arguments[2];return partition(n,step,[],coll);case 4:var n=arguments[0];var step=arguments[1];var pad=arguments[2];var coll=arguments[3];return function loop(){var recur=loop;var resultø1=[];var itemsø1=seq(coll);do{recur=function(){var chunkø1=take(n,itemsø1);var sizeø1=count(chunkø1);return sizeø1===n?(loop[0]=conj(resultø1,chunkø1),loop[1]=drop(step,itemsø1),loop):0===sizeø1?resultø1:n>sizeø1+count(pad)?resultø1:"else"?conj(resultø1,take(n,vec(concat(chunkø1,pad)))):void 0}.call(this)}while(resultø1=loop[0],itemsø1=loop[1],recur===loop);return recur}.call(this);default:throw RangeError("Wrong number of arguments passed")}};var interleave=exports.interleave=function interleave(){switch(arguments.length){case 2:var ax=arguments[0];var bx=arguments[1];return function loop(){var recur=loop;var cxø1=[];var axø2=ax;var bxø2=bx;do{recur=isEmpty(axø2)||isEmpty(bxø2)?seq(cxø1):(loop[0]=conj(cxø1,first(axø2),first(bxø2)),loop[1]=rest(axø2),loop[2]=rest(bxø2),loop)}while(cxø1=loop[0],axø2=loop[1],bxø2=loop[2],recur===loop);return recur}.call(this);default:var sequences=Array.prototype.slice.call(arguments,0);return function loop(){var recur=loop;var resultø1=[];var sequencesø2=sequences;do{recur=some(isEmpty,sequencesø2)?resultø1:(loop[0]=concat(resultø1,map(first,sequencesø2)),loop[1]=map(rest,sequencesø2),loop)}while(resultø1=loop[0],sequencesø2=loop[1],recur===loop);return recur}.call(this)}};var nth=exports.nth=function nth(sequence,index,notFound){return isNil(sequence)?notFound:isList(sequence)?index<count(sequence)?first(drop(index,sequence)):notFound:isVector(sequence)||isString(sequence)?index<count(sequence)?sequence[index]:notFound:isLazySeq(sequence)?nth(lazySeqValue(sequence),index,notFound):"else"?function(){throw TypeError("Unsupported type")}():void 0}},{"./runtime":"57peRD"}],"wisp/string":[function(require,module,exports){module.exports=require("WvRJGK")},{}],WvRJGK:[function(require,module,exports){{var _ns_={id:"wisp.string",doc:void 0};var wisp_runtime=require("./runtime");var str=wisp_runtime.str;var subs=wisp_runtime.subs;var reMatches=wisp_runtime.reMatches;var isNil=wisp_runtime.isNil;var isString=wisp_runtime.isString;var wisp_sequence=require("./sequence");var vec=wisp_sequence.vec;var isEmpty=wisp_sequence.isEmpty}var split=exports.split=function split(string,pattern,limit){return string.split(pattern,limit)
};var join=exports.join=function join(){switch(arguments.length){case 1:var coll=arguments[0];return str.apply(void 0,vec(coll));case 2:var separator=arguments[0];var coll=arguments[1];return vec(coll).join(separator);default:throw RangeError("Wrong number of arguments passed")}};var upperCase=exports.upperCase=function upperCase(string){return string.toUpperCase()};var upperCase=exports.upperCase=function upperCase(string){return string.toUpperCase()};var lowerCase=exports.lowerCase=function lowerCase(string){return string.toLowerCase()};var capitalize=exports.capitalize=function capitalize(string){return count(string)<2?upperCase(string):""+upperCase(subs(s,0,1))+lowerCase(subs(s,1))};var replace=exports.replace=function replace(string,match,replacement){return string.replace(match,replacement)};var __LEFTSPACES__=exports.__LEFTSPACES__=/^\s\s*/;var __RIGHTSPACES__=exports.__RIGHTSPACES__=/\s\s*$/;var __SPACES__=exports.__SPACES__=/^\s\s*$/;var triml=exports.triml=isNil("".trimLeft)?function(string){return string.replace(__LEFTSPACES__,"")}:function(string){return string.trimLeft()};var trimr=exports.trimr=isNil("".trimRight)?function(string){return string.replace(__RIGHTSPACES__,"")}:function(string){return string.trimRight()};var trim=exports.trim=isNil("".trim)?function(string){return string.replace(__LEFTSPACES__).replace(__RIGHTSPACES__)}:function(string){return string.trim()};var isBlank=exports.isBlank=function isBlank(string){return isNil(string)||isEmpty(string)||reMatches(__SPACES__,string)}},{"./runtime":"57peRD","./sequence":"Dhp18X"}],"wisp/reader":[function(require,module,exports){module.exports=require("RKZSDK")},{}],RKZSDK:[function(require,module,exports){{var _ns_={id:"wisp.reader",doc:"Reader module provides functions for reading text input\n  as wisp data structures"};var wisp_sequence=require("./sequence");var list=wisp_sequence.list;var isList=wisp_sequence.isList;var count=wisp_sequence.count;var isEmpty=wisp_sequence.isEmpty;var first=wisp_sequence.first;var second=wisp_sequence.second;var third=wisp_sequence.third;var rest=wisp_sequence.rest;var map=wisp_sequence.map;var vec=wisp_sequence.vec;var cons=wisp_sequence.cons;var conj=wisp_sequence.conj;var rest=wisp_sequence.rest;var concat=wisp_sequence.concat;var last=wisp_sequence.last;var butlast=wisp_sequence.butlast;var sort=wisp_sequence.sort;var lazySeq=wisp_sequence.lazySeq;var reduce=wisp_sequence.reduce;var wisp_runtime=require("./runtime");var isOdd=wisp_runtime.isOdd;var dictionary=wisp_runtime.dictionary;var keys=wisp_runtime.keys;var isNil=wisp_runtime.isNil;var inc=wisp_runtime.inc;var dec=wisp_runtime.dec;var isVector=wisp_runtime.isVector;var isString=wisp_runtime.isString;var isNumber=wisp_runtime.isNumber;var isBoolean=wisp_runtime.isBoolean;var isObject=wisp_runtime.isObject;var isDictionary=wisp_runtime.isDictionary;var rePattern=wisp_runtime.rePattern;var reMatches=wisp_runtime.reMatches;var reFind=wisp_runtime.reFind;var str=wisp_runtime.str;var subs=wisp_runtime.subs;var char=wisp_runtime.char;var vals=wisp_runtime.vals;var isEqual=wisp_runtime.isEqual;var wisp_ast=require("./ast");var isSymbol=wisp_ast.isSymbol;var symbol=wisp_ast.symbol;var isKeyword=wisp_ast.isKeyword;var keyword=wisp_ast.keyword;var meta=wisp_ast.meta;var withMeta=wisp_ast.withMeta;var name=wisp_ast.name;var gensym=wisp_ast.gensym;var wisp_string=require("./string");var split=wisp_string.split;var join=wisp_string.join}var pushBackReader=exports.pushBackReader=function pushBackReader(source,uri){return{lines:split(source,"\n"),buffer:"",uri:uri,column:-1,line:0}};var peekChar=exports.peekChar=function peekChar(reader){return function(){var lineø1=(reader||0)["lines"][(reader||0)["line"]];var columnø1=inc((reader||0)["column"]);return isNil(lineø1)?void 0:lineø1[columnø1]||"\n"}.call(this)};var readChar=exports.readChar=function readChar(reader){return function(){var chø1=peekChar(reader);isNewline(peekChar(reader))?function(){(reader||0)["line"]=inc((reader||0)["line"]);return(reader||0)["column"]=-1}():(reader||0)["column"]=inc((reader||0)["column"]);return chø1}.call(this)};var isNewline=exports.isNewline=function isNewline(ch){return"\n"===ch};var isBreakingWhitespace=exports.isBreakingWhitespace=function isBreakingWhitespace(ch){return ch===" "||ch==="	"||ch==="\n"||ch==="\r"};var isWhitespace=exports.isWhitespace=function isWhitespace(ch){return isBreakingWhitespace(ch)||","===ch};var isNumeric=exports.isNumeric=function isNumeric(ch){return ch==="0"||ch==="1"||ch==="2"||ch==="3"||ch==="4"||ch==="5"||ch==="6"||ch==="7"||ch==="8"||ch==="9"};var isCommentPrefix=exports.isCommentPrefix=function isCommentPrefix(ch){return";"===ch};var isNumberLiteral=exports.isNumberLiteral=function isNumberLiteral(reader,initch){return isNumeric(initch)||("+"===initch||"-"===initch)&&isNumeric(peekChar(reader))};var readerError=exports.readerError=function readerError(reader,message){return function(){var textø1=""+message+"\n"+"line:"+(reader||0)["line"]+"\n"+"column:"+(reader||0)["column"];var errorø1=SyntaxError(textø1,(reader||0)["uri"]);errorø1.line=(reader||0)["line"];errorø1.column=(reader||0)["column"];errorø1.uri=(reader||0)["uri"];return function(){throw errorø1}()}.call(this)};var isMacroTerminating=exports.isMacroTerminating=function isMacroTerminating(ch){return!(ch==="#")&&!(ch==="'")&&!(ch===":")&&macros(ch)};var readToken=exports.readToken=function readToken(reader,initch){return function loop(){var recur=loop;var bufferø1=initch;var chø1=peekChar(reader);do{recur=isNil(chø1)||isWhitespace(chø1)||isMacroTerminating(chø1)?bufferø1:(loop[0]=""+bufferø1+readChar(reader),loop[1]=peekChar(reader),loop)}while(bufferø1=loop[0],chø1=loop[1],recur===loop);return recur}.call(this)};var skipLine=exports.skipLine=function skipLine(reader,_){return function loop(){var recur=loop;do{recur=function(){var chø1=readChar(reader);return chø1==="\n"||chø1==="\r"||isNil(chø1)?reader:loop}.call(this)}while(recur===loop);return recur}.call(this)};var intPattern=exports.intPattern=rePattern("^([-+]?)(?:(0)|([1-9][0-9]*)|0[xX]([0-9A-Fa-f]+)|0([0-7]+)|([1-9][0-9]?)[rR]([0-9A-Za-z]+)|0[0-9]+)(N)?$");var ratioPattern=exports.ratioPattern=rePattern("([-+]?[0-9]+)/([0-9]+)");var floatPattern=exports.floatPattern=rePattern("([-+]?[0-9]+(\\.[0-9]*)?([eE][-+]?[0-9]+)?)(M)?");var matchInt=exports.matchInt=function matchInt(s){return function(){var groupsø1=reFind(intPattern,s);var group3ø1=groupsø1[2];return!(isNil(group3ø1)||count(group3ø1)<1)?0:function(){var negateø1="-"===groupsø1[1]?-1:1;var aø1=groupsø1[3]?[groupsø1[3],10]:groupsø1[4]?[groupsø1[4],16]:groupsø1[5]?[groupsø1[5],8]:groupsø1[7]?[groupsø1[7],parseInt(groupsø1[7])]:"else"?[void 0,void 0]:void 0;var nø1=aø1[0];var radixø1=aø1[1];return isNil(nø1)?void 0:negateø1*parseInt(nø1,radixø1)}.call(this)}.call(this)};var matchRatio=exports.matchRatio=function matchRatio(s){return function(){var groupsø1=reFind(ratioPattern,s);var numinatorø1=groupsø1[1];var denominatorø1=groupsø1[2];return parseInt(numinatorø1)/parseInt(denominatorø1)}.call(this)};var matchFloat=exports.matchFloat=function matchFloat(s){return parseFloat(s)};var matchNumber=exports.matchNumber=function matchNumber(s){return reMatches(intPattern,s)?matchInt(s):reMatches(ratioPattern,s)?matchRatio(s):reMatches(floatPattern,s)?matchFloat(s):void 0};var escapeCharMap=exports.escapeCharMap=function escapeCharMap(c){return c==="t"?"	":c==="r"?"\r":c==="n"?"\n":c==="\\"?"\\":c==='"'?'"':c==="b"?"\b":c==="f"?"\f":"else"?void 0:void 0};var read2Chars=exports.read2Chars=function read2Chars(reader){return""+readChar(reader)+readChar(reader)};var read4Chars=exports.read4Chars=function read4Chars(reader){return""+readChar(reader)+readChar(reader)+readChar(reader)+readChar(reader)};var unicode2Pattern=exports.unicode2Pattern=rePattern("[0-9A-Fa-f]{2}");var unicode4Pattern=exports.unicode4Pattern=rePattern("[0-9A-Fa-f]{4}");var validateUnicodeEscape=exports.validateUnicodeEscape=function validateUnicodeEscape(unicodePattern,reader,escapeChar,unicodeStr){return reMatches(unicodePattern,unicodeStr)?unicodeStr:readerError(reader,""+"Unexpected unicode escape "+"\\"+escapeChar+unicodeStr)};var makeUnicodeChar=exports.makeUnicodeChar=function makeUnicodeChar(codeStr,base){return function(){var baseø2=base||16;var codeø1=parseInt(codeStr,baseø2);return char(codeø1)}.call(this)};var escapeChar=exports.escapeChar=function escapeChar(buffer,reader){return function(){var chø1=readChar(reader);var mapresultø1=escapeCharMap(chø1);return mapresultø1?mapresultø1:chø1==="x"?makeUnicodeChar(validateUnicodeEscape(unicode2Pattern,reader,chø1,read2Chars(reader))):chø1==="u"?makeUnicodeChar(validateUnicodeEscape(unicode4Pattern,reader,chø1,read4Chars(reader))):isNumeric(chø1)?char(chø1):"else"?readerError(reader,""+"Unexpected unicode escape "+"\\"+chø1):void 0}.call(this)};var readPast=exports.readPast=function readPast(predicate,reader){return function loop(){var recur=loop;var _ø1=void 0;do{recur=predicate(peekChar(reader))?(loop[0]=readChar(reader),loop):peekChar(reader)}while(_ø1=loop[0],recur===loop);return recur}.call(this)};var readDelimitedList=exports.readDelimitedList=function readDelimitedList(delim,reader,isRecursive){return function loop(){var recur=loop;var formsø1=[];do{recur=function(){var _ø1=readPast(isWhitespace,reader);var chø1=readChar(reader);!chø1?readerError(reader,"EOF"):void 0;return delim===chø1?formsø1:function(){var formø1=readForm(reader,chø1);return loop[0]=formø1===reader?formsø1:conj(formsø1,formø1),loop}.call(this)}.call(this)}while(formsø1=loop[0],recur===loop);return recur}.call(this)};var notImplemented=exports.notImplemented=function notImplemented(reader,ch){return readerError(reader,""+"Reader for "+ch+" not implemented yet")};var readDispatch=exports.readDispatch=function readDispatch(reader,_){return function(){var chø1=readChar(reader);var dmø1=dispatchMacros(chø1);return dmø1?dmø1(reader,_):function(){var objectø1=maybeReadTaggedType(reader,chø1);return objectø1?objectø1:readerError(reader,"No dispatch macro for ",chø1)}.call(this)}.call(this)};var readUnmatchedDelimiter=exports.readUnmatchedDelimiter=function readUnmatchedDelimiter(rdr,ch){return readerError(rdr,"Unmached delimiter ",ch)};var readList=exports.readList=function readList(reader,_){return function(){var formø1=readDelimitedList(")",reader,true);return withMeta(list.apply(void 0,formø1),meta(formø1))}.call(this)};var readComment=exports.readComment=function readComment(reader,_){return function loop(){var recur=loop;var bufferø1="";var chø1=readChar(reader);do{recur=isNil(chø1)||"\n"===chø1?reader||list(symbol(void 0,"comment"),bufferø1):"\\"===chø1?(loop[0]=""+bufferø1+escapeChar(bufferø1,reader),loop[1]=readChar(reader),loop):"else"?(loop[0]=""+bufferø1+chø1,loop[1]=readChar(reader),loop):void 0}while(bufferø1=loop[0],chø1=loop[1],recur===loop);return recur}.call(this)};var readVector=exports.readVector=function readVector(reader){return readDelimitedList("]",reader,true)};var readMap=exports.readMap=function readMap(reader){return function(){var formø1=readDelimitedList("}",reader,true);return isOdd(count(formø1))?readerError(reader,"Map literal must contain an even number of forms"):withMeta(dictionary.apply(void 0,formø1),meta(formø1))}.call(this)};var readSet=exports.readSet=function readSet(reader,_){return function(){var formø1=readDelimitedList("}",reader,true);return withMeta(concat([symbol(void 0,"set")],formø1),meta(formø1))}.call(this)};var readNumber=exports.readNumber=function readNumber(reader,initch){return function loop(){var recur=loop;var bufferø1=initch;var chø1=peekChar(reader);do{recur=isNil(chø1)||isWhitespace(chø1)||macros(chø1)?function(){var match=matchNumber(bufferø1);return isNil(match)?readerError(reader,"Invalid number format [",bufferø1,"]"):match}():(loop[0]=""+bufferø1+readChar(reader),loop[1]=peekChar(reader),loop)}while(bufferø1=loop[0],chø1=loop[1],recur===loop);return recur}.call(this)};var readString=exports.readString=function readString(reader){return function loop(){var recur=loop;var bufferø1="";var chø1=readChar(reader);do{recur=isNil(chø1)?readerError(reader,"EOF while reading string"):"\\"===chø1?(loop[0]=""+bufferø1+escapeChar(bufferø1,reader),loop[1]=readChar(reader),loop):'"'===chø1?bufferø1:"default"?(loop[0]=""+bufferø1+chø1,loop[1]=readChar(reader),loop):void 0}while(bufferø1=loop[0],chø1=loop[1],recur===loop);return recur}.call(this)};var readUnquote=exports.readUnquote=function readUnquote(reader){return function(){var chø1=peekChar(reader);return!chø1?readerError(reader,"EOF while reading character"):chø1==="@"?function(){readChar(reader);return list(symbol(void 0,"unquote-splicing"),read(reader,true,void 0,true))}():list(symbol(void 0,"unquote"),read(reader,true,void 0,true))}.call(this)};var specialSymbols=exports.specialSymbols=function specialSymbols(text,notFound){return text==="nil"?void 0:text==="true"?true:text==="false"?false:"else"?notFound:void 0};var readSymbol=exports.readSymbol=function readSymbol(reader,initch){return function(){var tokenø1=readToken(reader,initch);var partsø1=split(tokenø1,"/");var hasNsø1=count(partsø1)>1&&count(tokenø1)>1;var nsø1=first(partsø1);var nameø1=join("/",rest(partsø1));return hasNsø1?symbol(nsø1,nameø1):specialSymbols(tokenø1,symbol(tokenø1))}.call(this)};var readKeyword=exports.readKeyword=function readKeyword(reader,initch){return function(){var tokenø1=readToken(reader,readChar(reader));var partsø1=split(tokenø1,"/");var nameø1=last(partsø1);var nsø1=count(partsø1)>1?join("/",butlast(partsø1)):void 0;var issueø1=last(nsø1)===":"?'namespace can\'t ends with ":"':last(nameø1)===":"?'name can\'t end with ":"':last(nameø1)==="/"?'name can\'t end with "/"':count(split(tokenø1,"::"))>1?'name can\'t contain "::"':void 0;return issueø1?readerError(reader,"Invalid token (",issueø1,"): ",tokenø1):!nsø1&&first(nameø1)===":"?keyword(rest(nameø1)):keyword(nsø1,nameø1)}.call(this)};var desugarMeta=exports.desugarMeta=function desugarMeta(form){return isKeyword(form)?dictionary(name(form),true):isSymbol(form)?{tag:form}:isString(form)?{tag:form}:isDictionary(form)?reduce(function(result,pair){(result||0)[name(first(pair))]=second(pair);return result},{},form):"else"?form:void 0};var wrappingReader=exports.wrappingReader=function wrappingReader(prefix){return function(reader){return list(prefix,read(reader,true,void 0,true))}};var throwingReader=exports.throwingReader=function throwingReader(msg){return function(reader){return readerError(reader,msg)}};var readMeta=exports.readMeta=function readMeta(reader,_){return function(){var metadataø1=desugarMeta(read(reader,true,void 0,true));!isDictionary(metadataø1)?readerError(reader,"Metadata must be Symbol, Keyword, String or Map"):void 0;return function(){var formø1=read(reader,true,void 0,true);return isObject(formø1)?withMeta(formø1,conj(metadataø1,meta(formø1))):formø1}.call(this)}.call(this)};var readRegex=exports.readRegex=function readRegex(reader){return function loop(){var recur=loop;var bufferø1="";var chø1=readChar(reader);do{recur=isNil(chø1)?readerError(reader,"EOF while reading string"):"\\"===chø1?(loop[0]=""+bufferø1+chø1+readChar(reader),loop[1]=readChar(reader),loop):'"'===chø1?rePattern(bufferø1):"default"?(loop[0]=""+bufferø1+chø1,loop[1]=readChar(reader),loop):void 0}while(bufferø1=loop[0],chø1=loop[1],recur===loop);return recur}.call(this)};var readParam=exports.readParam=function readParam(reader,initch){return function(){var formø1=readSymbol(reader,initch);return isEqual(formø1,symbol("%"))?symbol("%1"):formø1}.call(this)};var isParam=exports.isParam=function isParam(form){return isSymbol(form)&&"%"===first(name(form))};var lambdaParamsHash=exports.lambdaParamsHash=function lambdaParamsHash(form){return isParam(form)?dictionary(form,form):isDictionary(form)||isVector(form)||isList(form)?conj.apply(void 0,map(lambdaParamsHash,vec(form))):"else"?{}:void 0};var lambdaParams=exports.lambdaParams=function lambdaParams(body){return function(){var namesø1=sort(vals(lambdaParamsHash(body)));var variadicø1=isEqual(first(namesø1),symbol("%&"));var nø1=variadicø1&&count(namesø1)===1?0:parseInt(rest(name(last(namesø1))));var paramsø1=function loop(){var recur=loop;var namesø2=[];var iø1=1;do{recur=iø1<=nø1?(loop[0]=conj(namesø2,symbol(""+"%"+iø1)),loop[1]=inc(iø1),loop):namesø2}while(namesø2=loop[0],iø1=loop[1],recur===loop);return recur}.call(this);return variadicø1?conj(paramsø1,symbol(void 0,"&"),symbol(void 0,"%&")):namesø1}.call(this)};var readLambda=exports.readLambda=function readLambda(reader){return function(){var bodyø1=readList(reader);return list(symbol(void 0,"fn"),lambdaParams(bodyø1),bodyø1)}.call(this)};var readDiscard=exports.readDiscard=function readDiscard(reader,_){read(reader,true,void 0,true);return reader};var macros=exports.macros=function macros(c){return c==='"'?readString:c===":"?readKeyword:c===";"?readComment:c==="'"?wrappingReader(symbol(void 0,"quote")):c==="@"?wrappingReader(symbol(void 0,"deref")):c==="^"?readMeta:c==="`"?wrappingReader(symbol(void 0,"syntax-quote")):c==="~"?readUnquote:c==="("?readList:c===")"?readUnmatchedDelimiter:c==="["?readVector:c==="]"?readUnmatchedDelimiter:c==="{"?readMap:c==="}"?readUnmatchedDelimiter:c==="\\"?readChar:c==="%"?readParam:c==="#"?readDispatch:"else"?void 0:void 0};var dispatchMacros=exports.dispatchMacros=function dispatchMacros(s){return s==="{"?readSet:s==="("?readLambda:s==="<"?throwingReader("Unreadable form"):s==='"'?readRegex:s==="!"?readComment:s==="_"?readDiscard:"else"?void 0:void 0};var readForm=exports.readForm=function readForm(reader,ch){return function(){var startø1={line:(reader||0)["line"],column:(reader||0)["column"]};var readMacroø1=macros(ch);var formø1=readMacroø1?readMacroø1(reader,ch):isNumberLiteral(reader,ch)?readNumber(reader,ch):"else"?readSymbol(reader,ch):void 0;var endø1={line:(reader||0)["line"],column:(reader||0)["column"]};var locationø1={uri:(reader||0)["uri"],start:startø1,end:endø1};return formø1===reader?formø1:!(isString(formø1)||isNumber(formø1)||isBoolean(formø1)||isNil(formø1)||isKeyword(formø1))?withMeta(formø1,conj(locationø1,meta(formø1))):"else"?formø1:void 0}.call(this)};var read=exports.read=function read(reader,eofIsError,sentinel,isRecursive){return function loop(){var recur=loop;do{recur=function(){var chø1=readChar(reader);var formø1=isNil(chø1)?eofIsError?readerError(reader,"EOF"):sentinel:isWhitespace(chø1)?reader:isCommentPrefix(chø1)?read(readComment(reader,chø1),eofIsError,sentinel,isRecursive):"else"?readForm(reader,chø1):void 0;return formø1===reader?loop:formø1}.call(this)}while(recur===loop);return recur}.call(this)};var read_=exports.read_=function read_(source,uri){return function(){var readerø1=pushBackReader(source,uri);var eofø1=gensym();return function loop(){var recur=loop;var formsø1=[];var formø1=read(readerø1,false,eofø1,false);do{recur=formø1===eofø1?formsø1:(loop[0]=conj(formsø1,formø1),loop[1]=read(readerø1,false,eofø1,false),loop)}while(formsø1=loop[0],formø1=loop[1],recur===loop);return recur}.call(this)}.call(this)};var readFromString=exports.readFromString=function readFromString(source,uri){return function(){var readerø1=pushBackReader(source,uri);return read(readerø1,true,void 0,false)}.call(this)};var readUuid=function readUuid(uuid){return isString(uuid)?list.apply(void 0,[symbol(void 0,"UUID.")].concat([uuid])):readerError(void 0,"UUID literal expects a string as its representation.")};var readQueue=function readQueue(items){return isVector(items)?list.apply(void 0,[symbol(void 0,"PersistentQueue.")].concat([items])):readerError(void 0,"Queue literal expects a vector for its elements.")};var __tagTable__=exports.__tagTable__=dictionary("uuid",readUuid,"queue",readQueue);var maybeReadTaggedType=exports.maybeReadTaggedType=function maybeReadTaggedType(reader,initch){return function(){var tagø1=readSymbol(reader,initch);var pfnø1=(__tagTable__||0)[name(tagø1)];return pfnø1?pfnø1(read(reader,true,void 0,false)):readerError(reader,""+"Could not find tag parser for "+name(tagø1)+" in "+(""+keys(__tagTable__)))}.call(this)}},{"./sequence":"Dhp18X","./runtime":"57peRD","./ast":"/Ek5E3","./string":"WvRJGK"}],"wisp/ast":[function(require,module,exports){module.exports=require("/Ek5E3")},{}],"/Ek5E3":[function(require,module,exports){{var _ns_={id:"wisp.ast",doc:void 0};var wisp_sequence=require("./sequence");var isList=wisp_sequence.isList;var isSequential=wisp_sequence.isSequential;var first=wisp_sequence.first;var second=wisp_sequence.second;var count=wisp_sequence.count;var last=wisp_sequence.last;var map=wisp_sequence.map;var vec=wisp_sequence.vec;var repeat=wisp_sequence.repeat;var wisp_string=require("./string");var split=wisp_string.split;var join=wisp_string.join;var wisp_runtime=require("./runtime");var isNil=wisp_runtime.isNil;var isVector=wisp_runtime.isVector;var isNumber=wisp_runtime.isNumber;var isString=wisp_runtime.isString;var isBoolean=wisp_runtime.isBoolean;var isObject=wisp_runtime.isObject;var isDate=wisp_runtime.isDate;var isRePattern=wisp_runtime.isRePattern;var isDictionary=wisp_runtime.isDictionary;var str=wisp_runtime.str;var inc=wisp_runtime.inc;var subs=wisp_runtime.subs;var isEqual=wisp_runtime.isEqual}var withMeta=exports.withMeta=function withMeta(value,metadata){Object.defineProperty(value,"metadata",{value:metadata,configurable:true});return value};var meta=exports.meta=function meta(value){return isNil(value)?void 0:value.metadata};var __nsSeparator__=exports.__nsSeparator__="⁄";var Symbol=function Symbol(namespace,name){this.namespace=namespace;this.name=name;return this};Symbol.type="wisp.symbol";Symbol.prototype.type=Symbol.type;Symbol.prototype.toString=function(){return function(){var prefixø1=""+"﻿"+"'";var nsø1=namespace(this);return nsø1?""+prefixø1+nsø1+"/"+name(this):""+prefixø1+name(this)}.call(this)};var symbol=exports.symbol=function symbol(ns,id){return isSymbol(ns)?ns:isKeyword(ns)?new Symbol(namespace(ns),name(ns)):isNil(id)?new Symbol(void 0,ns):"else"?new Symbol(ns,id):void 0};var isSymbol=exports.isSymbol=function isSymbol(x){return isString(x)&&"﻿"===x[0]&&"'"===x[1]||x&&Symbol.type===x.type};var isKeyword=exports.isKeyword=function isKeyword(x){return isString(x)&&count(x)>1&&first(x)==="꞉"};var keyword=exports.keyword=function keyword(ns,id){return isKeyword(ns)?ns:isSymbol(ns)?""+"꞉"+name(ns):isNil(id)?""+"꞉"+ns:isNil(ns)?""+"꞉"+id:"else"?""+"꞉"+ns+__nsSeparator__+id:void 0};var keywordName=function keywordName(value){return last(split(subs(value,1),__nsSeparator__))};var symbolName=function symbolName(value){return value.name||last(split(subs(value,2),__nsSeparator__))};var name=exports.name=function name(value){return isSymbol(value)?symbolName(value):isKeyword(value)?keywordName(value):isString(value)?value:"else"?function(){throw new TypeError(""+"Doesn't support name: "+value)}():void 0};var keywordNamespace=function keywordNamespace(x){return function(){var partsø1=split(subs(x,1),__nsSeparator__);return count(partsø1)>1?partsø1[0]:void 0}.call(this)};var symbolNamespace=function symbolNamespace(x){return function(){var partsø1=isString(x)?split(subs(x,1),__nsSeparator__):[x.namespace,x.name];return count(partsø1)>1?partsø1[0]:void 0}.call(this)};var namespace=exports.namespace=function namespace(x){return isSymbol(x)?symbolNamespace(x):isKeyword(x)?keywordNamespace(x):"else"?function(){throw new TypeError(""+"Doesn't supports namespace: "+x)}():void 0};var gensym=exports.gensym=function gensym(prefix){return symbol(""+(isNil(prefix)?"G__":prefix)+(gensym.base=gensym.base+1))};gensym.base=0;var isUnquote=exports.isUnquote=function isUnquote(form){return isList(form)&&isEqual(first(form),symbol(void 0,"unquote"))};var isUnquoteSplicing=exports.isUnquoteSplicing=function isUnquoteSplicing(form){return isList(form)&&isEqual(first(form),symbol(void 0,"unquote-splicing"))};var isQuote=exports.isQuote=function isQuote(form){return isList(form)&&isEqual(first(form),symbol(void 0,"quote"))};var isSyntaxQuote=exports.isSyntaxQuote=function isSyntaxQuote(form){return isList(form)&&isEqual(first(form),symbol(void 0,"syntax-quote"))};var normalize=function normalize(n,len){return function loop(){var recur=loop;var nsø1=""+n;do{recur=count(nsø1)<len?(loop[0]=""+"0"+nsø1,loop):nsø1}while(nsø1=loop[0],recur===loop);return recur}.call(this)};var quoteString=exports.quoteString=function quoteString(s){s=join('\\"',split(s,'"'));s=join("\\\\",split(s,"\\"));s=join("\\b",split(s,"\b"));s=join("\\f",split(s,"\f"));s=join("\\n",split(s,"\n"));s=join("\\r",split(s,"\r"));s=join("\\t",split(s,"	"));return""+'"'+s+'"'};var prStr=exports.prStr=function prStr(x,offset){return function(){var offsetø2=offset||0;return isNil(x)?"nil":isKeyword(x)?namespace(x)?""+":"+namespace(x)+"/"+name(x):""+":"+name(x):isSymbol(x)?namespace(x)?""+namespace(x)+"/"+name(x):name(x):isString(x)?quoteString(x):isDate(x)?""+'#inst "'+x.getUTCFullYear()+"-"+normalize(inc(x.getUTCMonth()),2)+"-"+normalize(x.getUTCDate(),2)+"T"+normalize(x.getUTCHours(),2)+":"+normalize(x.getUTCMinutes(),2)+":"+normalize(x.getUTCSeconds(),2)+"."+normalize(x.getUTCMilliseconds(),3)+"-"+'00:00"':isVector(x)?""+"["+join(""+"\n "+join(repeat(inc(offsetø2)," ")),map(function($1){return prStr($1,inc(offsetø2))},vec(x)))+"]":isDictionary(x)?""+"{"+join(""+",\n"+join(repeat(inc(offsetø2)," ")),map(function(pair){return function(){var indentø1=join(repeat(offsetø2," "));var keyø1=prStr(first(pair),inc(offsetø2));var valueø1=prStr(second(pair),2+offsetø2+count(keyø1));return""+keyø1+" "+valueø1}.call(this)},x))+"}":isSequential(x)?""+"("+join(" ",map(function($1){return prStr($1,inc(offsetø2))},vec(x)))+")":isRePattern(x)?""+'#"'+join("\\/",split(x.source,"/"))+'"':"else"?""+x:void 0}.call(this)}},{"./sequence":"Dhp18X","./string":"WvRJGK","./runtime":"57peRD"}],"wisp/expander":[function(require,module,exports){module.exports=require("HujXR7")},{}],HujXR7:[function(require,module,exports){{var _ns_={id:"wisp.expander",doc:"wisp syntax and macro expander module"};var wisp_ast=require("./ast");var meta=wisp_ast.meta;var withMeta=wisp_ast.withMeta;var isSymbol=wisp_ast.isSymbol;var isKeyword=wisp_ast.isKeyword;var isQuote=wisp_ast.isQuote;var symbol=wisp_ast.symbol;var namespace=wisp_ast.namespace;var name=wisp_ast.name;var isUnquote=wisp_ast.isUnquote;var isUnquoteSplicing=wisp_ast.isUnquoteSplicing;var wisp_sequence=require("./sequence");var isList=wisp_sequence.isList;var list=wisp_sequence.list;var conj=wisp_sequence.conj;var partition=wisp_sequence.partition;var seq=wisp_sequence.seq;var isEmpty=wisp_sequence.isEmpty;var map=wisp_sequence.map;var vec=wisp_sequence.vec;var isEvery=wisp_sequence.isEvery;var concat=wisp_sequence.concat;var first=wisp_sequence.first;var second=wisp_sequence.second;var third=wisp_sequence.third;var rest=wisp_sequence.rest;var last=wisp_sequence.last;var butlast=wisp_sequence.butlast;var interleave=wisp_sequence.interleave;var cons=wisp_sequence.cons;var count=wisp_sequence.count;var some=wisp_sequence.some;var assoc=wisp_sequence.assoc;var reduce=wisp_sequence.reduce;var filter=wisp_sequence.filter;var isSeq=wisp_sequence.isSeq;var wisp_runtime=require("./runtime");var isNil=wisp_runtime.isNil;var isDictionary=wisp_runtime.isDictionary;var isVector=wisp_runtime.isVector;var keys=wisp_runtime.keys;var vals=wisp_runtime.vals;var isString=wisp_runtime.isString;var isNumber=wisp_runtime.isNumber;var isBoolean=wisp_runtime.isBoolean;var isDate=wisp_runtime.isDate;var isRePattern=wisp_runtime.isRePattern;var isEven=wisp_runtime.isEven;var isEqual=wisp_runtime.isEqual;var max=wisp_runtime.max;var inc=wisp_runtime.inc;var dec=wisp_runtime.dec;var dictionary=wisp_runtime.dictionary;var subs=wisp_runtime.subs;var wisp_string=require("./string");var split=wisp_string.split}var __macros__=exports.__macros__={};var expand=function expand(expander,form,env){return function(){var metadataø1=meta(form)||{};var parmasø1=rest(form);var implicitø1=map(function($1){return isEqual("&form",$1)?form:isEqual("&env",$1)?env:"else"?$1:void 0},(meta(expander)||0)["implicit"]||[]);var paramsø1=vec(concat(implicitø1,vec(rest(form))));var expansionø1=expander.apply(void 0,paramsø1);return expansionø1?withMeta(expansionø1,conj(metadataø1,meta(expansionø1))):expansionø1}.call(this)};var installMacro=exports.installMacro=function installMacro(op,expander){return(__macros__||0)[name(op)]=expander};var macro=function macro(op){return isSymbol(op)&&(__macros__||0)[name(op)]};var isMethodSyntax=exports.isMethodSyntax=function isMethodSyntax(op){return function(){var idø1=isSymbol(op)&&name(op);return idø1&&"."===first(idø1)&&!("-"===second(idø1))&&!("."===idø1)}.call(this)};var isFieldSyntax=exports.isFieldSyntax=function isFieldSyntax(op){return function(){var idø1=isSymbol(op)&&name(op);return idø1&&"."===first(idø1)&&"-"===second(idø1)}.call(this)};var isNewSyntax=exports.isNewSyntax=function isNewSyntax(op){return function(){var idø1=isSymbol(op)&&name(op);return idø1&&"."===last(idø1)&&!("."===idø1)}.call(this)};var methodSyntax=exports.methodSyntax=function methodSyntax(op,target){var params=Array.prototype.slice.call(arguments,2);return function(){var opMetaø1=meta(op);var formStartø1=(opMetaø1||0)["start"];var targetMetaø1=meta(target);var memberø1=withMeta(symbol(subs(name(op),1)),conj(opMetaø1,{start:{line:(formStartø1||0)["line"],column:inc((formStartø1||0)["column"])}}));var agetø1=withMeta(symbol(void 0,"aget"),conj(opMetaø1,{end:{line:(formStartø1||0)["line"],column:inc((formStartø1||0)["column"])}}));var methodø1=withMeta(list.apply(void 0,[agetø1].concat([target],[list.apply(void 0,[symbol(void 0,"quote")].concat([memberø1]))])),conj(opMetaø1,{end:(meta(target)||0)["end"]}));return isNil(target)?function(){throw Error("Malformed method expression, expecting (.method object ...)")}():list.apply(void 0,[methodø1].concat(vec(params)))}.call(this)};var fieldSyntax=exports.fieldSyntax=function fieldSyntax(field,target){var more=Array.prototype.slice.call(arguments,2);return function(){var metadataø1=meta(field);var startø1=(metadataø1||0)["start"];var endø1=(metadataø1||0)["end"];var memberø1=withMeta(symbol(subs(name(field),2)),conj(metadataø1,{start:{line:(startø1||0)["line"],column:(startø1||0)["column"]+2}}));return isNil(target)||count(more)?function(){throw Error("Malformed member expression, expecting (.-member target)")}():list.apply(void 0,[symbol(void 0,"aget")].concat([target],[list.apply(void 0,[symbol(void 0,"quote")].concat([memberø1]))]))}.call(this)};var newSyntax=exports.newSyntax=function newSyntax(op){var params=Array.prototype.slice.call(arguments,1);return function(){var idø1=name(op);var idMetaø1=(idø1||0)["meta"];var renameø1=subs(idø1,0,dec(count(idø1)));var constructorø1=withMeta(symbol(renameø1),conj(idMetaø1,{end:{line:((idMetaø1||0)["end"]||0)["line"],column:dec(((idMetaø1||0)["end"]||0)["column"])}}));var operatorø1=withMeta(symbol(void 0,"new"),conj(idMetaø1,{start:{line:((idMetaø1||0)["end"]||0)["line"],column:dec(((idMetaø1||0)["end"]||0)["column"])}}));return list.apply(void 0,[symbol(void 0,"new")].concat([constructorø1],vec(params)))}.call(this)};var keywordInvoke=exports.keywordInvoke=function keywordInvoke(keyword,target){return list.apply(void 0,[symbol(void 0,"get")].concat([target],[keyword]))};var desugar=function desugar(expander,form){return function(){var desugaredø1=expander.apply(void 0,vec(form));var metadataø1=conj({},meta(form),meta(desugaredø1));return withMeta(desugaredø1,metadataø1)}.call(this)};var macroexpand1=exports.macroexpand1=function macroexpand1(form){return function(){var opø1=isList(form)&&first(form);var expanderø1=macro(opø1);return expanderø1?expand(expanderø1,form):isKeyword(opø1)?desugar(keywordInvoke,form):isFieldSyntax(opø1)?desugar(fieldSyntax,form):isMethodSyntax(opø1)?desugar(methodSyntax,form):isNewSyntax(opø1)?desugar(newSyntax,form):"else"?form:void 0}.call(this)};var macroexpand=exports.macroexpand=function macroexpand(form){return function loop(){var recur=loop;
var originalø1=form;var expandedø1=macroexpand1(form);do{recur=originalø1===expandedø1?originalø1:(loop[0]=expandedø1,loop[1]=macroexpand1(expandedø1),loop)}while(originalø1=loop[0],expandedø1=loop[1],recur===loop);return recur}.call(this)};var syntaxQuote=exports.syntaxQuote=function syntaxQuote(form){return isSymbol(form)?list(symbol(void 0,"quote"),form):isKeyword(form)?list(symbol(void 0,"quote"),form):isNumber(form)||isString(form)||isBoolean(form)||isNil(form)||isRePattern(form)?form:isUnquote(form)?second(form):isUnquoteSplicing(form)?readerError("Illegal use of `~@` expression, can only be present in a list"):isEmpty(form)?form:isDictionary(form)?list(symbol(void 0,"apply"),symbol(void 0,"dictionary"),cons(symbol(void 0,".concat"),sequenceExpand(concat.apply(void 0,seq(form))))):isVector(form)?cons(symbol(void 0,".concat"),sequenceExpand(form)):isList(form)?isEmpty(form)?cons(symbol(void 0,"list"),void 0):list(symbol(void 0,"apply"),symbol(void 0,"list"),cons(symbol(void 0,".concat"),sequenceExpand(form))):"else"?readerError("Unknown Collection type"):void 0};var syntaxQuoteExpand=exports.syntaxQuoteExpand=syntaxQuote;var unquoteSplicingExpand=exports.unquoteSplicingExpand=function unquoteSplicingExpand(form){return isVector(form)?form:list(symbol(void 0,"vec"),form)};var sequenceExpand=exports.sequenceExpand=function sequenceExpand(forms){return map(function(form){return isUnquote(form)?[second(form)]:isUnquoteSplicing(form)?unquoteSplicingExpand(second(form)):"else"?[syntaxQuoteExpand(form)]:void 0},forms)};installMacro("syntax-quote",syntaxQuote);var notEqual=exports.notEqual=function notEqual(){var body=Array.prototype.slice.call(arguments,0);return list.apply(void 0,[symbol(void 0,"not")].concat([list.apply(void 0,[symbol(void 0,"=")].concat(vec(body)))]))};installMacro("not=",notEqual);var expandCond=exports.expandCond=function expandCond(){var clauses=Array.prototype.slice.call(arguments,0);return!isEmpty(clauses)?list(symbol(void 0,"if"),first(clauses),isEmpty(rest(clauses))?function(){throw Error("cond requires an even number of forms")}():second(clauses),cons(symbol(void 0,"cond"),rest(rest(clauses)))):void 0};installMacro("cond",expandCond);var expandDefn=exports.expandDefn=function expandDefn(andForm,name){var docPlusMetaPlusBody=Array.prototype.slice.call(arguments,2);return function(){var docø1=isString(first(docPlusMetaPlusBody))?first(docPlusMetaPlusBody):void 0;var metaPlusBodyø1=docø1?rest(docPlusMetaPlusBody):docPlusMetaPlusBody;var metadataø1=isDictionary(first(metaPlusBodyø1))?conj({doc:docø1},first(metaPlusBodyø1)):void 0;var bodyø1=metadataø1?rest(metaPlusBodyø1):metaPlusBodyø1;var idø1=withMeta(name,conj(meta(name)||{},metadataø1));var fnø1=withMeta(list.apply(void 0,[symbol(void 0,"fn")].concat([idø1],vec(bodyø1))),meta(andForm));return list.apply(void 0,[symbol(void 0,"def")].concat([idø1],[fnø1]))}.call(this)};installMacro("defn",withMeta(expandDefn,{implicit:["&form"]}));var expandPrivateDefn=exports.expandPrivateDefn=function expandPrivateDefn(name){var body=Array.prototype.slice.call(arguments,1);return function(){var metadataø1=conj(meta(name)||{},{"private":true});var idø1=withMeta(name,metadataø1);return list.apply(void 0,[symbol(void 0,"defn")].concat([idø1],vec(body)))}.call(this)};installMacro("defn-",expandPrivateDefn)},{"./ast":"/Ek5E3","./sequence":"Dhp18X","./runtime":"57peRD","./string":"WvRJGK"}],"wisp/analyzer":[function(require,module,exports){module.exports=require("UZeJrq")},{}],UZeJrq:[function(require,module,exports){{var _ns_={id:"wisp.analyzer",doc:void 0};var wisp_ast=require("./ast");var meta=wisp_ast.meta;var withMeta=wisp_ast.withMeta;var isSymbol=wisp_ast.isSymbol;var isKeyword=wisp_ast.isKeyword;var isQuote=wisp_ast.isQuote;var symbol=wisp_ast.symbol;var namespace=wisp_ast.namespace;var name=wisp_ast.name;var prStr=wisp_ast.prStr;var isUnquote=wisp_ast.isUnquote;var isUnquoteSplicing=wisp_ast.isUnquoteSplicing;var wisp_sequence=require("./sequence");var isList=wisp_sequence.isList;var list=wisp_sequence.list;var conj=wisp_sequence.conj;var partition=wisp_sequence.partition;var seq=wisp_sequence.seq;var isEmpty=wisp_sequence.isEmpty;var map=wisp_sequence.map;var vec=wisp_sequence.vec;var isEvery=wisp_sequence.isEvery;var concat=wisp_sequence.concat;var first=wisp_sequence.first;var second=wisp_sequence.second;var third=wisp_sequence.third;var rest=wisp_sequence.rest;var last=wisp_sequence.last;var butlast=wisp_sequence.butlast;var interleave=wisp_sequence.interleave;var cons=wisp_sequence.cons;var count=wisp_sequence.count;var some=wisp_sequence.some;var assoc=wisp_sequence.assoc;var reduce=wisp_sequence.reduce;var filter=wisp_sequence.filter;var isSeq=wisp_sequence.isSeq;var wisp_runtime=require("./runtime");var isNil=wisp_runtime.isNil;var isDictionary=wisp_runtime.isDictionary;var isVector=wisp_runtime.isVector;var keys=wisp_runtime.keys;var vals=wisp_runtime.vals;var isString=wisp_runtime.isString;var isNumber=wisp_runtime.isNumber;var isBoolean=wisp_runtime.isBoolean;var isDate=wisp_runtime.isDate;var isRePattern=wisp_runtime.isRePattern;var isEven=wisp_runtime.isEven;var isEqual=wisp_runtime.isEqual;var max=wisp_runtime.max;var dec=wisp_runtime.dec;var dictionary=wisp_runtime.dictionary;var subs=wisp_runtime.subs;var inc=wisp_runtime.inc;var dec=wisp_runtime.dec;var wisp_expander=require("./expander");var macroexpand=wisp_expander.macroexpand;var wisp_string=require("./string");var split=wisp_string.split;var join=wisp_string.join}var syntaxError=exports.syntaxError=function syntaxError(message,form){return function(){var metadataø1=meta(form);var errorø1=SyntaxError(""+message+"\n"+"Form: "+prStr(form)+"\n"+"URI: "+(metadataø1||0)["uri"]+"\n"+"Line: "+((metadataø1||0)["start"]||0)["line"]+"\n"+"Column: "+((metadataø1||0)["start"]||0)["column"]);return function(){throw errorø1}()}.call(this)};var analyzeKeyword=exports.analyzeKeyword=function analyzeKeyword(env,form){return{op:"constant",form:form}};var __specials__=exports.__specials__={};var installSpecial=exports.installSpecial=function installSpecial(op,analyzer){return(__specials__||0)[name(op)]=analyzer};var analyzeSpecial=exports.analyzeSpecial=function analyzeSpecial(analyzer,env,form){return function(){var metadataø1=meta(form);var astø1=analyzer(env,form);return conj({start:(metadataø1||0)["start"],end:(metadataø1||0)["end"]},astø1)}.call(this)};var analyzeIf=exports.analyzeIf=function analyzeIf(env,form){return function(){var formsø1=rest(form);var testø1=analyze(env,first(formsø1));var consequentø1=analyze(env,second(formsø1));var alternateø1=analyze(env,third(formsø1));count(formsø1)<2?syntaxError("Malformed if expression, too few operands",form):void 0;return{op:"if",form:form,test:testø1,consequent:consequentø1,alternate:alternateø1}}.call(this)};installSpecial("if",analyzeIf);var analyzeThrow=exports.analyzeThrow=function analyzeThrow(env,form){return function(){var expressionø1=analyze(env,second(form));return{op:"throw",form:form,"throw":expressionø1}}.call(this)};installSpecial("throw",analyzeThrow);var analyzeTry=exports.analyzeTry=function analyzeTry(env,form){return function(){var formsø1=vec(rest(form));var tailø1=last(formsø1);var finalizerFormø1=isList(tailø1)&&isEqual(symbol(void 0,"finally"),first(tailø1))?rest(tailø1):void 0;var finalizerø1=finalizerFormø1?analyzeBlock(env,finalizerFormø1):void 0;var bodyFormø1=finalizerø1?butlast(formsø1):formsø1;var tailø2=last(bodyFormø1);var handlerFormø1=isList(tailø2)&&isEqual(symbol(void 0,"catch"),first(tailø2))?rest(tailø2):void 0;var handlerø1=handlerFormø1?conj({name:analyze(env,first(handlerFormø1))},analyzeBlock(env,rest(handlerFormø1))):void 0;var bodyø1=handlerFormø1?analyzeBlock(env,butlast(bodyFormø1)):analyzeBlock(env,bodyFormø1);return{op:"try",form:form,body:bodyø1,handler:handlerø1,finalizer:finalizerø1}}.call(this)};installSpecial("try",analyzeTry);var analyzeSet=exports.analyzeSet=function analyzeSet(env,form){return function(){var bodyø1=rest(form);var leftø1=first(bodyø1);var rightø1=second(bodyø1);var targetø1=isSymbol(leftø1)?analyzeSymbol(env,leftø1):isList(leftø1)?analyzeList(env,leftø1):"else"?leftø1:void 0;var valueø1=analyze(env,rightø1);return{op:"set!",target:targetø1,value:valueø1,form:form}}.call(this)};installSpecial("set!",analyzeSet);var analyzeNew=exports.analyzeNew=function analyzeNew(env,form){return function(){var bodyø1=rest(form);var constructorø1=analyze(env,first(bodyø1));var paramsø1=vec(map(function($1){return analyze(env,$1)},rest(bodyø1)));return{op:"new",constructor:constructorø1,form:form,params:paramsø1}}.call(this)};installSpecial("new",analyzeNew);var analyzeAget=exports.analyzeAget=function analyzeAget(env,form){return function(){var bodyø1=rest(form);var targetø1=analyze(env,first(bodyø1));var attributeø1=second(bodyø1);var fieldø1=isQuote(attributeø1)&&isSymbol(second(attributeø1))&&second(attributeø1);return isNil(attributeø1)?syntaxError("Malformed aget expression expected (aget object member)",form):{op:"member-expression",computed:!fieldø1,form:form,target:targetø1,property:fieldø1?conj(analyzeSpecial(analyzeIdentifier,env,fieldø1),{binding:void 0}):analyze(env,attributeø1)}}.call(this)};installSpecial("aget",analyzeAget);var parseDef=exports.parseDef=function parseDef(){switch(arguments.length){case 1:var id=arguments[0];return{id:id};case 2:var id=arguments[0];var init=arguments[1];return{id:id,init:init};case 3:var id=arguments[0];var doc=arguments[1];var init=arguments[2];return{id:id,doc:doc,init:init};default:throw RangeError("Wrong number of arguments passed")}};var analyzeDef=exports.analyzeDef=function analyzeDef(env,form){return function(){var paramsø1=parseDef.apply(void 0,vec(rest(form)));var idø1=(paramsø1||0)["id"];var metadataø1=meta(idø1);var bindingø1=analyzeSpecial(analyzeDeclaration,env,idø1);var initø1=analyze(env,(paramsø1||0)["init"]);var docø1=(paramsø1||0)["doc"]||(metadataø1||0)["doc"];return{op:"def",doc:docø1,id:bindingø1,init:initø1,"export":(env||0)["top"]&&!(metadataø1||0)["private"],form:form}}.call(this)};installSpecial("def",analyzeDef);var analyzeDo=exports.analyzeDo=function analyzeDo(env,form){return function(){var expressionsø1=rest(form);var bodyø1=analyzeBlock(env,expressionsø1);return conj(bodyø1,{op:"do",form:form})}.call(this)};installSpecial("do",analyzeDo);var analyzeSymbol=exports.analyzeSymbol=function analyzeSymbol(env,form){return function(){var formsø1=split(name(form),".");var metadataø1=meta(form);var startø1=(metadataø1||0)["start"];var endø1=(metadataø1||0)["end"];var expansionø1=count(formsø1)>1?list(symbol(void 0,"aget"),withMeta(symbol(first(formsø1)),conj(metadataø1,{start:startø1,end:{line:(endø1||0)["line"],column:1+(startø1||0)["column"]+count(first(formsø1))}})),list(symbol(void 0,"quote"),withMeta(symbol(join(".",rest(formsø1))),conj(metadataø1,{end:endø1,start:{line:(startø1||0)["line"],column:1+(startø1||0)["column"]+count(first(formsø1))}})))):void 0;return expansionø1?analyze(env,withMeta(expansionø1,meta(form))):analyzeSpecial(analyzeIdentifier,env,form)}.call(this)};var analyzeIdentifier=exports.analyzeIdentifier=function analyzeIdentifier(env,form){return{op:"var",type:"identifier",form:form,start:(meta(form)||0)["start"],end:(meta(form)||0)["end"],binding:resolveBinding(env,form)}};var unresolvedBinding=exports.unresolvedBinding=function unresolvedBinding(env,form){return{op:"unresolved-binding",type:"unresolved-binding",identifier:{type:"identifier",form:symbol(namespace(form),name(form))},start:(meta(form)||0)["start"],end:(meta(form)||0)["end"]}};var resolveBinding=exports.resolveBinding=function resolveBinding(env,form){return((env||0)["locals"]||0)[name(form)]||((env||0)["enclosed"]||0)[name(form)]||unresolvedBinding(env,form)};var analyzeShadow=exports.analyzeShadow=function analyzeShadow(env,id){return function(){var bindingø1=resolveBinding(env,id);return{depth:inc((bindingø1||0)["depth"]||0),shadow:bindingø1}}.call(this)};var analyzeBinding=exports.analyzeBinding=function analyzeBinding(env,form){return function(){var idø1=first(form);var bodyø1=second(form);return conj(analyzeShadow(env,idø1),{op:"binding",type:"binding",id:idø1,init:analyze(env,bodyø1),form:form})}.call(this)};var analyzeDeclaration=exports.analyzeDeclaration=function analyzeDeclaration(env,form){!!(namespace(form)||1<count(split(".",""+form)))?function(){throw Error(""+"Assert failed: "+""+'(not (or (namespace form) (< 1 (count (split "." (str form))))))')}():void 0;return conj(analyzeShadow(env,form),{op:"var",type:"identifier",depth:0,id:form,form:form})};var analyzeParam=exports.analyzeParam=function analyzeParam(env,form){return conj(analyzeShadow(env,form),{op:"param",type:"parameter",id:form,form:form,start:(meta(form)||0)["start"],end:(meta(form)||0)["end"]})};var withBinding=exports.withBinding=function withBinding(env,form){return conj(env,{locals:assoc((env||0)["locals"],name((form||0)["id"]),form),bindings:conj((env||0)["bindings"],form)})};var withParam=exports.withParam=function withParam(env,form){return conj(withBinding(env,form),{params:conj((env||0)["params"],form)})};var subEnv=exports.subEnv=function subEnv(env){return{enclosed:conj({},(env||0)["enclosed"],(env||0)["locals"]),locals:{},bindings:[],params:(env||0)["params"]||[]}};var analyzeLet_=exports.analyzeLet_=function analyzeLet_(env,form,isLoop){return function(){var expressionsø1=rest(form);var bindingsø1=first(expressionsø1);var bodyø1=rest(expressionsø1);var isValidBindingsø1=isVector(bindingsø1)&&isEven(count(bindingsø1));var _ø1=!isValidBindingsø1?function(){throw Error(""+"Assert failed: "+"bindings must be vector of even number of elements"+"valid-bindings?")}():void 0;var scopeø1=reduce(function($1,$2){return withBinding($1,analyzeBinding($1,$2))},subEnv(env),partition(2,bindingsø1));var bindingsø2=(scopeø1||0)["bindings"];var expressionsø2=analyzeBlock(isLoop?conj(scopeø1,{params:bindingsø2}):scopeø1,bodyø1);return{op:"let",form:form,start:(meta(form)||0)["start"],end:(meta(form)||0)["end"],bindings:bindingsø2,statements:(expressionsø2||0)["statements"],result:(expressionsø2||0)["result"]}}.call(this)};var analyzeLet=exports.analyzeLet=function analyzeLet(env,form){return analyzeLet_(env,form,false)};installSpecial("let",analyzeLet);var analyzeLoop=exports.analyzeLoop=function analyzeLoop(env,form){return conj(analyzeLet_(env,form,true),{op:"loop"})};installSpecial("loop",analyzeLoop);var analyzeRecur=exports.analyzeRecur=function analyzeRecur(env,form){return function(){var paramsø1=(env||0)["params"];var formsø1=vec(map(function($1){return analyze(env,$1)},rest(form)));return isEqual(count(paramsø1),count(formsø1))?{op:"recur",form:form,params:formsø1}:syntaxError("Recurs with wrong number of arguments",form)}.call(this)};installSpecial("recur",analyzeRecur);var analyzeQuotedList=exports.analyzeQuotedList=function analyzeQuotedList(form){return{op:"list",items:map(analyzeQuoted,vec(form)),form:form,start:(meta(form)||0)["start"],end:(meta(form)||0)["end"]}};var analyzeQuotedVector=exports.analyzeQuotedVector=function analyzeQuotedVector(form){return{op:"vector",items:map(analyzeQuoted,form),form:form,start:(meta(form)||0)["start"],end:(meta(form)||0)["end"]}};var analyzeQuotedDictionary=exports.analyzeQuotedDictionary=function analyzeQuotedDictionary(form){return function(){var namesø1=vec(map(analyzeQuoted,keys(form)));var valuesø1=vec(map(analyzeQuoted,vals(form)));return{op:"dictionary",form:form,keys:namesø1,values:valuesø1,start:(meta(form)||0)["start"],end:(meta(form)||0)["end"]}}.call(this)};var analyzeQuotedSymbol=exports.analyzeQuotedSymbol=function analyzeQuotedSymbol(form){return{op:"symbol",name:name(form),namespace:namespace(form),form:form}};var analyzeQuotedKeyword=exports.analyzeQuotedKeyword=function analyzeQuotedKeyword(form){return{op:"keyword",name:name(form),namespace:namespace(form),form:form}};var analyzeQuoted=exports.analyzeQuoted=function analyzeQuoted(form){return isSymbol(form)?analyzeQuotedSymbol(form):isKeyword(form)?analyzeQuotedKeyword(form):isList(form)?analyzeQuotedList(form):isVector(form)?analyzeQuotedVector(form):isDictionary(form)?analyzeQuotedDictionary(form):"else"?{op:"constant",form:form}:void 0};var analyzeQuote=exports.analyzeQuote=function analyzeQuote(env,form){return analyzeQuoted(second(form))};installSpecial("quote",analyzeQuote);var analyzeStatement=exports.analyzeStatement=function analyzeStatement(env,form){return function(){var statementsø1=(env||0)["statements"]||[];var bindingsø1=(env||0)["bindings"]||[];var statementø1=analyze(env,form);var opø1=(statementø1||0)["op"];var defsø1=isEqual(opø1,"def")?[(statementø1||0)["var"]]:"else"?void 0:void 0;return conj(env,{statements:conj(statementsø1,statementø1),bindings:concat(bindingsø1,defsø1)})}.call(this)};var analyzeBlock=exports.analyzeBlock=function analyzeBlock(env,form){return function(){var bodyø1=count(form)>1?reduce(analyzeStatement,env,butlast(form)):void 0;var resultø1=analyze(bodyø1||env,last(form));return{statements:(bodyø1||0)["statements"],result:resultø1}}.call(this)};var analyzeFnMethod=exports.analyzeFnMethod=function analyzeFnMethod(env,form){return function(){var signatureø1=isList(form)&&isVector(first(form))?first(form):syntaxError("Malformed fn overload form",form);var bodyø1=rest(form);var variadicø1=some(function($1){return isEqual(symbol(void 0,"&"),$1)},signatureø1);var paramsø1=variadicø1?filter(function($1){return!isEqual(symbol(void 0,"&"),$1)},signatureø1):signatureø1;var arityø1=variadicø1?dec(count(paramsø1)):count(paramsø1);var scopeø1=reduce(function($1,$2){return withParam($1,analyzeParam($1,$2))},conj(env,{params:[]}),paramsø1);return conj(analyzeBlock(scopeø1,bodyø1),{op:"overload",variadic:variadicø1,arity:arityø1,params:(scopeø1||0)["params"],form:form})}.call(this)};var analyzeFn=exports.analyzeFn=function analyzeFn(env,form){return function(){var formsø1=rest(form);var formsø2=isSymbol(first(formsø1))?formsø1:cons(void 0,formsø1);var idø1=first(formsø2);var bindingø1=idø1?analyzeSpecial(analyzeDeclaration,env,idø1):void 0;var bodyø1=rest(formsø2);var overloadsø1=isVector(first(bodyø1))?list(bodyø1):isList(first(bodyø1))&&isVector(first(first(bodyø1)))?bodyø1:"else"?syntaxError(""+"Malformed fn expression, "+"parameter declaration ("+prStr(first(bodyø1))+") must be a vector",form):void 0;var scopeø1=bindingø1?withBinding(subEnv(env),bindingø1):subEnv(env);var methodsø1=map(function($1){return analyzeFnMethod(scopeø1,$1)},vec(overloadsø1));var arityø1=max.apply(void 0,map(function($1){return($1||0)["arity"]},methodsø1));var variadicø1=some(function($1){return($1||0)["variadic"]},methodsø1);return{op:"fn",type:"function",id:bindingø1,variadic:variadicø1,methods:methodsø1,form:form}}.call(this)};installSpecial("fn",analyzeFn);var parseReferences=exports.parseReferences=function parseReferences(forms){return reduce(function(references,form){return isSeq(form)?assoc(references,name(first(form)),vec(rest(form))):references},{},forms)};var parseRequire=exports.parseRequire=function parseRequire(form){return function(){var requirementø1=isSymbol(form)?[form]:vec(form);var idø1=first(requirementø1);var paramsø1=dictionary.apply(void 0,rest(requirementø1));var renamesø1=(paramsø1||0)["꞉rename"];var namesø1=(paramsø1||0)["꞉refer"];var aliasø1=(paramsø1||0)["꞉as"];var referencesø1=!isEmpty(namesø1)?reduce(function(refers,reference){return conj(refers,{op:"refer",form:reference,name:reference,rename:(renamesø1||0)[reference]||(renamesø1||0)[name(reference)],ns:idø1})},[],namesø1):void 0;return{op:"require",alias:aliasø1,ns:idø1,refer:referencesø1,form:form}}.call(this)};var analyzeNs=exports.analyzeNs=function analyzeNs(env,form){return function(){var formsø1=rest(form);var nameø1=first(formsø1);var bodyø1=rest(formsø1);var docø1=isString(first(bodyø1))?first(bodyø1):void 0;var referencesø1=parseReferences(docø1?rest(bodyø1):bodyø1);var requirementsø1=(referencesø1||0)["require"]?map(parseRequire,(referencesø1||0)["require"]):void 0;return{op:"ns",name:nameø1,doc:docø1,require:requirementsø1?vec(requirementsø1):void 0,form:form}}.call(this)};installSpecial("ns",analyzeNs);var analyzeList=exports.analyzeList=function analyzeList(env,form){return function(){var expansionø1=macroexpand(form);var operatorø1=first(form);var analyzerø1=isSymbol(operatorø1)&&(__specials__||0)[name(operatorø1)];return!(expansionø1===form)?analyze(env,expansionø1):analyzerø1?analyzeSpecial(analyzerø1,env,expansionø1):"else"?analyzeInvoke(env,expansionø1):void 0}.call(this)};var analyzeVector=exports.analyzeVector=function analyzeVector(env,form){return function(){var itemsø1=vec(map(function($1){return analyze(env,$1)},form));return{op:"vector",form:form,items:itemsø1}}.call(this)};var analyzeDictionary=exports.analyzeDictionary=function analyzeDictionary(env,form){return function(){var namesø1=vec(map(function($1){return analyze(env,$1)},keys(form)));var valuesø1=vec(map(function($1){return analyze(env,$1)},vals(form)));return{op:"dictionary",keys:namesø1,values:valuesø1,form:form}}.call(this)};var analyzeInvoke=exports.analyzeInvoke=function analyzeInvoke(env,form){return function(){var calleeø1=analyze(env,first(form));var paramsø1=vec(map(function($1){return analyze(env,$1)},rest(form)));return{op:"invoke",callee:calleeø1,params:paramsø1,form:form}}.call(this)};var analyzeConstant=exports.analyzeConstant=function analyzeConstant(env,form){return{op:"constant",form:form}};var analyze=exports.analyze=function analyze(){switch(arguments.length){case 1:var form=arguments[0];return analyze({locals:{},bindings:[],top:true},form);case 2:var env=arguments[0];var form=arguments[1];return isNil(form)?analyzeConstant(env,form):isSymbol(form)?analyzeSymbol(env,form):isList(form)?isEmpty(form)?analyzeQuoted(form):analyzeList(env,form):isDictionary(form)?analyzeDictionary(env,form):isVector(form)?analyzeVector(env,form):isKeyword(form)?analyzeKeyword(env,form):"else"?analyzeConstant(env,form):void 0;default:throw RangeError("Wrong number of arguments passed")}}},{"./ast":"/Ek5E3","./sequence":"Dhp18X","./runtime":"57peRD","./expander":"HujXR7","./string":"WvRJGK"}],1:[function(require,module,exports){(function(global){{var _ns_={id:"interactivate-wisp.main",doc:void 0};var interactivate=require("interactivate");var interactivate=interactivate;var codemirrorHashare=require("codemirror-hashare");var hashare=codemirrorHashare;var codemirrorPersist=require("codemirror-persist");var persist=codemirrorPersist;var interactivateWisp_host=require("./host");var startHost=interactivateWisp_host.startHost}interactivate(CodeMirror);persist(CodeMirror);startHost();var editor=exports.editor=CodeMirror(document.body,{persist:true,matchBrackets:true,electricChars:true,styleActiveLine:true,autofocus:true,theme:"solarized dark",mode:"clojure",keyMap:"vim",value:document.getElementById("intro").textContent,interactivate:true,interactiveSeparator:/^;; =>[^\n]*$/m,interactiveSection:";; =>\n",extraKeys:{Tab:"indentSelection"}});global.editor=editor})(window)},{"./host":2,interactivate:3,"codemirror-hashare":4,"codemirror-persist":5}],"wisp/compiler":[function(require,module,exports){module.exports=require("tGEt8x")},{}],tGEt8x:[function(require,module,exports){{var _ns_={id:"wisp.compiler",doc:void 0};var wisp_analyzer=require("./analyzer");var analyze=wisp_analyzer.analyze;var wisp_reader=require("./reader");var read_=wisp_reader.read_;var read=wisp_reader.read;var pushBackReader=wisp_reader.pushBackReader;var wisp_string=require("./string");var replace=wisp_string.replace;var wisp_sequence=require("./sequence");var map=wisp_sequence.map;var conj=wisp_sequence.conj;var cons=wisp_sequence.cons;var vec=wisp_sequence.vec;var first=wisp_sequence.first;var rest=wisp_sequence.rest;var isEmpty=wisp_sequence.isEmpty;var count=wisp_sequence.count;var wisp_runtime=require("./runtime");var isError=wisp_runtime.isError;var wisp_backend_escodegen_generator=require("./backend/escodegen/generator");var generateJs=wisp_backend_escodegen_generator.generate;var base64Encode=require("base64-encode");var btoa=base64Encode}var generate=exports.generate=generateJs;var readForm=exports.readForm=function readForm(reader,eof){return function(){try{return read(reader,false,eof,false)}catch(error){return error}}()};var readForms=exports.readForms=function readForms(source,uri){return function(){var readerø1=pushBackReader(source,uri);var eofø1={};return function loop(){var recur=loop;var formsø1=[];var formø1=readForm(readerø1,eofø1);do{recur=isError(formø1)?{forms:formsø1,error:formø1}:formø1===eofø1?{forms:formsø1}:"else"?(loop[0]=conj(formsø1,formø1),loop[1]=readForm(readerø1,eofø1),loop):void 0}while(formsø1=loop[0],formø1=loop[1],recur===loop);return recur}.call(this)}.call(this)};var analyzeForm=exports.analyzeForm=function analyzeForm(form){return function(){try{return analyze(form)}catch(error){return error}}()};var analyzeForms=exports.analyzeForms=function analyzeForms(forms){return function loop(){var recur=loop;var nodesø1=[];var formsø2=forms;do{recur=function(){var nodeø1=analyzeForm(first(formsø2));return isError(nodeø1)?{ast:nodesø1,error:nodeø1}:count(formsø2)<=1?{ast:conj(nodesø1,nodeø1)}:"else"?(loop[0]=conj(nodesø1,nodeø1),loop[1]=rest(formsø2),loop):void 0}.call(this)}while(nodesø1=loop[0],formsø2=loop[1],recur===loop);return recur}.call(this)};var compile=exports.compile=function compile(){switch(arguments.length){case 1:var source=arguments[0];return compile(source,{});case 2:var source=arguments[0];var options=arguments[1];return function(){var uriø1=(options||0)["source-uri"];var sourceUriø1=uriø1||""+"data:application/wisp;charset=utf-8;base64,"+btoa(source);var outputUriø1=(options||0)["output-uri"]||(uriø1?replace(uriø1,/.wisp$/,".js"):void 0);var formsø1=readForms(source,sourceUriø1);var astø1=(formsø1||0)["error"]?formsø1:analyzeForms((formsø1||0)["forms"]);var outputø1=(astø1||0)["error"]?astø1:function(){try{return generate.apply(void 0,vec(cons(conj(options,{"source-uri":sourceUriø1,"output-uri":outputUriø1}),(astø1||0)["ast"])))}catch(error){return{error:error}}}();var resultø1={"source-uri":sourceUriø1,"output-uri":outputUriø1,"source-map-uri":(options||0)["source-map-uri"],ast:(options||0)["include-ast"]?(astø1||0)["ast"]:void 0,forms:(options||0)["include-forms"]?(formsø1||0)["forms"]:void 0};return conj(outputø1,resultø1)}.call(this);default:throw RangeError("Wrong number of arguments passed")}};var evaluate=exports.evaluate=function evaluate(source){return function(){var outputø1=compile(source);return(outputø1||0)["error"]?function(){throw(outputø1||0)["error"]}():eval((outputø1||0)["code"])}.call(this)}},{"./analyzer":"UZeJrq","./reader":"RKZSDK","./string":"WvRJGK","./sequence":"Dhp18X","./runtime":"57peRD","./backend/escodegen/generator":6,"base64-encode":7}],8:[function(require,module,exports){var events=require("events");exports.isArray=isArray;exports.isDate=function(obj){return Object.prototype.toString.call(obj)==="[object Date]"};exports.isRegExp=function(obj){return Object.prototype.toString.call(obj)==="[object RegExp]"};exports.print=function(){};exports.puts=function(){};exports.debug=function(){};exports.inspect=function(obj,showHidden,depth,colors){var seen=[];var stylize=function(str,styleType){var styles={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};var style={special:"cyan",number:"blue","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"}[styleType];if(style){return"["+styles[style][0]+"m"+str+"["+styles[style][1]+"m"}else{return str}};if(!colors){stylize=function(str,styleType){return str}}function format(value,recurseTimes){if(value&&typeof value.inspect==="function"&&value!==exports&&!(value.constructor&&value.constructor.prototype===value)){return value.inspect(recurseTimes)}switch(typeof value){case"undefined":return stylize("undefined","undefined");case"string":var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return stylize(simple,"string");case"number":return stylize(""+value,"number");case"boolean":return stylize(""+value,"boolean")}if(value===null){return stylize("null","null")}var visible_keys=Object_keys(value);var keys=showHidden?Object_getOwnPropertyNames(value):visible_keys;if(typeof value==="function"&&keys.length===0){if(isRegExp(value)){return stylize(""+value,"regexp")}else{var name=value.name?": "+value.name:"";return stylize("[Function"+name+"]","special")}}if(isDate(value)&&keys.length===0){return stylize(value.toUTCString(),"date")}var base,type,braces;if(isArray(value)){type="Array";braces=["[","]"]}else{type="Object";braces=["{","}"]}if(typeof value==="function"){var n=value.name?": "+value.name:"";base=isRegExp(value)?" "+value:" [Function"+n+"]"}else{base=""}if(isDate(value)){base=" "+value.toUTCString()}if(keys.length===0){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return stylize(""+value,"regexp")}else{return stylize("[Object]","special")}}seen.push(value);var output=keys.map(function(key){var name,str;if(value.__lookupGetter__){if(value.__lookupGetter__(key)){if(value.__lookupSetter__(key)){str=stylize("[Getter/Setter]","special")}else{str=stylize("[Getter]","special")}}else{if(value.__lookupSetter__(key)){str=stylize("[Setter]","special")}}}if(visible_keys.indexOf(key)<0){name="["+key+"]"}if(!str){if(seen.indexOf(value[key])<0){if(recurseTimes===null){str=format(value[key])}else{str=format(value[key],recurseTimes-1)}if(str.indexOf("\n")>-1){if(isArray(value)){str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2)}else{str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}}}else{str=stylize("[Circular]","special")}}if(typeof name==="undefined"){if(type==="Array"&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=stylize(name,"string")}}return name+": "+str});seen.pop();var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.length+1},0);if(length>50){output=braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}else{output=braces[0]+base+" "+output.join(", ")+" "+braces[1]}return output}return format(obj,typeof depth==="undefined"?2:depth)};function isArray(ar){return ar instanceof Array||Array.isArray(ar)||ar&&ar!==Object.prototype&&isArray(ar.__proto__)}function isRegExp(re){return re instanceof RegExp||typeof re==="object"&&Object.prototype.toString.call(re)==="[object RegExp]"}function isDate(d){if(d instanceof Date)return true;if(typeof d!=="object")return false;var properties=Date.prototype&&Object_getOwnPropertyNames(Date.prototype);var proto=d.__proto__&&Object_getOwnPropertyNames(d.__proto__);return JSON.stringify(proto)===JSON.stringify(properties)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}exports.log=function(msg){};exports.pump=null;var Object_keys=Object.keys||function(obj){var res=[];for(var key in obj)res.push(key);return res};var Object_getOwnPropertyNames=Object.getOwnPropertyNames||function(obj){var res=[];for(var key in obj){if(Object.hasOwnProperty.call(obj,key))res.push(key)}return res};var Object_create=Object.create||function(prototype,properties){var object;if(prototype===null){object={__proto__:null}}else{if(typeof prototype!=="object"){throw new TypeError("typeof prototype["+typeof prototype+"] != 'object'")
}var Type=function(){};Type.prototype=prototype;object=new Type;object.__proto__=prototype}if(typeof properties!=="undefined"&&Object.defineProperties){Object.defineProperties(object,properties)}return object};exports.inherits=function(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object_create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})};var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(typeof f!=="string"){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(exports.inspect(arguments[i]))}return objects.join(" ")}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":return JSON.stringify(args[i++]);default:return x}});for(var x=args[i];i<len;x=args[++i]){if(x===null||typeof x!=="object"){str+=" "+x}else{str+=" "+exports.inspect(x)}}return str}},{events:9}],10:[function(require,module,exports){},{}],11:[function(require,module,exports){var process=module.exports={};process.nextTick=function(){var canSetImmediate=typeof window!=="undefined"&&window.setImmediate;var canPost=typeof window!=="undefined"&&window.postMessage&&window.addEventListener;if(canSetImmediate){return function(f){return window.setImmediate(f)}}if(canPost){var queue=[];window.addEventListener("message",function(ev){if(ev.source===window&&ev.data==="process-tick"){ev.stopPropagation();if(queue.length>0){var fn=queue.shift();fn()}}},true);return function nextTick(fn){queue.push(fn);window.postMessage("process-tick","*")}}return function nextTick(fn){setTimeout(fn,0)}}();process.title="browser";process.browser=true;process.env={};process.argv=[];process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")}},{}],12:[function(require,module,exports){(function(process){function filter(xs,fn){var res=[];for(var i=0;i<xs.length;i++){if(fn(xs[i],i,xs))res.push(xs[i])}return res}function normalizeArray(parts,allowAboveRoot){var up=0;for(var i=parts.length;i>=0;i--){var last=parts[i];if(last=="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up--;up){parts.unshift("..")}}return parts}var splitPathRe=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;exports.resolve=function(){var resolvedPath="",resolvedAbsolute=false;for(var i=arguments.length;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();if(typeof path!=="string"||!path){continue}resolvedPath=path+"/"+resolvedPath;resolvedAbsolute=path.charAt(0)==="/"}resolvedPath=normalizeArray(filter(resolvedPath.split("/"),function(p){return!!p}),!resolvedAbsolute).join("/");return(resolvedAbsolute?"/":"")+resolvedPath||"."};exports.normalize=function(path){var isAbsolute=path.charAt(0)==="/",trailingSlash=path.slice(-1)==="/";path=normalizeArray(filter(path.split("/"),function(p){return!!p}),!isAbsolute).join("/");if(!path&&!isAbsolute){path="."}if(path&&trailingSlash){path+="/"}return(isAbsolute?"/":"")+path};exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,function(p,index){return p&&typeof p==="string"}).join("/"))};exports.dirname=function(path){var dir=splitPathRe.exec(path)[1]||"";var isWindows=false;if(!dir){return"."}else if(dir.length===1||isWindows&&dir.length<=3&&dir.charAt(1)===":"){return dir}else{return dir.substring(0,dir.length-1)}};exports.basename=function(path,ext){var f=splitPathRe.exec(path)[2]||"";if(ext&&f.substr(-1*ext.length)===ext){f=f.substr(0,f.length-ext.length)}return f};exports.extname=function(path){return splitPathRe.exec(path)[3]||""};exports.relative=function(from,to){from=exports.resolve(from).substr(1);to=exports.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!=="")break}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!=="")break}if(start>end)return[];return arr.slice(start,end-start+1)}var fromParts=trim(from.split("/"));var toParts=trim(to.split("/"));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push("..")}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join("/")}})(require("__browserify_process"))},{__browserify_process:11}],4:[function(require,module,exports){"use strict";var save="save@hashare";var load="load@hashare";function plugin(CodeMirror){CodeMirror.defineOption("hashare",false,function(editor,value){if(value){var saving=false;editor[save]=function(event){location.hash=encodeURIComponent(editor.getValue())};editor[load]=function(){var value=decodeURIComponent(window.location.hash.substr(1));if(value&&value!==editor.getValue())editor.setValue(value)};window.addEventListener("blur",editor[save],false);window.addEventListener("hashchange",editor[load],false);editor[load]()}else{window.removeEventListener("blur",editor[save],false);window.removeEventListener("blur",editor[load],false)}})}module.exports=plugin},{}],5:[function(require,module,exports){"use strict";function onChange(editor){localStorage[window.location.href.split("#")[0]]=editor.getValue()}function setup(editor,value){if(value){var address=window.location.href.split("#")[0];var persisted=localStorage[address]||editor.getValue();editor.setValue(persisted);editor.on("change",onChange)}else{editor.off("change",onChange)}}function plugin(CodeMirror){CodeMirror.defineOption("persist",false,setup)}module.exports=plugin},{}],2:[function(require,module,exports){{var _ns_={id:"interactivate-wisp.host",doc:void 0};var interactivate_render=require("interactivate/render");var render=interactivate_render;var wisp_reader=require("wisp/reader");var read_=wisp_reader.read_;var wisp_compiler=require("wisp/compiler");var compile=wisp_compiler.compile;var wisp_sequence=require("wisp/sequence");var first=wisp_sequence.first;var rest=wisp_sequence.rest;var list=wisp_sequence.list;var conj=wisp_sequence.conj;var wisp_ast=require("wisp/ast");var symbol=wisp_ast.symbol;var prStr=wisp_ast.prStr;var wisp_runtime=require("wisp/runtime");var subs=wisp_runtime.subs;var util=require("util");var inspect=util.inspect}var __out__=exports.__out__=function __out__(){return void 0};window.exports={};window.module={exports:window.exports};window.list=list;window.symbol=symbol;window.Out=__out__;window.__printCompiled__=false;window.__printRead__=false;window.__printAnalyzed__=false;window.__printAsJs__=false;var send=exports.send=function send(packet){return function(){var eventø1=document.createEvent("CustomEvent");eventø1.initCustomEvent("client",false,true,packet);return window.dispatchEvent(eventø1)}.call(this)};var startHost=exports.startHost=function startHost(){return window.addEventListener("server",handle,false)};var handle=exports.handle=function handle(packet){return function(){var addressø1=((packet||0)["detail"]||0)["to"];var inputø1=((packet||0)["detail"]||0)["source"];var outputø1=evaluate(inputø1);var resultø1=outputø1;(__out__||0)[addressø1]=resultø1;return send({from:addressø1,result:resultø1})}.call(this)};var evaluate=exports.evaluate=function evaluate(input){return function(){var resultø1=compile(input,{"include-ast":true,"include-forms":true});var jsCodeø1=(resultø1||0)["code"];var prefixCodeø1="var"===subs(jsCodeø1,0,3)?"":"_ = ";var jsNormalizedø1=""+"try { "+jsCodeø1+" } catch(e) { e }";var outputø1=!(resultø1||0)["error"]?window.eval(jsNormalizedø1):void 0;return{error:(resultø1||0)["error"]&&{value:(resultø1||0)["error"]},read:__printRead__?{title:"Read",value:(resultø1||0)["forms"]}:void 0,ast:__printAnalyzed__?{title:"Analyzed",value:(resultø1||0)["ast"]}:void 0,"js-code":__printCompiled__?{title:"Compiled JS",value:jsCodeø1}:void 0,result:{title:__printRead__||__printAnalyzed__||__printCompiled__?"Result":void 0,value:__printAsJs__?outputø1:prStr(outputø1)}}}.call(this)}},{"wisp/reader":"RKZSDK","wisp/compiler":"tGEt8x","wisp/sequence":"Dhp18X","wisp/ast":"/Ek5E3","wisp/runtime":"57peRD",util:8,"interactivate/render":13}],14:[function(require,module,exports){require=function(e,t,n,r){function i(r){if(!n[r]){if(!t[r]){if(e)return e(r);throw new Error("Cannot find module '"+r+"'")}var s=n[r]={exports:{}};t[r][0](function(e){var n=t[r][1][e];return i(n?n:e)},s,s.exports)}return n[r].exports}for(var s=0;s<r.length;s++)i(r[s]);return i}(typeof require!=="undefined"&&require,{1:[function(require,module,exports){exports.readIEEE754=function(buffer,offset,isBE,mLen,nBytes){var e,m,eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isBE?0:nBytes-1,d=isBE?1:-1,s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8);m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8);if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};exports.writeIEEE754=function(buffer,value,offset,isBE,mLen,nBytes){var e,m,c,eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0,i=isBE?nBytes-1:0,d=isBE?-1:1,s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8);e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=s*128}},{}],2:[function(require,module,exports){(function(){var util=require("util");var Buffer=require("buffer").Buffer;var pSlice=Array.prototype.slice;function objectKeys(object){if(Object.keys)return Object.keys(object);var result=[];for(var name in object){if(Object.prototype.hasOwnProperty.call(object,name)){result.push(name)}}return result}var assert=module.exports=ok;assert.AssertionError=function AssertionError(options){this.name="AssertionError";this.message=options.message;this.actual=options.actual;this.expected=options.expected;this.operator=options.operator;var stackStartFunction=options.stackStartFunction||fail;if(Error.captureStackTrace){Error.captureStackTrace(this,stackStartFunction)}};util.inherits(assert.AssertionError,Error);function replacer(key,value){if(value===undefined){return""+value}if(typeof value==="number"&&(isNaN(value)||!isFinite(value))){return value.toString()}if(typeof value==="function"||value instanceof RegExp){return value.toString()}return value}function truncate(s,n){if(typeof s=="string"){return s.length<n?s:s.slice(0,n)}else{return s}}assert.AssertionError.prototype.toString=function(){if(this.message){return[this.name+":",this.message].join(" ")}else{return[this.name+":",truncate(JSON.stringify(this.actual,replacer),128),this.operator,truncate(JSON.stringify(this.expected,replacer),128)].join(" ")}};assert.AssertionError.__proto__=Error.prototype;function fail(actual,expected,message,operator,stackStartFunction){throw new assert.AssertionError({message:message,actual:actual,expected:expected,operator:operator,stackStartFunction:stackStartFunction})}assert.fail=fail;function ok(value,message){if(!!!value)fail(value,true,message,"==",assert.ok)}assert.ok=ok;assert.equal=function equal(actual,expected,message){if(actual!=expected)fail(actual,expected,message,"==",assert.equal)};assert.notEqual=function notEqual(actual,expected,message){if(actual==expected){fail(actual,expected,message,"!=",assert.notEqual)}};assert.deepEqual=function deepEqual(actual,expected,message){if(!_deepEqual(actual,expected)){fail(actual,expected,message,"deepEqual",assert.deepEqual)}};function _deepEqual(actual,expected){if(actual===expected){return true}else if(Buffer.isBuffer(actual)&&Buffer.isBuffer(expected)){if(actual.length!=expected.length)return false;for(var i=0;i<actual.length;i++){if(actual[i]!==expected[i])return false}return true}else if(actual instanceof Date&&expected instanceof Date){return actual.getTime()===expected.getTime()}else if(typeof actual!="object"&&typeof expected!="object"){return actual==expected}else{return objEquiv(actual,expected)}}function isUndefinedOrNull(value){return value===null||value===undefined}function isArguments(object){return Object.prototype.toString.call(object)=="[object Arguments]"}function objEquiv(a,b){if(isUndefinedOrNull(a)||isUndefinedOrNull(b))return false;if(a.prototype!==b.prototype)return false;if(isArguments(a)){if(!isArguments(b)){return false}a=pSlice.call(a);b=pSlice.call(b);return _deepEqual(a,b)}try{var ka=objectKeys(a),kb=objectKeys(b),key,i}catch(e){return false}if(ka.length!=kb.length)return false;ka.sort();kb.sort();for(i=ka.length-1;i>=0;i--){if(ka[i]!=kb[i])return false}for(i=ka.length-1;i>=0;i--){key=ka[i];if(!_deepEqual(a[key],b[key]))return false}return true}assert.notDeepEqual=function notDeepEqual(actual,expected,message){if(_deepEqual(actual,expected)){fail(actual,expected,message,"notDeepEqual",assert.notDeepEqual)}};assert.strictEqual=function strictEqual(actual,expected,message){if(actual!==expected){fail(actual,expected,message,"===",assert.strictEqual)}};assert.notStrictEqual=function notStrictEqual(actual,expected,message){if(actual===expected){fail(actual,expected,message,"!==",assert.notStrictEqual)}};function expectedException(actual,expected){if(!actual||!expected){return false}if(expected instanceof RegExp){return expected.test(actual)}else if(actual instanceof expected){return true}else if(expected.call({},actual)===true){return true}return false}function _throws(shouldThrow,block,expected,message){var actual;if(typeof expected==="string"){message=expected;expected=null}try{block()}catch(e){actual=e}message=(expected&&expected.name?" ("+expected.name+").":".")+(message?" "+message:".");if(shouldThrow&&!actual){fail("Missing expected exception"+message)}if(!shouldThrow&&expectedException(actual,expected)){fail("Got unwanted exception"+message)}if(shouldThrow&&actual&&expected&&!expectedException(actual,expected)||!shouldThrow&&actual){throw actual}}assert.throws=function(block,error,message){_throws.apply(this,[true].concat(pSlice.call(arguments)))};assert.doesNotThrow=function(block,error,message){_throws.apply(this,[false].concat(pSlice.call(arguments)))};assert.ifError=function(err){if(err){throw err}}})()},{util:3,buffer:4}],"buffer-browserify":[function(require,module,exports){module.exports=require("q9TxCC")},{}],q9TxCC:[function(require,module,exports){(function(){function SlowBuffer(size){this.length=size}var assert=require("assert");exports.INSPECT_MAX_BYTES=50;function toHex(n){if(n<16)return"0"+n.toString(16);return n.toString(16)}function utf8ToBytes(str){var byteArray=[];for(var i=0;i<str.length;i++)if(str.charCodeAt(i)<=127)byteArray.push(str.charCodeAt(i));else{var h=encodeURIComponent(str.charAt(i)).substr(1).split("%");for(var j=0;j<h.length;j++)byteArray.push(parseInt(h[j],16))}return byteArray}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;i++)byteArray.push(str.charCodeAt(i)&255);return byteArray}function base64ToBytes(str){return require("base64-js").toByteArray(str)}SlowBuffer.byteLength=function(str,encoding){switch(encoding||"utf8"){case"hex":return str.length/2;case"utf8":case"utf-8":return utf8ToBytes(str).length;case"ascii":case"binary":return str.length;case"base64":return base64ToBytes(str).length;default:throw new Error("Unknown encoding")}};function blitBuffer(src,dst,offset,length){var pos,i=0;while(i<length){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i];i++}return i}SlowBuffer.prototype.utf8Write=function(string,offset,length){var bytes,pos;return SlowBuffer._charsWritten=blitBuffer(utf8ToBytes(string),this,offset,length)};SlowBuffer.prototype.asciiWrite=function(string,offset,length){var bytes,pos;return SlowBuffer._charsWritten=blitBuffer(asciiToBytes(string),this,offset,length)};SlowBuffer.prototype.binaryWrite=SlowBuffer.prototype.asciiWrite;SlowBuffer.prototype.base64Write=function(string,offset,length){var bytes,pos;return SlowBuffer._charsWritten=blitBuffer(base64ToBytes(string),this,offset,length)};SlowBuffer.prototype.base64Slice=function(start,end){var bytes=Array.prototype.slice.apply(this,arguments);return require("base64-js").fromByteArray(bytes)};function decodeUtf8Char(str){try{return decodeURIComponent(str)}catch(err){return String.fromCharCode(65533)}}SlowBuffer.prototype.utf8Slice=function(){var bytes=Array.prototype.slice.apply(this,arguments);var res="";var tmp="";var i=0;while(i<bytes.length){if(bytes[i]<=127){res+=decodeUtf8Char(tmp)+String.fromCharCode(bytes[i]);tmp=""}else tmp+="%"+bytes[i].toString(16);i++}return res+decodeUtf8Char(tmp)};SlowBuffer.prototype.asciiSlice=function(){var bytes=Array.prototype.slice.apply(this,arguments);var ret="";for(var i=0;i<bytes.length;i++)ret+=String.fromCharCode(bytes[i]);return ret};SlowBuffer.prototype.binarySlice=SlowBuffer.prototype.asciiSlice;SlowBuffer.prototype.inspect=function(){var out=[],len=this.length;for(var i=0;i<len;i++){out[i]=toHex(this[i]);if(i==exports.INSPECT_MAX_BYTES){out[i+1]="...";break}}return"<SlowBuffer "+out.join(" ")+">"};SlowBuffer.prototype.hexSlice=function(start,end){var len=this.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out="";for(var i=start;i<end;i++){out+=toHex(this[i])}return out};SlowBuffer.prototype.toString=function(encoding,start,end){encoding=String(encoding||"utf8").toLowerCase();start=+start||0;if(typeof end=="undefined")end=this.length;if(+end==start){return""}switch(encoding){case"hex":return this.hexSlice(start,end);case"utf8":case"utf-8":return this.utf8Slice(start,end);case"ascii":return this.asciiSlice(start,end);case"binary":return this.binarySlice(start,end);case"base64":return this.base64Slice(start,end);case"ucs2":case"ucs-2":return this.ucs2Slice(start,end);default:throw new Error("Unknown encoding")}};SlowBuffer.prototype.hexWrite=function(string,offset,length){offset=+offset||0;var remaining=this.length-offset;if(!length){length=remaining}else{length=+length;if(length>remaining){length=remaining}}var strLen=string.length;if(strLen%2){throw new Error("Invalid hex string")}if(length>strLen/2){length=strLen/2}for(var i=0;i<length;i++){var byte=parseInt(string.substr(i*2,2),16);if(isNaN(byte))throw new Error("Invalid hex string");this[offset+i]=byte}SlowBuffer._charsWritten=i*2;return i};SlowBuffer.prototype.write=function(string,offset,length,encoding){if(isFinite(offset)){if(!isFinite(length)){encoding=length;length=undefined}}else{var swap=encoding;encoding=offset;offset=length;length=swap}offset=+offset||0;var remaining=this.length-offset;if(!length){length=remaining}else{length=+length;if(length>remaining){length=remaining}}encoding=String(encoding||"utf8").toLowerCase();switch(encoding){case"hex":return this.hexWrite(string,offset,length);case"utf8":case"utf-8":return this.utf8Write(string,offset,length);case"ascii":return this.asciiWrite(string,offset,length);case"binary":return this.binaryWrite(string,offset,length);case"base64":return this.base64Write(string,offset,length);case"ucs2":case"ucs-2":return this.ucs2Write(string,offset,length);default:throw new Error("Unknown encoding")}};SlowBuffer.prototype.slice=function(start,end){if(end===undefined)end=this.length;if(end>this.length){throw new Error("oob")}if(start>end){throw new Error("oob")}return new Buffer(this,end-start,+start)};SlowBuffer.prototype.copy=function(target,targetstart,sourcestart,sourceend){var temp=[];for(var i=sourcestart;i<sourceend;i++){assert.ok(typeof this[i]!=="undefined","copying undefined buffer bytes!");temp.push(this[i])}for(var i=targetstart;i<targetstart+temp.length;i++){target[i]=temp[i-targetstart]}};SlowBuffer.prototype.fill=function(value,start,end){if(end>this.length){throw new Error("oob")}if(start>end){throw new Error("oob")}for(var i=start;i<end;i++){this[i]=value}};function coerce(length){length=~~Math.ceil(+length);return length<0?0:length}function Buffer(subject,encoding,offset){if(!(this instanceof Buffer)){return new Buffer(subject,encoding,offset)}var type;if(typeof offset==="number"){this.length=coerce(encoding);this.parent=subject;this.offset=offset}else{switch(type=typeof subject){case"number":this.length=coerce(subject);break;case"string":this.length=Buffer.byteLength(subject,encoding);break;case"object":this.length=coerce(subject.length);break;default:throw new Error("First argument needs to be a number, "+"array or string.")}if(this.length>Buffer.poolSize){this.parent=new SlowBuffer(this.length);this.offset=0}else{if(!pool||pool.length-pool.used<this.length)allocPool();this.parent=pool;this.offset=pool.used;pool.used+=this.length}if(isArrayIsh(subject)){for(var i=0;i<this.length;i++){if(subject instanceof Buffer){this.parent[i+this.offset]=subject.readUInt8(i)}else{this.parent[i+this.offset]=subject[i]}}}else if(type=="string"){this.length=this.write(subject,0,encoding)}}}function isArrayIsh(subject){return Array.isArray(subject)||Buffer.isBuffer(subject)||subject&&typeof subject==="object"&&typeof subject.length==="number"}exports.SlowBuffer=SlowBuffer;exports.Buffer=Buffer;Buffer.poolSize=8*1024;var pool;function allocPool(){pool=new SlowBuffer(Buffer.poolSize);pool.used=0}Buffer.isBuffer=function isBuffer(b){return b instanceof Buffer||b instanceof SlowBuffer};Buffer.concat=function(list,totalLength){if(!Array.isArray(list)){throw new Error("Usage: Buffer.concat(list, [totalLength])\n       list should be an Array.")}if(list.length===0){return new Buffer(0)}else if(list.length===1){return list[0]}if(typeof totalLength!=="number"){totalLength=0;for(var i=0;i<list.length;i++){var buf=list[i];totalLength+=buf.length}}var buffer=new Buffer(totalLength);var pos=0;for(var i=0;i<list.length;i++){var buf=list[i];buf.copy(buffer,pos);pos+=buf.length}return buffer};Buffer.prototype.inspect=function inspect(){var out=[],len=this.length;for(var i=0;i<len;i++){out[i]=toHex(this.parent[i+this.offset]);if(i==exports.INSPECT_MAX_BYTES){out[i+1]="...";break}}return"<Buffer "+out.join(" ")+">"};Buffer.prototype.get=function get(i){if(i<0||i>=this.length)throw new Error("oob");return this.parent[this.offset+i]};Buffer.prototype.set=function set(i,v){if(i<0||i>=this.length)throw new Error("oob");return this.parent[this.offset+i]=v};Buffer.prototype.write=function(string,offset,length,encoding){if(isFinite(offset)){if(!isFinite(length)){encoding=length;length=undefined}}else{var swap=encoding;encoding=offset;offset=length;length=swap}offset=+offset||0;var remaining=this.length-offset;if(!length){length=remaining}else{length=+length;if(length>remaining){length=remaining}}encoding=String(encoding||"utf8").toLowerCase();var ret;switch(encoding){case"hex":ret=this.parent.hexWrite(string,this.offset+offset,length);break;case"utf8":case"utf-8":ret=this.parent.utf8Write(string,this.offset+offset,length);break;case"ascii":ret=this.parent.asciiWrite(string,this.offset+offset,length);break;case"binary":ret=this.parent.binaryWrite(string,this.offset+offset,length);break;case"base64":ret=this.parent.base64Write(string,this.offset+offset,length);break;case"ucs2":case"ucs-2":ret=this.parent.ucs2Write(string,this.offset+offset,length);break;default:throw new Error("Unknown encoding")}Buffer._charsWritten=SlowBuffer._charsWritten;return ret};Buffer.prototype.toString=function(encoding,start,end){encoding=String(encoding||"utf8").toLowerCase();if(typeof start=="undefined"||start<0){start=0}else if(start>this.length){start=this.length}if(typeof end=="undefined"||end>this.length){end=this.length}else if(end<0){end=0}start=start+this.offset;end=end+this.offset;switch(encoding){case"hex":return this.parent.hexSlice(start,end);case"utf8":case"utf-8":return this.parent.utf8Slice(start,end);case"ascii":return this.parent.asciiSlice(start,end);case"binary":return this.parent.binarySlice(start,end);case"base64":return this.parent.base64Slice(start,end);case"ucs2":case"ucs-2":return this.parent.ucs2Slice(start,end);default:throw new Error("Unknown encoding")}};Buffer.byteLength=SlowBuffer.byteLength;Buffer.prototype.fill=function fill(value,start,end){value||(value=0);start||(start=0);end||(end=this.length);if(typeof value==="string"){value=value.charCodeAt(0)}if(!(typeof value==="number")||isNaN(value)){throw new Error("value is not a number")}if(end<start)throw new Error("end < start");if(end===start)return 0;if(this.length==0)return 0;if(start<0||start>=this.length){throw new Error("start out of bounds")}if(end<0||end>this.length){throw new Error("end out of bounds")}return this.parent.fill(value,start+this.offset,end+this.offset)};Buffer.prototype.copy=function(target,target_start,start,end){var source=this;start||(start=0);end||(end=this.length);target_start||(target_start=0);if(end<start)throw new Error("sourceEnd < sourceStart");if(end===start)return 0;if(target.length==0||source.length==0)return 0;if(target_start<0||target_start>=target.length){throw new Error("targetStart out of bounds")}if(start<0||start>=source.length){throw new Error("sourceStart out of bounds")}if(end<0||end>source.length){throw new Error("sourceEnd out of bounds")}if(end>this.length){end=this.length}if(target.length-target_start<end-start){end=target.length-target_start+start}return this.parent.copy(target.parent,target_start+target.offset,start+this.offset,end+this.offset)};Buffer.prototype.slice=function(start,end){if(end===undefined)end=this.length;if(end>this.length)throw new Error("oob");if(start>end)throw new Error("oob");return new Buffer(this.parent,end-start,+start+this.offset)};Buffer.prototype.utf8Slice=function(start,end){return this.toString("utf8",start,end)};Buffer.prototype.binarySlice=function(start,end){return this.toString("binary",start,end)};Buffer.prototype.asciiSlice=function(start,end){return this.toString("ascii",start,end)};Buffer.prototype.utf8Write=function(string,offset){return this.write(string,offset,"utf8")};Buffer.prototype.binaryWrite=function(string,offset){return this.write(string,offset,"binary")};Buffer.prototype.asciiWrite=function(string,offset){return this.write(string,offset,"ascii")};Buffer.prototype.readUInt8=function(offset,noAssert){var buffer=this;if(!noAssert){assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset<buffer.length,"Trying to read beyond buffer length")}if(offset>=buffer.length)return;return buffer.parent[buffer.offset+offset]};function readUInt16(buffer,offset,isBigEndian,noAssert){var val=0;if(!noAssert){assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset+1<buffer.length,"Trying to read beyond buffer length")}if(offset>=buffer.length)return 0;if(isBigEndian){val=buffer.parent[buffer.offset+offset]<<8;if(offset+1<buffer.length){val|=buffer.parent[buffer.offset+offset+1]}}else{val=buffer.parent[buffer.offset+offset];if(offset+1<buffer.length){val|=buffer.parent[buffer.offset+offset+1]<<8}}return val}Buffer.prototype.readUInt16LE=function(offset,noAssert){return readUInt16(this,offset,false,noAssert)};Buffer.prototype.readUInt16BE=function(offset,noAssert){return readUInt16(this,offset,true,noAssert)};function readUInt32(buffer,offset,isBigEndian,noAssert){var val=0;if(!noAssert){assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset+3<buffer.length,"Trying to read beyond buffer length")}if(offset>=buffer.length)return 0;if(isBigEndian){if(offset+1<buffer.length)val=buffer.parent[buffer.offset+offset+1]<<16;if(offset+2<buffer.length)val|=buffer.parent[buffer.offset+offset+2]<<8;if(offset+3<buffer.length)val|=buffer.parent[buffer.offset+offset+3];val=val+(buffer.parent[buffer.offset+offset]<<24>>>0)}else{if(offset+2<buffer.length)val=buffer.parent[buffer.offset+offset+2]<<16;if(offset+1<buffer.length)val|=buffer.parent[buffer.offset+offset+1]<<8;val|=buffer.parent[buffer.offset+offset];if(offset+3<buffer.length)val=val+(buffer.parent[buffer.offset+offset+3]<<24>>>0)}return val}Buffer.prototype.readUInt32LE=function(offset,noAssert){return readUInt32(this,offset,false,noAssert)};Buffer.prototype.readUInt32BE=function(offset,noAssert){return readUInt32(this,offset,true,noAssert)};Buffer.prototype.readInt8=function(offset,noAssert){var buffer=this;var neg;if(!noAssert){assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset<buffer.length,"Trying to read beyond buffer length")}if(offset>=buffer.length)return;neg=buffer.parent[buffer.offset+offset]&128;if(!neg){return buffer.parent[buffer.offset+offset]}return(255-buffer.parent[buffer.offset+offset]+1)*-1};function readInt16(buffer,offset,isBigEndian,noAssert){var neg,val;if(!noAssert){assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset+1<buffer.length,"Trying to read beyond buffer length")}val=readUInt16(buffer,offset,isBigEndian,noAssert);neg=val&32768;if(!neg){return val}return(65535-val+1)*-1}Buffer.prototype.readInt16LE=function(offset,noAssert){return readInt16(this,offset,false,noAssert)};Buffer.prototype.readInt16BE=function(offset,noAssert){return readInt16(this,offset,true,noAssert)};function readInt32(buffer,offset,isBigEndian,noAssert){var neg,val;if(!noAssert){assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset+3<buffer.length,"Trying to read beyond buffer length")}val=readUInt32(buffer,offset,isBigEndian,noAssert);neg=val&2147483648;if(!neg){return val}return(4294967295-val+1)*-1}Buffer.prototype.readInt32LE=function(offset,noAssert){return readInt32(this,offset,false,noAssert)};Buffer.prototype.readInt32BE=function(offset,noAssert){return readInt32(this,offset,true,noAssert)};function readFloat(buffer,offset,isBigEndian,noAssert){if(!noAssert){assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset+3<buffer.length,"Trying to read beyond buffer length")}return require("./buffer_ieee754").readIEEE754(buffer,offset,isBigEndian,23,4)}Buffer.prototype.readFloatLE=function(offset,noAssert){return readFloat(this,offset,false,noAssert)};Buffer.prototype.readFloatBE=function(offset,noAssert){return readFloat(this,offset,true,noAssert)};function readDouble(buffer,offset,isBigEndian,noAssert){if(!noAssert){assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset+7<buffer.length,"Trying to read beyond buffer length")}return require("./buffer_ieee754").readIEEE754(buffer,offset,isBigEndian,52,8)}Buffer.prototype.readDoubleLE=function(offset,noAssert){return readDouble(this,offset,false,noAssert)};Buffer.prototype.readDoubleBE=function(offset,noAssert){return readDouble(this,offset,true,noAssert)};function verifuint(value,max){assert.ok(typeof value=="number","cannot write a non-number as a number");assert.ok(value>=0,"specified a negative value for writing an unsigned value");assert.ok(value<=max,"value is larger than maximum value for type");assert.ok(Math.floor(value)===value,"value has a fractional component")}Buffer.prototype.writeUInt8=function(value,offset,noAssert){var buffer=this;if(!noAssert){assert.ok(value!==undefined&&value!==null,"missing value");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset<buffer.length,"trying to write beyond buffer length");
verifuint(value,255)}if(offset<buffer.length){buffer.parent[buffer.offset+offset]=value}};function writeUInt16(buffer,value,offset,isBigEndian,noAssert){if(!noAssert){assert.ok(value!==undefined&&value!==null,"missing value");assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset+1<buffer.length,"trying to write beyond buffer length");verifuint(value,65535)}for(var i=0;i<Math.min(buffer.length-offset,2);i++){buffer.parent[buffer.offset+offset+i]=(value&255<<8*(isBigEndian?1-i:i))>>>(isBigEndian?1-i:i)*8}}Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){writeUInt16(this,value,offset,false,noAssert)};Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){writeUInt16(this,value,offset,true,noAssert)};function writeUInt32(buffer,value,offset,isBigEndian,noAssert){if(!noAssert){assert.ok(value!==undefined&&value!==null,"missing value");assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset+3<buffer.length,"trying to write beyond buffer length");verifuint(value,4294967295)}for(var i=0;i<Math.min(buffer.length-offset,4);i++){buffer.parent[buffer.offset+offset+i]=value>>>(isBigEndian?3-i:i)*8&255}}Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){writeUInt32(this,value,offset,false,noAssert)};Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){writeUInt32(this,value,offset,true,noAssert)};function verifsint(value,max,min){assert.ok(typeof value=="number","cannot write a non-number as a number");assert.ok(value<=max,"value larger than maximum allowed value");assert.ok(value>=min,"value smaller than minimum allowed value");assert.ok(Math.floor(value)===value,"value has a fractional component")}function verifIEEE754(value,max,min){assert.ok(typeof value=="number","cannot write a non-number as a number");assert.ok(value<=max,"value larger than maximum allowed value");assert.ok(value>=min,"value smaller than minimum allowed value")}Buffer.prototype.writeInt8=function(value,offset,noAssert){var buffer=this;if(!noAssert){assert.ok(value!==undefined&&value!==null,"missing value");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset<buffer.length,"Trying to write beyond buffer length");verifsint(value,127,-128)}if(value>=0){buffer.writeUInt8(value,offset,noAssert)}else{buffer.writeUInt8(255+value+1,offset,noAssert)}};function writeInt16(buffer,value,offset,isBigEndian,noAssert){if(!noAssert){assert.ok(value!==undefined&&value!==null,"missing value");assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset+1<buffer.length,"Trying to write beyond buffer length");verifsint(value,32767,-32768)}if(value>=0){writeUInt16(buffer,value,offset,isBigEndian,noAssert)}else{writeUInt16(buffer,65535+value+1,offset,isBigEndian,noAssert)}}Buffer.prototype.writeInt16LE=function(value,offset,noAssert){writeInt16(this,value,offset,false,noAssert)};Buffer.prototype.writeInt16BE=function(value,offset,noAssert){writeInt16(this,value,offset,true,noAssert)};function writeInt32(buffer,value,offset,isBigEndian,noAssert){if(!noAssert){assert.ok(value!==undefined&&value!==null,"missing value");assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset+3<buffer.length,"Trying to write beyond buffer length");verifsint(value,2147483647,-2147483648)}if(value>=0){writeUInt32(buffer,value,offset,isBigEndian,noAssert)}else{writeUInt32(buffer,4294967295+value+1,offset,isBigEndian,noAssert)}}Buffer.prototype.writeInt32LE=function(value,offset,noAssert){writeInt32(this,value,offset,false,noAssert)};Buffer.prototype.writeInt32BE=function(value,offset,noAssert){writeInt32(this,value,offset,true,noAssert)};function writeFloat(buffer,value,offset,isBigEndian,noAssert){if(!noAssert){assert.ok(value!==undefined&&value!==null,"missing value");assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset+3<buffer.length,"Trying to write beyond buffer length");verifIEEE754(value,3.4028234663852886e38,-3.4028234663852886e38)}require("./buffer_ieee754").writeIEEE754(buffer,value,offset,isBigEndian,23,4)}Buffer.prototype.writeFloatLE=function(value,offset,noAssert){writeFloat(this,value,offset,false,noAssert)};Buffer.prototype.writeFloatBE=function(value,offset,noAssert){writeFloat(this,value,offset,true,noAssert)};function writeDouble(buffer,value,offset,isBigEndian,noAssert){if(!noAssert){assert.ok(value!==undefined&&value!==null,"missing value");assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset+7<buffer.length,"Trying to write beyond buffer length");verifIEEE754(value,1.7976931348623157e308,-1.7976931348623157e308)}require("./buffer_ieee754").writeIEEE754(buffer,value,offset,isBigEndian,52,8)}Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){writeDouble(this,value,offset,false,noAssert)};Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){writeDouble(this,value,offset,true,noAssert)};SlowBuffer.prototype.readUInt8=Buffer.prototype.readUInt8;SlowBuffer.prototype.readUInt16LE=Buffer.prototype.readUInt16LE;SlowBuffer.prototype.readUInt16BE=Buffer.prototype.readUInt16BE;SlowBuffer.prototype.readUInt32LE=Buffer.prototype.readUInt32LE;SlowBuffer.prototype.readUInt32BE=Buffer.prototype.readUInt32BE;SlowBuffer.prototype.readInt8=Buffer.prototype.readInt8;SlowBuffer.prototype.readInt16LE=Buffer.prototype.readInt16LE;SlowBuffer.prototype.readInt16BE=Buffer.prototype.readInt16BE;SlowBuffer.prototype.readInt32LE=Buffer.prototype.readInt32LE;SlowBuffer.prototype.readInt32BE=Buffer.prototype.readInt32BE;SlowBuffer.prototype.readFloatLE=Buffer.prototype.readFloatLE;SlowBuffer.prototype.readFloatBE=Buffer.prototype.readFloatBE;SlowBuffer.prototype.readDoubleLE=Buffer.prototype.readDoubleLE;SlowBuffer.prototype.readDoubleBE=Buffer.prototype.readDoubleBE;SlowBuffer.prototype.writeUInt8=Buffer.prototype.writeUInt8;SlowBuffer.prototype.writeUInt16LE=Buffer.prototype.writeUInt16LE;SlowBuffer.prototype.writeUInt16BE=Buffer.prototype.writeUInt16BE;SlowBuffer.prototype.writeUInt32LE=Buffer.prototype.writeUInt32LE;SlowBuffer.prototype.writeUInt32BE=Buffer.prototype.writeUInt32BE;SlowBuffer.prototype.writeInt8=Buffer.prototype.writeInt8;SlowBuffer.prototype.writeInt16LE=Buffer.prototype.writeInt16LE;SlowBuffer.prototype.writeInt16BE=Buffer.prototype.writeInt16BE;SlowBuffer.prototype.writeInt32LE=Buffer.prototype.writeInt32LE;SlowBuffer.prototype.writeInt32BE=Buffer.prototype.writeInt32BE;SlowBuffer.prototype.writeFloatLE=Buffer.prototype.writeFloatLE;SlowBuffer.prototype.writeFloatBE=Buffer.prototype.writeFloatBE;SlowBuffer.prototype.writeDoubleLE=Buffer.prototype.writeDoubleLE;SlowBuffer.prototype.writeDoubleBE=Buffer.prototype.writeDoubleBE})()},{assert:2,"./buffer_ieee754":1,"base64-js":5}],3:[function(require,module,exports){var events=require("events");exports.isArray=isArray;exports.isDate=function(obj){return Object.prototype.toString.call(obj)==="[object Date]"};exports.isRegExp=function(obj){return Object.prototype.toString.call(obj)==="[object RegExp]"};exports.print=function(){};exports.puts=function(){};exports.debug=function(){};exports.inspect=function(obj,showHidden,depth,colors){var seen=[];var stylize=function(str,styleType){var styles={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};var style={special:"cyan",number:"blue","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"}[styleType];if(style){return"["+styles[style][0]+"m"+str+"["+styles[style][1]+"m"}else{return str}};if(!colors){stylize=function(str,styleType){return str}}function format(value,recurseTimes){if(value&&typeof value.inspect==="function"&&value!==exports&&!(value.constructor&&value.constructor.prototype===value)){return value.inspect(recurseTimes)}switch(typeof value){case"undefined":return stylize("undefined","undefined");case"string":var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return stylize(simple,"string");case"number":return stylize(""+value,"number");case"boolean":return stylize(""+value,"boolean")}if(value===null){return stylize("null","null")}var visible_keys=Object_keys(value);var keys=showHidden?Object_getOwnPropertyNames(value):visible_keys;if(typeof value==="function"&&keys.length===0){if(isRegExp(value)){return stylize(""+value,"regexp")}else{var name=value.name?": "+value.name:"";return stylize("[Function"+name+"]","special")}}if(isDate(value)&&keys.length===0){return stylize(value.toUTCString(),"date")}var base,type,braces;if(isArray(value)){type="Array";braces=["[","]"]}else{type="Object";braces=["{","}"]}if(typeof value==="function"){var n=value.name?": "+value.name:"";base=isRegExp(value)?" "+value:" [Function"+n+"]"}else{base=""}if(isDate(value)){base=" "+value.toUTCString()}if(keys.length===0){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return stylize(""+value,"regexp")}else{return stylize("[Object]","special")}}seen.push(value);var output=keys.map(function(key){var name,str;if(value.__lookupGetter__){if(value.__lookupGetter__(key)){if(value.__lookupSetter__(key)){str=stylize("[Getter/Setter]","special")}else{str=stylize("[Getter]","special")}}else{if(value.__lookupSetter__(key)){str=stylize("[Setter]","special")}}}if(visible_keys.indexOf(key)<0){name="["+key+"]"}if(!str){if(seen.indexOf(value[key])<0){if(recurseTimes===null){str=format(value[key])}else{str=format(value[key],recurseTimes-1)}if(str.indexOf("\n")>-1){if(isArray(value)){str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2)}else{str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}}}else{str=stylize("[Circular]","special")}}if(typeof name==="undefined"){if(type==="Array"&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=stylize(name,"string")}}return name+": "+str});seen.pop();var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.length+1},0);if(length>50){output=braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}else{output=braces[0]+base+" "+output.join(", ")+" "+braces[1]}return output}return format(obj,typeof depth==="undefined"?2:depth)};function isArray(ar){return ar instanceof Array||Array.isArray(ar)||ar&&ar!==Object.prototype&&isArray(ar.__proto__)}function isRegExp(re){return re instanceof RegExp||typeof re==="object"&&Object.prototype.toString.call(re)==="[object RegExp]"}function isDate(d){if(d instanceof Date)return true;if(typeof d!=="object")return false;var properties=Date.prototype&&Object_getOwnPropertyNames(Date.prototype);var proto=d.__proto__&&Object_getOwnPropertyNames(d.__proto__);return JSON.stringify(proto)===JSON.stringify(properties)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}exports.log=function(msg){};exports.pump=null;var Object_keys=Object.keys||function(obj){var res=[];for(var key in obj)res.push(key);return res};var Object_getOwnPropertyNames=Object.getOwnPropertyNames||function(obj){var res=[];for(var key in obj){if(Object.hasOwnProperty.call(obj,key))res.push(key)}return res};var Object_create=Object.create||function(prototype,properties){var object;if(prototype===null){object={__proto__:null}}else{if(typeof prototype!=="object"){throw new TypeError("typeof prototype["+typeof prototype+"] != 'object'")}var Type=function(){};Type.prototype=prototype;object=new Type;object.__proto__=prototype}if(typeof properties!=="undefined"&&Object.defineProperties){Object.defineProperties(object,properties)}return object};exports.inherits=function(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object_create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})};var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(typeof f!=="string"){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(exports.inspect(arguments[i]))}return objects.join(" ")}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":return JSON.stringify(args[i++]);default:return x}});for(var x=args[i];i<len;x=args[++i]){if(x===null||typeof x!=="object"){str+=" "+x}else{str+=" "+exports.inspect(x)}}return str}},{events:6}],5:[function(require,module,exports){(function(exports){"use strict";var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function b64ToByteArray(b64){var i,j,l,tmp,placeHolders,arr;if(b64.length%4>0){throw"Invalid string. Length must be a multiple of 4"}placeHolders=b64.indexOf("=");placeHolders=placeHolders>0?b64.length-placeHolders:0;arr=[];l=placeHolders>0?b64.length-4:b64.length;for(i=0,j=0;i<l;i+=4,j+=3){tmp=lookup.indexOf(b64[i])<<18|lookup.indexOf(b64[i+1])<<12|lookup.indexOf(b64[i+2])<<6|lookup.indexOf(b64[i+3]);arr.push((tmp&16711680)>>16);arr.push((tmp&65280)>>8);arr.push(tmp&255)}if(placeHolders===2){tmp=lookup.indexOf(b64[i])<<2|lookup.indexOf(b64[i+1])>>4;arr.push(tmp&255)}else if(placeHolders===1){tmp=lookup.indexOf(b64[i])<<10|lookup.indexOf(b64[i+1])<<4|lookup.indexOf(b64[i+2])>>2;arr.push(tmp>>8&255);arr.push(tmp&255)}return arr}function uint8ToBase64(uint8){var i,extraBytes=uint8.length%3,output="",temp,length;function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[num&63]}for(i=0,length=uint8.length-extraBytes;i<length;i+=3){temp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2];output+=tripletToBase64(temp)}switch(extraBytes){case 1:temp=uint8[uint8.length-1];output+=lookup[temp>>2];output+=lookup[temp<<4&63];output+="==";break;case 2:temp=(uint8[uint8.length-2]<<8)+uint8[uint8.length-1];output+=lookup[temp>>10];output+=lookup[temp>>4&63];output+=lookup[temp<<2&63];output+="=";break}return output}module.exports.toByteArray=b64ToByteArray;module.exports.fromByteArray=uint8ToBase64})()},{}],7:[function(require,module,exports){exports.readIEEE754=function(buffer,offset,isBE,mLen,nBytes){var e,m,eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isBE?0:nBytes-1,d=isBE?1:-1,s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8);m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8);if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};exports.writeIEEE754=function(buffer,value,offset,isBE,mLen,nBytes){var e,m,c,eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0,i=isBE?nBytes-1:0,d=isBE?-1:1,s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8);e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=s*128}},{}],8:[function(require,module,exports){var process=module.exports={};process.nextTick=function(){var canSetImmediate=typeof window!=="undefined"&&window.setImmediate;var canPost=typeof window!=="undefined"&&window.postMessage&&window.addEventListener;if(canSetImmediate){return function(f){return window.setImmediate(f)}}if(canPost){var queue=[];window.addEventListener("message",function(ev){if(ev.source===window&&ev.data==="process-tick"){ev.stopPropagation();if(queue.length>0){var fn=queue.shift();fn()}}},true);return function nextTick(fn){queue.push(fn);window.postMessage("process-tick","*")}}return function nextTick(fn){setTimeout(fn,0)}}();process.title="browser";process.browser=true;process.env={};process.argv=[];process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")}},{}],6:[function(require,module,exports){(function(process){if(!process.EventEmitter)process.EventEmitter=function(){};var EventEmitter=exports.EventEmitter=process.EventEmitter;var isArray=typeof Array.isArray==="function"?Array.isArray:function(xs){return Object.prototype.toString.call(xs)==="[object Array]"};function indexOf(xs,x){if(xs.indexOf)return xs.indexOf(x);for(var i=0;i<xs.length;i++){if(x===xs[i])return i}return-1}var defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!this._events)this._events={};this._events.maxListeners=n};EventEmitter.prototype.emit=function(type){if(type==="error"){if(!this._events||!this._events.error||isArray(this._events.error)&&!this._events.error.length){if(arguments[1]instanceof Error){throw arguments[1]}else{throw new Error("Uncaught, unspecified 'error' event.")}return false}}if(!this._events)return false;var handler=this._events[type];if(!handler)return false;if(typeof handler=="function"){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:var args=Array.prototype.slice.call(arguments,1);handler.apply(this,args)}return true}else if(isArray(handler)){var args=Array.prototype.slice.call(arguments,1);var listeners=handler.slice();for(var i=0,l=listeners.length;i<l;i++){listeners[i].apply(this,args)}return true}else{return false}};EventEmitter.prototype.addListener=function(type,listener){if("function"!==typeof listener){throw new Error("addListener only takes instances of Function")}if(!this._events)this._events={};this.emit("newListener",type,listener);if(!this._events[type]){this._events[type]=listener}else if(isArray(this._events[type])){if(!this._events[type].warned){var m;if(this._events.maxListeners!==undefined){m=this._events.maxListeners}else{m=defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);console.trace()}}this._events[type].push(listener)}else{this._events[type]=[this._events[type],listener]}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){var self=this;self.on(type,function g(){self.removeListener(type,g);listener.apply(this,arguments)});return this};EventEmitter.prototype.removeListener=function(type,listener){if("function"!==typeof listener){throw new Error("removeListener only takes instances of Function")}if(!this._events||!this._events[type])return this;var list=this._events[type];if(isArray(list)){var i=indexOf(list,listener);if(i<0)return this;list.splice(i,1);if(list.length==0)delete this._events[type]}else if(this._events[type]===listener){delete this._events[type]}return this};EventEmitter.prototype.removeAllListeners=function(type){if(arguments.length===0){this._events={};return this}if(type&&this._events&&this._events[type])this._events[type]=null;return this};EventEmitter.prototype.listeners=function(type){if(!this._events)this._events={};if(!this._events[type])this._events[type]=[];if(!isArray(this._events[type])){this._events[type]=[this._events[type]]}return this._events[type]}})(require("__browserify_process"))},{__browserify_process:8}],4:[function(require,module,exports){(function(){function SlowBuffer(size){this.length=size}var assert=require("assert");exports.INSPECT_MAX_BYTES=50;function toHex(n){if(n<16)return"0"+n.toString(16);return n.toString(16)}function utf8ToBytes(str){var byteArray=[];for(var i=0;i<str.length;i++)if(str.charCodeAt(i)<=127)byteArray.push(str.charCodeAt(i));else{var h=encodeURIComponent(str.charAt(i)).substr(1).split("%");for(var j=0;j<h.length;j++)byteArray.push(parseInt(h[j],16))}return byteArray}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;i++)byteArray.push(str.charCodeAt(i)&255);return byteArray}function base64ToBytes(str){return require("base64-js").toByteArray(str)}SlowBuffer.byteLength=function(str,encoding){switch(encoding||"utf8"){case"hex":return str.length/2;case"utf8":case"utf-8":return utf8ToBytes(str).length;case"ascii":return str.length;case"base64":return base64ToBytes(str).length;default:throw new Error("Unknown encoding")}};function blitBuffer(src,dst,offset,length){var pos,i=0;while(i<length){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i];i++}return i}SlowBuffer.prototype.utf8Write=function(string,offset,length){var bytes,pos;return SlowBuffer._charsWritten=blitBuffer(utf8ToBytes(string),this,offset,length)};SlowBuffer.prototype.asciiWrite=function(string,offset,length){var bytes,pos;return SlowBuffer._charsWritten=blitBuffer(asciiToBytes(string),this,offset,length)};SlowBuffer.prototype.base64Write=function(string,offset,length){var bytes,pos;return SlowBuffer._charsWritten=blitBuffer(base64ToBytes(string),this,offset,length)};SlowBuffer.prototype.base64Slice=function(start,end){var bytes=Array.prototype.slice.apply(this,arguments);return require("base64-js").fromByteArray(bytes)};function decodeUtf8Char(str){try{return decodeURIComponent(str)}catch(err){return String.fromCharCode(65533)}}SlowBuffer.prototype.utf8Slice=function(){var bytes=Array.prototype.slice.apply(this,arguments);var res="";var tmp="";var i=0;while(i<bytes.length){if(bytes[i]<=127){res+=decodeUtf8Char(tmp)+String.fromCharCode(bytes[i]);tmp=""}else tmp+="%"+bytes[i].toString(16);i++}return res+decodeUtf8Char(tmp)};SlowBuffer.prototype.asciiSlice=function(){var bytes=Array.prototype.slice.apply(this,arguments);var ret="";for(var i=0;i<bytes.length;i++)ret+=String.fromCharCode(bytes[i]);return ret};SlowBuffer.prototype.inspect=function(){var out=[],len=this.length;for(var i=0;i<len;i++){out[i]=toHex(this[i]);if(i==exports.INSPECT_MAX_BYTES){out[i+1]="...";break}}return"<SlowBuffer "+out.join(" ")+">"};SlowBuffer.prototype.hexSlice=function(start,end){var len=this.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out="";for(var i=start;i<end;i++){out+=toHex(this[i])}return out};SlowBuffer.prototype.toString=function(encoding,start,end){encoding=String(encoding||"utf8").toLowerCase();start=+start||0;if(typeof end=="undefined")end=this.length;if(+end==start){return""}switch(encoding){case"hex":return this.hexSlice(start,end);case"utf8":case"utf-8":return this.utf8Slice(start,end);case"ascii":return this.asciiSlice(start,end);case"binary":return this.binarySlice(start,end);case"base64":return this.base64Slice(start,end);case"ucs2":case"ucs-2":return this.ucs2Slice(start,end);default:throw new Error("Unknown encoding")}};SlowBuffer.prototype.hexWrite=function(string,offset,length){offset=+offset||0;var remaining=this.length-offset;if(!length){length=remaining}else{length=+length;if(length>remaining){length=remaining}}var strLen=string.length;if(strLen%2){throw new Error("Invalid hex string")}if(length>strLen/2){length=strLen/2}for(var i=0;i<length;i++){var byte=parseInt(string.substr(i*2,2),16);if(isNaN(byte))throw new Error("Invalid hex string");this[offset+i]=byte}SlowBuffer._charsWritten=i*2;return i};SlowBuffer.prototype.write=function(string,offset,length,encoding){if(isFinite(offset)){if(!isFinite(length)){encoding=length;length=undefined}}else{var swap=encoding;encoding=offset;offset=length;length=swap}offset=+offset||0;var remaining=this.length-offset;if(!length){length=remaining}else{length=+length;if(length>remaining){length=remaining}}encoding=String(encoding||"utf8").toLowerCase();switch(encoding){case"hex":return this.hexWrite(string,offset,length);case"utf8":case"utf-8":return this.utf8Write(string,offset,length);case"ascii":return this.asciiWrite(string,offset,length);case"binary":return this.binaryWrite(string,offset,length);case"base64":return this.base64Write(string,offset,length);case"ucs2":case"ucs-2":return this.ucs2Write(string,offset,length);default:throw new Error("Unknown encoding")}};SlowBuffer.prototype.slice=function(start,end){if(end===undefined)end=this.length;if(end>this.length){throw new Error("oob")}if(start>end){throw new Error("oob")}return new Buffer(this,end-start,+start)};SlowBuffer.prototype.copy=function(target,targetstart,sourcestart,sourceend){var temp=[];for(var i=sourcestart;i<sourceend;i++){assert.ok(typeof this[i]!=="undefined","copying undefined buffer bytes!");temp.push(this[i])}for(var i=targetstart;i<targetstart+temp.length;i++){target[i]=temp[i-targetstart]}};function coerce(length){length=~~Math.ceil(+length);return length<0?0:length}function Buffer(subject,encoding,offset){if(!(this instanceof Buffer)){return new Buffer(subject,encoding,offset)}var type;if(typeof offset==="number"){this.length=coerce(encoding);this.parent=subject;this.offset=offset}else{switch(type=typeof subject){case"number":this.length=coerce(subject);break;case"string":this.length=Buffer.byteLength(subject,encoding);break;case"object":this.length=coerce(subject.length);break;default:throw new Error("First argument needs to be a number, "+"array or string.")}if(this.length>Buffer.poolSize){this.parent=new SlowBuffer(this.length);this.offset=0}else{if(!pool||pool.length-pool.used<this.length)allocPool();this.parent=pool;this.offset=pool.used;pool.used+=this.length}if(isArrayIsh(subject)){for(var i=0;i<this.length;i++){this.parent[i+this.offset]=subject[i]}}else if(type=="string"){this.length=this.write(subject,0,encoding)}}}function isArrayIsh(subject){return Array.isArray(subject)||Buffer.isBuffer(subject)||subject&&typeof subject==="object"&&typeof subject.length==="number"}exports.SlowBuffer=SlowBuffer;exports.Buffer=Buffer;Buffer.poolSize=8*1024;var pool;function allocPool(){pool=new SlowBuffer(Buffer.poolSize);pool.used=0}Buffer.isBuffer=function isBuffer(b){return b instanceof Buffer||b instanceof SlowBuffer};Buffer.concat=function(list,totalLength){if(!Array.isArray(list)){throw new Error("Usage: Buffer.concat(list, [totalLength])\n       list should be an Array.")}if(list.length===0){return new Buffer(0)}else if(list.length===1){return list[0]}if(typeof totalLength!=="number"){totalLength=0;for(var i=0;i<list.length;i++){var buf=list[i];totalLength+=buf.length}}var buffer=new Buffer(totalLength);var pos=0;for(var i=0;i<list.length;i++){var buf=list[i];buf.copy(buffer,pos);pos+=buf.length}return buffer};Buffer.prototype.inspect=function inspect(){var out=[],len=this.length;for(var i=0;i<len;i++){out[i]=toHex(this.parent[i+this.offset]);if(i==exports.INSPECT_MAX_BYTES){out[i+1]="...";break}}return"<Buffer "+out.join(" ")+">"};Buffer.prototype.get=function get(i){if(i<0||i>=this.length)throw new Error("oob");return this.parent[this.offset+i]};Buffer.prototype.set=function set(i,v){if(i<0||i>=this.length)throw new Error("oob");return this.parent[this.offset+i]=v};Buffer.prototype.write=function(string,offset,length,encoding){if(isFinite(offset)){if(!isFinite(length)){encoding=length;length=undefined}}else{var swap=encoding;encoding=offset;offset=length;length=swap}offset=+offset||0;var remaining=this.length-offset;if(!length){length=remaining}else{length=+length;if(length>remaining){length=remaining}}encoding=String(encoding||"utf8").toLowerCase();var ret;switch(encoding){case"hex":ret=this.parent.hexWrite(string,this.offset+offset,length);break;case"utf8":case"utf-8":ret=this.parent.utf8Write(string,this.offset+offset,length);break;case"ascii":ret=this.parent.asciiWrite(string,this.offset+offset,length);break;case"binary":ret=this.parent.binaryWrite(string,this.offset+offset,length);break;case"base64":ret=this.parent.base64Write(string,this.offset+offset,length);break;case"ucs2":case"ucs-2":ret=this.parent.ucs2Write(string,this.offset+offset,length);break;default:throw new Error("Unknown encoding")}Buffer._charsWritten=SlowBuffer._charsWritten;return ret};Buffer.prototype.toString=function(encoding,start,end){encoding=String(encoding||"utf8").toLowerCase();if(typeof start=="undefined"||start<0){start=0}else if(start>this.length){start=this.length}if(typeof end=="undefined"||end>this.length){end=this.length}else if(end<0){end=0}start=start+this.offset;end=end+this.offset;switch(encoding){case"hex":return this.parent.hexSlice(start,end);case"utf8":case"utf-8":return this.parent.utf8Slice(start,end);case"ascii":return this.parent.asciiSlice(start,end);case"binary":return this.parent.binarySlice(start,end);case"base64":return this.parent.base64Slice(start,end);case"ucs2":case"ucs-2":return this.parent.ucs2Slice(start,end);default:throw new Error("Unknown encoding")}};Buffer.byteLength=SlowBuffer.byteLength;Buffer.prototype.fill=function fill(value,start,end){value||(value=0);start||(start=0);end||(end=this.length);if(typeof value==="string"){value=value.charCodeAt(0)}if(!(typeof value==="number")||isNaN(value)){throw new Error("value is not a number")}if(end<start)throw new Error("end < start");if(end===start)return 0;if(this.length==0)return 0;if(start<0||start>=this.length){throw new Error("start out of bounds")}if(end<0||end>this.length){throw new Error("end out of bounds")}return this.parent.fill(value,start+this.offset,end+this.offset)};Buffer.prototype.copy=function(target,target_start,start,end){var source=this;start||(start=0);end||(end=this.length);target_start||(target_start=0);if(end<start)throw new Error("sourceEnd < sourceStart");if(end===start)return 0;if(target.length==0||source.length==0)return 0;if(target_start<0||target_start>=target.length){throw new Error("targetStart out of bounds")}if(start<0||start>=source.length){throw new Error("sourceStart out of bounds")}if(end<0||end>source.length){throw new Error("sourceEnd out of bounds")}if(end>this.length){end=this.length}if(target.length-target_start<end-start){end=target.length-target_start+start}return this.parent.copy(target.parent,target_start+target.offset,start+this.offset,end+this.offset)};Buffer.prototype.slice=function(start,end){if(end===undefined)end=this.length;if(end>this.length)throw new Error("oob");if(start>end)throw new Error("oob");return new Buffer(this.parent,end-start,+start+this.offset)};Buffer.prototype.utf8Slice=function(start,end){return this.toString("utf8",start,end)};Buffer.prototype.binarySlice=function(start,end){return this.toString("binary",start,end)};Buffer.prototype.asciiSlice=function(start,end){return this.toString("ascii",start,end)};Buffer.prototype.utf8Write=function(string,offset){return this.write(string,offset,"utf8")};Buffer.prototype.binaryWrite=function(string,offset){return this.write(string,offset,"binary")};Buffer.prototype.asciiWrite=function(string,offset){return this.write(string,offset,"ascii")};Buffer.prototype.readUInt8=function(offset,noAssert){var buffer=this;
if(!noAssert){assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset<buffer.length,"Trying to read beyond buffer length")}return buffer.parent[buffer.offset+offset]};function readUInt16(buffer,offset,isBigEndian,noAssert){var val=0;if(!noAssert){assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset+1<buffer.length,"Trying to read beyond buffer length")}if(isBigEndian){val=buffer.parent[buffer.offset+offset]<<8;val|=buffer.parent[buffer.offset+offset+1]}else{val=buffer.parent[buffer.offset+offset];val|=buffer.parent[buffer.offset+offset+1]<<8}return val}Buffer.prototype.readUInt16LE=function(offset,noAssert){return readUInt16(this,offset,false,noAssert)};Buffer.prototype.readUInt16BE=function(offset,noAssert){return readUInt16(this,offset,true,noAssert)};function readUInt32(buffer,offset,isBigEndian,noAssert){var val=0;if(!noAssert){assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset+3<buffer.length,"Trying to read beyond buffer length")}if(isBigEndian){val=buffer.parent[buffer.offset+offset+1]<<16;val|=buffer.parent[buffer.offset+offset+2]<<8;val|=buffer.parent[buffer.offset+offset+3];val=val+(buffer.parent[buffer.offset+offset]<<24>>>0)}else{val=buffer.parent[buffer.offset+offset+2]<<16;val|=buffer.parent[buffer.offset+offset+1]<<8;val|=buffer.parent[buffer.offset+offset];val=val+(buffer.parent[buffer.offset+offset+3]<<24>>>0)}return val}Buffer.prototype.readUInt32LE=function(offset,noAssert){return readUInt32(this,offset,false,noAssert)};Buffer.prototype.readUInt32BE=function(offset,noAssert){return readUInt32(this,offset,true,noAssert)};Buffer.prototype.readInt8=function(offset,noAssert){var buffer=this;var neg;if(!noAssert){assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset<buffer.length,"Trying to read beyond buffer length")}neg=buffer.parent[buffer.offset+offset]&128;if(!neg){return buffer.parent[buffer.offset+offset]}return(255-buffer.parent[buffer.offset+offset]+1)*-1};function readInt16(buffer,offset,isBigEndian,noAssert){var neg,val;if(!noAssert){assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset+1<buffer.length,"Trying to read beyond buffer length")}val=readUInt16(buffer,offset,isBigEndian,noAssert);neg=val&32768;if(!neg){return val}return(65535-val+1)*-1}Buffer.prototype.readInt16LE=function(offset,noAssert){return readInt16(this,offset,false,noAssert)};Buffer.prototype.readInt16BE=function(offset,noAssert){return readInt16(this,offset,true,noAssert)};function readInt32(buffer,offset,isBigEndian,noAssert){var neg,val;if(!noAssert){assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset+3<buffer.length,"Trying to read beyond buffer length")}val=readUInt32(buffer,offset,isBigEndian,noAssert);neg=val&2147483648;if(!neg){return val}return(4294967295-val+1)*-1}Buffer.prototype.readInt32LE=function(offset,noAssert){return readInt32(this,offset,false,noAssert)};Buffer.prototype.readInt32BE=function(offset,noAssert){return readInt32(this,offset,true,noAssert)};function readFloat(buffer,offset,isBigEndian,noAssert){if(!noAssert){assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset+3<buffer.length,"Trying to read beyond buffer length")}return require("./buffer_ieee754").readIEEE754(buffer,offset,isBigEndian,23,4)}Buffer.prototype.readFloatLE=function(offset,noAssert){return readFloat(this,offset,false,noAssert)};Buffer.prototype.readFloatBE=function(offset,noAssert){return readFloat(this,offset,true,noAssert)};function readDouble(buffer,offset,isBigEndian,noAssert){if(!noAssert){assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset+7<buffer.length,"Trying to read beyond buffer length")}return require("./buffer_ieee754").readIEEE754(buffer,offset,isBigEndian,52,8)}Buffer.prototype.readDoubleLE=function(offset,noAssert){return readDouble(this,offset,false,noAssert)};Buffer.prototype.readDoubleBE=function(offset,noAssert){return readDouble(this,offset,true,noAssert)};function verifuint(value,max){assert.ok(typeof value=="number","cannot write a non-number as a number");assert.ok(value>=0,"specified a negative value for writing an unsigned value");assert.ok(value<=max,"value is larger than maximum value for type");assert.ok(Math.floor(value)===value,"value has a fractional component")}Buffer.prototype.writeUInt8=function(value,offset,noAssert){var buffer=this;if(!noAssert){assert.ok(value!==undefined&&value!==null,"missing value");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset<buffer.length,"trying to write beyond buffer length");verifuint(value,255)}buffer.parent[buffer.offset+offset]=value};function writeUInt16(buffer,value,offset,isBigEndian,noAssert){if(!noAssert){assert.ok(value!==undefined&&value!==null,"missing value");assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset+1<buffer.length,"trying to write beyond buffer length");verifuint(value,65535)}if(isBigEndian){buffer.parent[buffer.offset+offset]=(value&65280)>>>8;buffer.parent[buffer.offset+offset+1]=value&255}else{buffer.parent[buffer.offset+offset+1]=(value&65280)>>>8;buffer.parent[buffer.offset+offset]=value&255}}Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){writeUInt16(this,value,offset,false,noAssert)};Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){writeUInt16(this,value,offset,true,noAssert)};function writeUInt32(buffer,value,offset,isBigEndian,noAssert){if(!noAssert){assert.ok(value!==undefined&&value!==null,"missing value");assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset+3<buffer.length,"trying to write beyond buffer length");verifuint(value,4294967295)}if(isBigEndian){buffer.parent[buffer.offset+offset]=value>>>24&255;buffer.parent[buffer.offset+offset+1]=value>>>16&255;buffer.parent[buffer.offset+offset+2]=value>>>8&255;buffer.parent[buffer.offset+offset+3]=value&255}else{buffer.parent[buffer.offset+offset+3]=value>>>24&255;buffer.parent[buffer.offset+offset+2]=value>>>16&255;buffer.parent[buffer.offset+offset+1]=value>>>8&255;buffer.parent[buffer.offset+offset]=value&255}}Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){writeUInt32(this,value,offset,false,noAssert)};Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){writeUInt32(this,value,offset,true,noAssert)};function verifsint(value,max,min){assert.ok(typeof value=="number","cannot write a non-number as a number");assert.ok(value<=max,"value larger than maximum allowed value");assert.ok(value>=min,"value smaller than minimum allowed value");assert.ok(Math.floor(value)===value,"value has a fractional component")}function verifIEEE754(value,max,min){assert.ok(typeof value=="number","cannot write a non-number as a number");assert.ok(value<=max,"value larger than maximum allowed value");assert.ok(value>=min,"value smaller than minimum allowed value")}Buffer.prototype.writeInt8=function(value,offset,noAssert){var buffer=this;if(!noAssert){assert.ok(value!==undefined&&value!==null,"missing value");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset<buffer.length,"Trying to write beyond buffer length");verifsint(value,127,-128)}if(value>=0){buffer.writeUInt8(value,offset,noAssert)}else{buffer.writeUInt8(255+value+1,offset,noAssert)}};function writeInt16(buffer,value,offset,isBigEndian,noAssert){if(!noAssert){assert.ok(value!==undefined&&value!==null,"missing value");assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset+1<buffer.length,"Trying to write beyond buffer length");verifsint(value,32767,-32768)}if(value>=0){writeUInt16(buffer,value,offset,isBigEndian,noAssert)}else{writeUInt16(buffer,65535+value+1,offset,isBigEndian,noAssert)}}Buffer.prototype.writeInt16LE=function(value,offset,noAssert){writeInt16(this,value,offset,false,noAssert)};Buffer.prototype.writeInt16BE=function(value,offset,noAssert){writeInt16(this,value,offset,true,noAssert)};function writeInt32(buffer,value,offset,isBigEndian,noAssert){if(!noAssert){assert.ok(value!==undefined&&value!==null,"missing value");assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset+3<buffer.length,"Trying to write beyond buffer length");verifsint(value,2147483647,-2147483648)}if(value>=0){writeUInt32(buffer,value,offset,isBigEndian,noAssert)}else{writeUInt32(buffer,4294967295+value+1,offset,isBigEndian,noAssert)}}Buffer.prototype.writeInt32LE=function(value,offset,noAssert){writeInt32(this,value,offset,false,noAssert)};Buffer.prototype.writeInt32BE=function(value,offset,noAssert){writeInt32(this,value,offset,true,noAssert)};function writeFloat(buffer,value,offset,isBigEndian,noAssert){if(!noAssert){assert.ok(value!==undefined&&value!==null,"missing value");assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset+3<buffer.length,"Trying to write beyond buffer length");verifIEEE754(value,3.4028234663852886e38,-3.4028234663852886e38)}require("./buffer_ieee754").writeIEEE754(buffer,value,offset,isBigEndian,23,4)}Buffer.prototype.writeFloatLE=function(value,offset,noAssert){writeFloat(this,value,offset,false,noAssert)};Buffer.prototype.writeFloatBE=function(value,offset,noAssert){writeFloat(this,value,offset,true,noAssert)};function writeDouble(buffer,value,offset,isBigEndian,noAssert){if(!noAssert){assert.ok(value!==undefined&&value!==null,"missing value");assert.ok(typeof isBigEndian==="boolean","missing or invalid endian");assert.ok(offset!==undefined&&offset!==null,"missing offset");assert.ok(offset+7<buffer.length,"Trying to write beyond buffer length");verifIEEE754(value,1.7976931348623157e308,-1.7976931348623157e308)}require("./buffer_ieee754").writeIEEE754(buffer,value,offset,isBigEndian,52,8)}Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){writeDouble(this,value,offset,false,noAssert)};Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){writeDouble(this,value,offset,true,noAssert)};SlowBuffer.prototype.readUInt8=Buffer.prototype.readUInt8;SlowBuffer.prototype.readUInt16LE=Buffer.prototype.readUInt16LE;SlowBuffer.prototype.readUInt16BE=Buffer.prototype.readUInt16BE;SlowBuffer.prototype.readUInt32LE=Buffer.prototype.readUInt32LE;SlowBuffer.prototype.readUInt32BE=Buffer.prototype.readUInt32BE;SlowBuffer.prototype.readInt8=Buffer.prototype.readInt8;SlowBuffer.prototype.readInt16LE=Buffer.prototype.readInt16LE;SlowBuffer.prototype.readInt16BE=Buffer.prototype.readInt16BE;SlowBuffer.prototype.readInt32LE=Buffer.prototype.readInt32LE;SlowBuffer.prototype.readInt32BE=Buffer.prototype.readInt32BE;SlowBuffer.prototype.readFloatLE=Buffer.prototype.readFloatLE;SlowBuffer.prototype.readFloatBE=Buffer.prototype.readFloatBE;SlowBuffer.prototype.readDoubleLE=Buffer.prototype.readDoubleLE;SlowBuffer.prototype.readDoubleBE=Buffer.prototype.readDoubleBE;SlowBuffer.prototype.writeUInt8=Buffer.prototype.writeUInt8;SlowBuffer.prototype.writeUInt16LE=Buffer.prototype.writeUInt16LE;SlowBuffer.prototype.writeUInt16BE=Buffer.prototype.writeUInt16BE;SlowBuffer.prototype.writeUInt32LE=Buffer.prototype.writeUInt32LE;SlowBuffer.prototype.writeUInt32BE=Buffer.prototype.writeUInt32BE;SlowBuffer.prototype.writeInt8=Buffer.prototype.writeInt8;SlowBuffer.prototype.writeInt16LE=Buffer.prototype.writeInt16LE;SlowBuffer.prototype.writeInt16BE=Buffer.prototype.writeInt16BE;SlowBuffer.prototype.writeInt32LE=Buffer.prototype.writeInt32LE;SlowBuffer.prototype.writeInt32BE=Buffer.prototype.writeInt32BE;SlowBuffer.prototype.writeFloatLE=Buffer.prototype.writeFloatLE;SlowBuffer.prototype.writeFloatBE=Buffer.prototype.writeFloatBE;SlowBuffer.prototype.writeDoubleLE=Buffer.prototype.writeDoubleLE;SlowBuffer.prototype.writeDoubleBE=Buffer.prototype.writeDoubleBE})()},{assert:2,"./buffer_ieee754":7,"base64-js":9}],9:[function(require,module,exports){(function(exports){"use strict";var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function b64ToByteArray(b64){var i,j,l,tmp,placeHolders,arr;if(b64.length%4>0){throw"Invalid string. Length must be a multiple of 4"}placeHolders=b64.indexOf("=");placeHolders=placeHolders>0?b64.length-placeHolders:0;arr=[];l=placeHolders>0?b64.length-4:b64.length;for(i=0,j=0;i<l;i+=4,j+=3){tmp=lookup.indexOf(b64[i])<<18|lookup.indexOf(b64[i+1])<<12|lookup.indexOf(b64[i+2])<<6|lookup.indexOf(b64[i+3]);arr.push((tmp&16711680)>>16);arr.push((tmp&65280)>>8);arr.push(tmp&255)}if(placeHolders===2){tmp=lookup.indexOf(b64[i])<<2|lookup.indexOf(b64[i+1])>>4;arr.push(tmp&255)}else if(placeHolders===1){tmp=lookup.indexOf(b64[i])<<10|lookup.indexOf(b64[i+1])<<4|lookup.indexOf(b64[i+2])>>2;arr.push(tmp>>8&255);arr.push(tmp&255)}return arr}function uint8ToBase64(uint8){var i,extraBytes=uint8.length%3,output="",temp,length;function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[num&63]}for(i=0,length=uint8.length-extraBytes;i<length;i+=3){temp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2];output+=tripletToBase64(temp)}switch(extraBytes){case 1:temp=uint8[uint8.length-1];output+=lookup[temp>>2];output+=lookup[temp<<4&63];output+="==";break;case 2:temp=(uint8[uint8.length-2]<<8)+uint8[uint8.length-1];output+=lookup[temp>>10];output+=lookup[temp>>4&63];output+=lookup[temp<<2&63];output+="=";break}return output}module.exports.toByteArray=b64ToByteArray;module.exports.fromByteArray=uint8ToBase64})()},{}]},{},[]);module.exports=require("buffer-browserify")},{}],7:[function(require,module,exports){(function(Buffer){module.exports=encode;function encode(input){return new Buffer(input).toString("base64")}})(require("__browserify_buffer").Buffer)},{__browserify_buffer:14}],9:[function(require,module,exports){(function(process){if(!process.EventEmitter)process.EventEmitter=function(){};var EventEmitter=exports.EventEmitter=process.EventEmitter;var isArray=typeof Array.isArray==="function"?Array.isArray:function(xs){return Object.prototype.toString.call(xs)==="[object Array]"};function indexOf(xs,x){if(xs.indexOf)return xs.indexOf(x);for(var i=0;i<xs.length;i++){if(x===xs[i])return i}return-1}var defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!this._events)this._events={};this._events.maxListeners=n};EventEmitter.prototype.emit=function(type){if(type==="error"){if(!this._events||!this._events.error||isArray(this._events.error)&&!this._events.error.length){if(arguments[1]instanceof Error){throw arguments[1]}else{throw new Error("Uncaught, unspecified 'error' event.")}return false}}if(!this._events)return false;var handler=this._events[type];if(!handler)return false;if(typeof handler=="function"){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:var args=Array.prototype.slice.call(arguments,1);handler.apply(this,args)}return true}else if(isArray(handler)){var args=Array.prototype.slice.call(arguments,1);var listeners=handler.slice();for(var i=0,l=listeners.length;i<l;i++){listeners[i].apply(this,args)}return true}else{return false}};EventEmitter.prototype.addListener=function(type,listener){if("function"!==typeof listener){throw new Error("addListener only takes instances of Function")}if(!this._events)this._events={};this.emit("newListener",type,listener);if(!this._events[type]){this._events[type]=listener}else if(isArray(this._events[type])){if(!this._events[type].warned){var m;if(this._events.maxListeners!==undefined){m=this._events.maxListeners}else{m=defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);console.trace()}}this._events[type].push(listener)}else{this._events[type]=[this._events[type],listener]}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){var self=this;self.on(type,function g(){self.removeListener(type,g);listener.apply(this,arguments)});return this};EventEmitter.prototype.removeListener=function(type,listener){if("function"!==typeof listener){throw new Error("removeListener only takes instances of Function")}if(!this._events||!this._events[type])return this;var list=this._events[type];if(isArray(list)){var i=indexOf(list,listener);if(i<0)return this;list.splice(i,1);if(list.length==0)delete this._events[type]}else if(this._events[type]===listener){delete this._events[type]}return this};EventEmitter.prototype.removeAllListeners=function(type){if(arguments.length===0){this._events={};return this}if(type&&this._events&&this._events[type])this._events[type]=null;return this};EventEmitter.prototype.listeners=function(type){if(!this._events)this._events={};if(!this._events[type])this._events[type]=[];if(!isArray(this._events[type])){this._events[type]=[this._events[type]]}return this._events[type]}})(require("__browserify_process"))},{__browserify_process:11}],3:[function(require,module,exports){"use strict";var diff=require("diffpatcher/diff");var patch=require("diffpatcher/patch");var output=require("./output");var makeOutput=output.makeOutput;var writeOutput=output.write;var Out="out@interactivate";var In="in@interactivate";var Reciever="receiver@interactivate";function makeOptionGetter(name){return function getOption(editor){return editor.getOption(name)}}var getRenderRate=makeOptionGetter("interactiveSpeed");var getSectionSeparator=makeOptionGetter("interactiveSeparator");var slicer=Array.prototype.slice;function throttle(f,delay){var id=0;return function throttled(){clearTimeout(id,throttled);var ms=delay.apply(this,arguments)||0;id=setTimeout.apply(this,[f,ms].concat(slicer.call(arguments)))}}function calculate(editor){var state=editor[In];var input=editor.getValue();var separator=getSectionSeparator(editor);var sections=input.split(separator);var activeLine=editor.getCursor().line;sections.pop();var change=Object.keys(sections).reduce(function(result,index){var input=sections[index];var line=result.line+input.split("\n").length-1;result.line=line;var delta={input:input.trim(),line:line,visible:activeLine!==line};result.state[index]=state[index]?patch(state[index],delta):delta;return result},{line:0,state:{}});return diff(editor[In],change.state)}function send(packet){var event=document.createEvent("CustomEvent");event.initCustomEvent("server",false,true,packet);window.dispatchEvent(event)}function recieve(editor,event){var packet=event.detail;var delta={};delta[packet.from]={pending:null,result:packet.result};write(editor,delta)}function print(editor){if(!editor.getOption("interactivate"))throw editor.constructor.Pass;editor.operation(function(){var cursor=editor.getCursor();editor.replaceSelection(editor.getOption("interactiveSection"));editor.setCursor({line:cursor.line+2,ch:0})})}function getMarkerFor(editor,view){var markers=editor.getAllMarks();var count=markers.length;while(count){count=count-1;var marker=markers[count];if(marker.replacedWith===view)return marker}return null}function write(editor,changes){var doc=editor.getDoc();Object.keys(changes).sort().reduce(function(_,id){if(!editor[Out][id])editor[Out][id]=makeOutput(id);var output=editor[Out][id];var change=changes[id];if(change===null)editor[Out][id]=null;writeOutput(output,editor,change)},null);editor[In]=patch(editor[In],changes)}function post(changes){Object.keys(changes).reduce(function(_,id){var change=changes[id];if(change&&change.input){send({to:id,source:change.input})}},null)}var renderOutput=throttle(function render(editor){var delta=calculate(editor);var changes=Object.keys(delta).reduce(function(changes,id){var change=delta[id];if(change&&change.input)change.pending=true;return changes},delta);write(editor,changes);post(changes)},getRenderRate);var hideOutput=throttle(function render(editor){var line=editor.getCursor().line;var state=editor[In];var changes=Object.keys(state).reduce(function(delta,id){var value=state[id];if(value.line===line)delta[id]={visible:false};else if(!value.visible)delta[id]={visible:true,line:value.line};return delta},[]);if(changes.length)write(editor,changes)},function(){return 200});function tooglePlugin(editor,value){if(value){editor[Reciever]=recieve.bind(recieve,editor);editor[In]={};editor[Out]={};editor.on("change",renderOutput);editor.on("cursorActivity",hideOutput);window.addEventListener("client",editor[Reciever],false)}else{editor.off("change",renderOutput);editor.off("cursorActivity",hideOutput);window.removeEventListener("client",editor[Reciever],false);editor[Reciever]=null;editor[In]=null;editor[Out]=null}}function install(CodeMirror){CodeMirror.prototype.constructor=CodeMirror;CodeMirror.defaults.interactiveSpeed=300;CodeMirror.defaults.interactiveSeparator=/^\/\/ \=\>[^\n]*$/m;CodeMirror.defaults.interactiveSection="\n// =>\n";CodeMirror.keyMap.macDefault["Cmd-Enter"]=print;CodeMirror.keyMap.pcDefault["Ctrl-Enter"]=print;CodeMirror.defineOption("interactivate",false,tooglePlugin)}module.exports=install},{"diffpatcher/diff":15,"diffpatcher/patch":16,"./output":17}],"wisp/backend/escodegen/writer":[function(require,module,exports){module.exports=require("w7jQYi")},{}],w7jQYi:[function(require,module,exports){{var _ns_={id:"wisp.backend.escodegen.writer",doc:void 0};var wisp_reader=require("./../../reader");var readFromString=wisp_reader.readFromString;var wisp_ast=require("./../../ast");var meta=wisp_ast.meta;var withMeta=wisp_ast.withMeta;var isSymbol=wisp_ast.isSymbol;var symbol=wisp_ast.symbol;var isKeyword=wisp_ast.isKeyword;var keyword=wisp_ast.keyword;var namespace=wisp_ast.namespace;var isUnquote=wisp_ast.isUnquote;var isUnquoteSplicing=wisp_ast.isUnquoteSplicing;var isQuote=wisp_ast.isQuote;var isSyntaxQuote=wisp_ast.isSyntaxQuote;var name=wisp_ast.name;var gensym=wisp_ast.gensym;var prStr=wisp_ast.prStr;var wisp_sequence=require("./../../sequence");var isEmpty=wisp_sequence.isEmpty;var count=wisp_sequence.count;var isList=wisp_sequence.isList;var list=wisp_sequence.list;var first=wisp_sequence.first;var second=wisp_sequence.second;var third=wisp_sequence.third;var rest=wisp_sequence.rest;var cons=wisp_sequence.cons;var conj=wisp_sequence.conj;var butlast=wisp_sequence.butlast;var reverse=wisp_sequence.reverse;var reduce=wisp_sequence.reduce;var vec=wisp_sequence.vec;var last=wisp_sequence.last;var map=wisp_sequence.map;var filter=wisp_sequence.filter;var take=wisp_sequence.take;var concat=wisp_sequence.concat;var partition=wisp_sequence.partition;var repeat=wisp_sequence.repeat;var interleave=wisp_sequence.interleave;var wisp_runtime=require("./../../runtime");var isOdd=wisp_runtime.isOdd;var isDictionary=wisp_runtime.isDictionary;var dictionary=wisp_runtime.dictionary;var merge=wisp_runtime.merge;var keys=wisp_runtime.keys;var vals=wisp_runtime.vals;var isContainsVector=wisp_runtime.isContainsVector;var mapDictionary=wisp_runtime.mapDictionary;var isString=wisp_runtime.isString;var isNumber=wisp_runtime.isNumber;var isVector=wisp_runtime.isVector;var isBoolean=wisp_runtime.isBoolean;var subs=wisp_runtime.subs;var reFind=wisp_runtime.reFind;var isTrue=wisp_runtime.isTrue;var isFalse=wisp_runtime.isFalse;var isNil=wisp_runtime.isNil;var isRePattern=wisp_runtime.isRePattern;var inc=wisp_runtime.inc;var dec=wisp_runtime.dec;var str=wisp_runtime.str;var char=wisp_runtime.char;var int=wisp_runtime.int;var isEqual=wisp_runtime.isEqual;var isStrictEqual=wisp_runtime.isStrictEqual;var wisp_string=require("./../../string");var split=wisp_string.split;var join=wisp_string.join;var upperCase=wisp_string.upperCase;var replace=wisp_string.replace;var wisp_expander=require("./../../expander");var installMacro=wisp_expander.installMacro;var escodegen=require("escodegen");var generate=escodegen.generate}var __uniqueChar__=exports.__uniqueChar__="ø";var toCamelJoin=exports.toCamelJoin=function toCamelJoin(prefix,key){return""+prefix+(!isEmpty(prefix)&&!isEmpty(key)?""+upperCase((key||0)[0])+subs(key,1):key)};var translateIdentifierWord=exports.translateIdentifierWord=function translateIdentifierWord(form){var id=name(form);id=id==="*"?"multiply":id==="/"?"divide":id==="+"?"sum":id==="-"?"subtract":id==="="?"equal?":id==="=="?"strict-equal?":id==="<="?"not-greater-than":id===">="?"not-less-than":id===">"?"greater-than":id==="<"?"less-than":"else"?id:void 0;id=join("_",split(id,"*"));id=join("-to-",split(id,"->"));id=join(split(id,"!"));id=join("$",split(id,"%"));id=join("-equal-",split(id,"="));id=join("-plus-",split(id,"+"));id=join("-and-",split(id,"&"));id=last(id)==="?"?""+"is-"+subs(id,0,dec(count(id))):id;id=reduce(toCamelJoin,"",split(id,"-"));return id};var translateIdentifier=exports.translateIdentifier=function translateIdentifier(form){return join(".",map(translateIdentifierWord,split(name(form),".")))};var errorArgCount=exports.errorArgCount=function errorArgCount(callee,n){return function(){throw SyntaxError(""+"Wrong number of arguments ("+n+") passed to: "+callee)}()};var writeLocation=exports.writeLocation=function writeLocation(form){return function(){var dataø1=meta(form);var startø1=(dataø1||0)["start"];var endø1=(dataø1||0)["end"];return!isNil(startø1)?{start:{line:inc((startø1||0)["line"]),column:(startø1||0)["column"]},end:{line:inc((endø1||0)["line"]),column:inc((endø1||0)["column"])}}:void 0}.call(this)};var __writers__=exports.__writers__={};var installWriter=exports.installWriter=function installWriter(op,writer){return(__writers__||0)[op]=writer};var writeOp=exports.writeOp=function writeOp(op,form){return function(){var writerø1=(__writers__||0)[op];!writerø1?function(){throw Error(""+"Assert failed: "+(""+"Unsupported operation: "+op)+"writer")}():void 0;return conj({loc:writeLocation((form||0)["form"])},writerø1(form))}.call(this)};var __specials__=exports.__specials__={};var installSpecial=exports.installSpecial=function installSpecial(op,writer){return(__specials__||0)[name(op)]=writer};var writeSpecial=exports.writeSpecial=function writeSpecial(writer,form){return conj({loc:writeLocation((form||0)["form"])},writer.apply(void 0,(form||0)["params"]))};var writeNil=exports.writeNil=function writeNil(form){return{type:"UnaryExpression",operator:"void",argument:{type:"Literal",value:0},prefix:true}};installWriter("nil",writeNil);var writeLiteral=exports.writeLiteral=function writeLiteral(form){return{type:"Literal",value:form}};var writeList=exports.writeList=function writeList(form){return{type:"CallExpression",callee:write({op:"var",form:symbol(void 0,"list")}),arguments:map(write,(form||0)["items"])}};installWriter("list",writeList);var writeSymbol=exports.writeSymbol=function writeSymbol(form){return{type:"CallExpression",callee:write({op:"var",form:symbol(void 0,"symbol")}),arguments:[writeConstant((form||0)["namespace"]),writeConstant((form||0)["name"])]}};installWriter("symbol",writeSymbol);var writeConstant=exports.writeConstant=function writeConstant(form){return isNil(form)?writeNil(form):isNumber(form)?writeNumber(form):isKeyword(form)?writeLiteral(name(form)):"else"?writeLiteral(form):void 0};installWriter("constant",function($1){return writeConstant(($1||0)["form"])});var writeNumber=exports.writeNumber=function writeNumber(form){return form<0?{type:"UnaryExpression",operator:"-",prefix:true,argument:writeNumber(form*-1)}:writeLiteral(form)};var writeKeyword=exports.writeKeyword=function writeKeyword(form){return{type:"Literal",value:(form||0)["form"]}};installWriter("keyword",writeKeyword);var toIdentifier=exports.toIdentifier=function toIdentifier(form){return{type:"Identifier",name:translateIdentifier(form)}};var writeBindingVar=exports.writeBindingVar=function writeBindingVar(form){return function(){var idø1=name((form||0)["id"]);return conj(toIdentifier((form||0)["shadow"]?""+translateIdentifier(idø1)+__uniqueChar__+(form||0)["depth"]:idø1),{loc:writeLocation((form||0)["id"])})}.call(this)};var writeVar=exports.writeVar=function writeVar(node){return isEqual("binding",((node||0)["binding"]||0)["type"])?conj(writeBindingVar((node||0)["binding"]),{loc:writeLocation((node||0)["form"])}):conj({loc:writeLocation((node||0)["form"])},toIdentifier(name((node||0)["form"])))};installWriter("var",writeVar);installWriter("param",writeVar);var writeInvoke=exports.writeInvoke=function writeInvoke(form){return{type:"CallExpression",callee:write((form||0)["callee"]),arguments:map(write,(form||0)["params"])}};installWriter("invoke",writeInvoke);var writeVector=exports.writeVector=function writeVector(form){return{type:"ArrayExpression",elements:map(write,(form||0)["items"])}};installWriter("vector",writeVector);var writeDictionary=exports.writeDictionary=function writeDictionary(form){return function(){var propertiesø1=partition(2,interleave((form||0)["keys"],(form||0)["values"]));return{type:"ObjectExpression",properties:map(function(pair){return function(){var keyø1=first(pair);var valueø1=second(pair);return{kind:"init",type:"Property",key:isEqual("symbol",(keyø1||0)["op"])?writeConstant(""+(keyø1||0)["form"]):write(keyø1),value:write(valueø1)}}.call(this)},propertiesø1)}}.call(this)};installWriter("dictionary",writeDictionary);var writeExport=exports.writeExport=function writeExport(form){return write({op:"set!",target:{op:"member-expression",computed:false,target:{op:"var",form:symbol(void 0,"exports")},property:(form||0)["id"]},value:(form||0)["init"]})};var writeDef=exports.writeDef=function writeDef(form){return{type:"VariableDeclaration",kind:"var",loc:writeLocation((form||0)["form"]),declarations:[{type:"VariableDeclarator",id:write((form||0)["id"]),loc:writeLocation(((form||0)["id"]||0)["form"]),init:conj((form||0)["export"]?writeExport(form):write((form||0)["init"]))}]}};installWriter("def",writeDef);var writeBinding=exports.writeBinding=function writeBinding(form){return function(){var idø1=writeBindingVar(form);var initø1=write((form||0)["init"]);return{type:"VariableDeclaration",kind:"var",loc:{start:((idø1||0)["loc"]||0)["start"],end:((initø1||0)["loc"]||0)["end"]},declarations:[{type:"VariableDeclarator",id:idø1,init:initø1}]}}.call(this)};installWriter("binding",writeBinding);var writeThrow=exports.writeThrow=function writeThrow(form){return toExpression({type:"ThrowStatement",argument:write((form||0)["throw"])})};installWriter("throw",writeThrow);var writeNew=exports.writeNew=function writeNew(form){return{type:"NewExpression",callee:write((form||0)["constructor"]),arguments:map(write,(form||0)["params"])}};installWriter("new",writeNew);var writeSet=exports.writeSet=function writeSet(form){return{type:"AssignmentExpression",operator:"=",left:write((form||0)["target"]),right:write((form||0)["value"])}};installWriter("set!",writeSet);var writeAget=exports.writeAget=function writeAget(form){return{type:"MemberExpression",computed:(form||0)["computed"],object:write((form||0)["target"]),property:write((form||0)["property"])}};installWriter("member-expression",writeAget);var __statements__=exports.__statements__={EmptyStatement:true,BlockStatement:true,ExpressionStatement:true,IfStatement:true,LabeledStatement:true,BreakStatement:true,ContinueStatement:true,SwitchStatement:true,ReturnStatement:true,ThrowStatement:true,TryStatement:true,WhileStatement:true,DoWhileStatement:true,ForStatement:true,ForInStatement:true,ForOfStatement:true,LetStatement:true,VariableDeclaration:true,FunctionDeclaration:true};
var writeStatement=exports.writeStatement=function writeStatement(form){return toStatement(write(form))};var toStatement=exports.toStatement=function toStatement(node){return(__statements__||0)[(node||0)["type"]]?node:{type:"ExpressionStatement",expression:node}};var toReturn=exports.toReturn=function toReturn(form){return{type:"ReturnStatement",loc:writeLocation((form||0)["form"]),argument:write(form)}};var writeBody=exports.writeBody=function writeBody(form){return function(){var statementsø1=map(writeStatement,(form||0)["statements"]||[]);var resultø1=(form||0)["result"]?toReturn((form||0)["result"]):void 0;return resultø1?conj(statementsø1,resultø1):statementsø1}.call(this)};var toBlock=exports.toBlock=function toBlock(body){return{type:"BlockStatement",body:isVector(body)?body:[body]}};var toExpression=exports.toExpression=function toExpression(body){return{type:"CallExpression",arguments:[],callee:toSequence([{type:"FunctionExpression",id:void 0,params:[],defaults:[],expression:false,generator:false,rest:void 0,body:toBlock(body)}])}};var writeDo=exports.writeDo=function writeDo(form){return toExpression(writeBody(form))};installWriter("do",writeDo);var writeIf=exports.writeIf=function writeIf(form){return{type:"ConditionalExpression",test:write((form||0)["test"]),consequent:write((form||0)["consequent"]),alternate:write((form||0)["alternate"])}};installWriter("if",writeIf);var writeTry=exports.writeTry=function writeTry(form){return function(){var handlerø1=(form||0)["handler"];var finalizerø1=(form||0)["finalizer"];return toExpression({type:"TryStatement",guardedHandlers:[],block:toBlock(writeBody((form||0)["body"])),handlers:handlerø1?[{type:"CatchClause",param:write((handlerø1||0)["name"]),body:toBlock(writeBody(handlerø1))}]:[],finalizer:finalizerø1?toBlock(writeBody(finalizerø1)):!handlerø1?toBlock([]):"else"?void 0:void 0})}.call(this)};installWriter("try",writeTry);var writeBindingValue=function writeBindingValue(form){return write((form||0)["init"])};var writeBindingParam=function writeBindingParam(form){return writeVar({form:(form||0)["name"]})};var writeBinding=exports.writeBinding=function writeBinding(form){return write({op:"def","var":form,init:(form||0)["init"],form:form})};var writeLet=exports.writeLet=function writeLet(form){return function(){var bodyø1=conj(form,{statements:vec(concat((form||0)["bindings"],(form||0)["statements"]))});return toIife(toBlock(writeBody(bodyø1)))}.call(this)};installWriter("let",writeLet);var toRebind=exports.toRebind=function toRebind(form){return function loop(){var recur=loop;var resultø1=[];var bindingsø1=(form||0)["bindings"];do{recur=isEmpty(bindingsø1)?resultø1:(loop[0]=conj(resultø1,{type:"AssignmentExpression",operator:"=",left:writeBindingVar(first(bindingsø1)),right:{type:"MemberExpression",computed:true,object:{type:"Identifier",name:"loop"},property:{type:"Literal",value:count(resultø1)}}}),loop[1]=rest(bindingsø1),loop)}while(resultø1=loop[0],bindingsø1=loop[1],recur===loop);return recur}.call(this)};var toSequence=exports.toSequence=function toSequence(expressions){return{type:"SequenceExpression",expressions:expressions}};var toIife=exports.toIife=function toIife(body,id){return{type:"CallExpression",arguments:[{type:"ThisExpression"}],callee:{type:"MemberExpression",computed:false,object:{type:"FunctionExpression",id:id,params:[],defaults:[],expression:false,generator:false,rest:void 0,body:body},property:{type:"Identifier",name:"call"}}}};var toLoopInit=exports.toLoopInit=function toLoopInit(){return{type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:{type:"Identifier",name:"recur"},init:{type:"Identifier",name:"loop"}}]}};var toDoWhile=exports.toDoWhile=function toDoWhile(body,test){return{type:"DoWhileStatement",body:body,test:test}};var toSetRecur=exports.toSetRecur=function toSetRecur(form){return{type:"AssignmentExpression",operator:"=",left:{type:"Identifier",name:"recur"},right:write(form)}};var toLoop=exports.toLoop=function toLoop(form){return toSequence(conj(toRebind(form),{type:"BinaryExpression",operator:"===",left:{type:"Identifier",name:"recur"},right:{type:"Identifier",name:"loop"}}))};var writeLoop=exports.writeLoop=function writeLoop(form){return function(){var statementsø1=(form||0)["statements"];var resultø1=(form||0)["result"];var bindingsø1=(form||0)["bindings"];var loopBodyø1=conj(map(writeStatement,statementsø1),toStatement(toSetRecur(resultø1)));var bodyø1=concat([toLoopInit()],map(write,bindingsø1),[toDoWhile(toBlock(vec(loopBodyø1)),toLoop(form))],[{type:"ReturnStatement",argument:{type:"Identifier",name:"recur"}}]);return toIife(toBlock(vec(bodyø1)),symbol(void 0,"loop"))}.call(this)};installWriter("loop",writeLoop);var toRecur=exports.toRecur=function toRecur(form){return function loop(){var recur=loop;var resultø1=[];var paramsø1=(form||0)["params"];do{recur=isEmpty(paramsø1)?resultø1:(loop[0]=conj(resultø1,{type:"AssignmentExpression",operator:"=",right:write(first(paramsø1)),left:{type:"MemberExpression",computed:true,object:{type:"Identifier",name:"loop"},property:{type:"Literal",value:count(resultø1)}}}),loop[1]=rest(paramsø1),loop)}while(resultø1=loop[0],paramsø1=loop[1],recur===loop);return recur}.call(this)};var writeRecur=exports.writeRecur=function writeRecur(form){return toSequence(conj(toRecur(form),{type:"Identifier",name:"loop"}))};installWriter("recur",writeRecur);var fallbackOverload=exports.fallbackOverload=function fallbackOverload(){return{type:"SwitchCase",test:void 0,consequent:[{type:"ThrowStatement",argument:{type:"CallExpression",callee:{type:"Identifier",name:"RangeError"},arguments:[{type:"Literal",value:"Wrong number of arguments passed"}]}}]}};var spliceBinding=exports.spliceBinding=function spliceBinding(form){return{op:"def",id:last((form||0)["params"]),init:{op:"invoke",callee:{op:"var",form:symbol(void 0,"Array.prototype.slice.call")},params:[{op:"var",form:symbol(void 0,"arguments")},{op:"constant",form:(form||0)["arity"],type:"number"}]}}};var writeOverloadingParams=exports.writeOverloadingParams=function writeOverloadingParams(params){return reduce(function(forms,param){return conj(forms,{op:"def",id:param,init:{op:"member-expression",computed:true,target:{op:"var",form:symbol(void 0,"arguments")},property:{op:"constant",type:"number",form:count(forms)}}})},[],params)};var writeOverloadingFn=exports.writeOverloadingFn=function writeOverloadingFn(form){return function(){var overloadsø1=map(writeFnOverload,(form||0)["methods"]);return{params:[],body:toBlock({type:"SwitchStatement",discriminant:{type:"MemberExpression",computed:false,object:{type:"Identifier",name:"arguments"},property:{type:"Identifier",name:"length"}},cases:(form||0)["variadic"]?overloadsø1:conj(overloadsø1,fallbackOverload())})}}.call(this)};var writeFnOverload=exports.writeFnOverload=function writeFnOverload(form){return function(){var paramsø1=(form||0)["params"];var bindingsø1=(form||0)["variadic"]?conj(writeOverloadingParams(butlast(paramsø1)),spliceBinding(form)):writeOverloadingParams(paramsø1);var statementsø1=vec(concat(bindingsø1,(form||0)["statements"]));return{type:"SwitchCase",test:!(form||0)["variadic"]?{type:"Literal",value:(form||0)["arity"]}:void 0,consequent:writeBody(conj(form,{statements:statementsø1}))}}.call(this)};var writeSimpleFn=exports.writeSimpleFn=function writeSimpleFn(form){return function(){var methodø1=first((form||0)["methods"]);var paramsø1=(methodø1||0)["variadic"]?butlast((methodø1||0)["params"]):(methodø1||0)["params"];var bodyø1=(methodø1||0)["variadic"]?conj(methodø1,{statements:vec(cons(spliceBinding(methodø1),(methodø1||0)["statements"]))}):methodø1;return{params:map(writeVar,paramsø1),body:toBlock(writeBody(bodyø1))}}.call(this)};var resolve=exports.resolve=function resolve(from,to){return function(){var requirerø1=split(name(from),".");var requirementø1=split(name(to),".");var isRelativeø1=!(name(from)===name(to))&&first(requirerø1)===first(requirementø1);return isRelativeø1?function loop(){var recur=loop;var fromø2=requirerø1;var toø2=requirementø1;do{recur=first(fromø2)===first(toø2)?(loop[0]=rest(fromø2),loop[1]=rest(toø2),loop):join("/",concat(["."],repeat(dec(count(fromø2)),".."),toø2))}while(fromø2=loop[0],toø2=loop[1],recur===loop);return recur}.call(this):join("/",requirementø1)}.call(this)};var idToNs=exports.idToNs=function idToNs(id){return symbol(void 0,join("*",split(name(id),".")))};var writeRequire=exports.writeRequire=function writeRequire(form,requirer){return function(){var nsBindingø1={op:"def",id:{op:"var",type:"identifier",form:idToNs((form||0)["ns"])},init:{op:"invoke",callee:{op:"var",type:"identifier",form:symbol(void 0,"require")},params:[{op:"constant",form:resolve(requirer,(form||0)["ns"])}]}};var nsAliasø1=(form||0)["alias"]?{op:"def",id:{op:"var",type:"identifier",form:idToNs((form||0)["alias"])},init:(nsBindingø1||0)["id"]}:void 0;var referencesø1=reduce(function(references,form){return conj(references,{op:"def",id:{op:"var",type:"identifier",form:(form||0)["rename"]||(form||0)["name"]},init:{op:"member-expression",computed:false,target:(nsBindingø1||0)["id"],property:{op:"var",type:"identifier",form:(form||0)["name"]}}})},[],(form||0)["refer"]);return vec(cons(nsBindingø1,nsAliasø1?cons(nsAliasø1,referencesø1):referencesø1))}.call(this)};var writeNs=exports.writeNs=function writeNs(form){return function(){var requirerø1=(form||0)["name"];var nsBindingø1={op:"def",id:{op:"var",type:"identifier",form:symbol(void 0,"*ns*")},init:{op:"dictionary",keys:[{op:"var",type:"identifier",form:symbol(void 0,"id")},{op:"var",type:"identifier",form:symbol(void 0,"doc")}],values:[{op:"constant",type:"identifier",form:name((form||0)["name"])},{op:"constant",form:(form||0)["doc"]}]}};var requirementsø1=vec(concat.apply(void 0,map(function($1){return writeRequire($1,requirerø1)},(form||0)["require"])));return toBlock(map(write,vec(cons(nsBindingø1,requirementsø1))))}.call(this)};installWriter("ns",writeNs);var writeFn=exports.writeFn=function writeFn(form){return function(){var baseø1=count((form||0)["methods"])>1?writeOverloadingFn(form):writeSimpleFn(form);return conj(baseø1,{type:"FunctionExpression",id:(form||0)["id"]?writeVar((form||0)["id"]):void 0,defaults:void 0,rest:void 0,generator:false,expression:false})}.call(this)};installWriter("fn",writeFn);var write=exports.write=function write(form){return function(){var opø1=(form||0)["op"];var writerø1=isEqual("invoke",(form||0)["op"])&&isEqual("var",((form||0)["callee"]||0)["op"])&&(__specials__||0)[name(((form||0)["callee"]||0)["form"])];return writerø1?writeSpecial(writerø1,form):writeOp((form||0)["op"],form)}.call(this)};var write_=exports.write_=function write_(){var forms=Array.prototype.slice.call(arguments,0);return function(){var bodyø1=map(writeStatement,forms);return{type:"Program",body:bodyø1}}.call(this)};var compile=exports.compile=function compile(){switch(arguments.length){case 1:var form=arguments[0];return compile({},form);default:var options=arguments[0];var forms=Array.prototype.slice.call(arguments,1);return generate(write_.apply(void 0,forms),options)}};var getMacro=exports.getMacro=function getMacro(target,property){return list.apply(void 0,[symbol(void 0,"aget")].concat([list.apply(void 0,[symbol(void 0,"or")].concat([target],[0]))],[property]))};installMacro("get",getMacro);var installLogicalOperator=exports.installLogicalOperator=function installLogicalOperator(callee,operator,fallback){var writeLogicalOperator=function writeLogicalOperator(){var operands=Array.prototype.slice.call(arguments,0);return function(){var nø1=count(operands);return isEqual(nø1,0)?writeConstant(fallback):isEqual(nø1,1)?write(first(operands)):"else"?reduce(function(left,right){return{type:"LogicalExpression",operator:operator,left:left,right:write(right)}},write(first(operands)),rest(operands)):void 0}.call(this)};return installSpecial(callee,writeLogicalOperator)};installLogicalOperator("or","||",void 0);installLogicalOperator("and","&&",true);var installUnaryOperator=exports.installUnaryOperator=function installUnaryOperator(callee,operator,isPrefix){var writeUnaryOperator=function writeUnaryOperator(){var params=Array.prototype.slice.call(arguments,0);return count(params)===1?{type:"UnaryExpression",operator:operator,argument:write(first(params)),prefix:isPrefix}:errorArgCount(callee,count(params))};return installSpecial(callee,writeUnaryOperator)};installUnaryOperator("not","!");installUnaryOperator("bit-not","~");var installBinaryOperator=exports.installBinaryOperator=function installBinaryOperator(callee,operator){var writeBinaryOperator=function writeBinaryOperator(){var params=Array.prototype.slice.call(arguments,0);return count(params)<2?errorArgCount(callee,count(params)):reduce(function(left,right){return{type:"BinaryExpression",operator:operator,left:left,right:write(right)}},write(first(params)),rest(params))};return installSpecial(callee,writeBinaryOperator)};installBinaryOperator("bit-and","&");installBinaryOperator("bit-or","|");installBinaryOperator("bit-xor","^");installBinaryOperator("bit-shift-left","<<");installBinaryOperator("bit-shift-right",">>");installBinaryOperator("bit-shift-right-zero-fil",">>>");var installArithmeticOperator=exports.installArithmeticOperator=function installArithmeticOperator(callee,operator,isValid,fallback){var writeBinaryOperator=function writeBinaryOperator(left,right){return{type:"BinaryExpression",operator:name(operator),left:left,right:write(right)}};var writeArithmeticOperator=function writeArithmeticOperator(){var params=Array.prototype.slice.call(arguments,0);return function(){var nø1=count(params);return isValid&&!isValid(nø1)?errorArgCount(name(callee),nø1):nø1==0?writeLiteral(fallback):nø1==1?reduce(writeBinaryOperator,writeLiteral(fallback),params):"else"?reduce(writeBinaryOperator,write(first(params)),rest(params)):void 0}.call(this)};return installSpecial(callee,writeArithmeticOperator)};installArithmeticOperator("+","+",void 0,0);installArithmeticOperator("-","-",function($1){return $1>=1},0);installArithmeticOperator("*","*",void 0,1);installArithmeticOperator(keyword("/"),keyword("/"),function($1){return $1>=1},1);installArithmeticOperator("mod",keyword("%"),function($1){return $1==2},1);var installComparisonOperator=exports.installComparisonOperator=function installComparisonOperator(callee,operator,fallback){var writeComparisonOperator=function writeComparisonOperator(){switch(arguments.length){case 0:return errorArgCount(callee,0);case 1:var form=arguments[0];return toSequence([write(form),writeLiteral(fallback)]);case 2:var left=arguments[0];var right=arguments[1];return{type:"BinaryExpression",operator:operator,left:write(left),right:write(right)};default:var left=arguments[0];var right=arguments[1];var more=Array.prototype.slice.call(arguments,2);return reduce(function(left,right){return{type:"LogicalExpression",operator:"&&",left:left,right:{type:"BinaryExpression",operator:operator,left:isEqual("LogicalExpression",(left||0)["type"])?((left||0)["right"]||0)["right"]:(left||0)["right"],right:write(right)}}},writeComparisonOperator(left,right),more)}};return installSpecial(callee,writeComparisonOperator)};installComparisonOperator("==","==",true);installComparisonOperator(">",">",true);installComparisonOperator(">=",">=",true);installComparisonOperator("<","<",true);installComparisonOperator("<=","<=",true);var isWriteIdentical=exports.isWriteIdentical=function isWriteIdentical(){var params=Array.prototype.slice.call(arguments,0);return count(params)===2?{type:"BinaryExpression",operator:"===",left:write(first(params)),right:write(second(params))}:errorArgCount("identical?",count(params))};installSpecial("identical?",isWriteIdentical);var isWriteInstance=exports.isWriteInstance=function isWriteInstance(){var params=Array.prototype.slice.call(arguments,0);return function(){var constructorø1=first(params);var instanceø1=second(params);return count(params)<1?errorArgCount("instance?",count(params)):{type:"BinaryExpression",operator:"instanceof",left:instanceø1?write(instanceø1):writeConstant(instanceø1),right:write(constructorø1)}}.call(this)};installSpecial("instance?",isWriteInstance);var expandApply=exports.expandApply=function expandApply(f){var params=Array.prototype.slice.call(arguments,1);return function(){var prefixø1=vec(butlast(params));return isEmpty(prefixø1)?list.apply(void 0,[symbol(void 0,".apply")].concat([f],[void 0],vec(params))):list.apply(void 0,[symbol(void 0,".apply")].concat([f],[void 0],[list.apply(void 0,[symbol(void 0,".concat")].concat([prefixø1],[last(params)]))]))}.call(this)};installMacro("apply",expandApply);var expandPrint=exports.expandPrint=function expandPrint(andForm){var more=Array.prototype.slice.call(arguments,1);"Prints the object(s) to the output for human consumption.";return function(){var opø1=withMeta(symbol(void 0,"console.log"),meta(andForm));return list.apply(void 0,[opø1].concat(vec(more)))}.call(this)};installMacro("print",withMeta(expandPrint,{implicit:["&form"]}));var expandStr=exports.expandStr=function expandStr(){var forms=Array.prototype.slice.call(arguments,0);return list.apply(void 0,[symbol(void 0,"+")].concat([""],vec(forms)))};installMacro("str",expandStr);var expandDebug=exports.expandDebug=function expandDebug(){return symbol(void 0,"debugger")};installMacro("debugger!",expandDebug);var expandAssert=exports.expandAssert=function expandAssert(){switch(arguments.length){case 1:var x=arguments[0];return expandAssert(x,"");case 2:var x=arguments[0];var message=arguments[1];return function(){var formø1=prStr(x);return list.apply(void 0,[symbol(void 0,"if")].concat([list.apply(void 0,[symbol(void 0,"not")].concat([x]))],[list.apply(void 0,[symbol(void 0,"throw")].concat([list.apply(void 0,[symbol(void 0,"Error")].concat([list.apply(void 0,[symbol(void 0,"str")].concat(["Assert failed: "],[message],[formø1]))]))]))]))}.call(this);default:throw RangeError("Wrong number of arguments passed")}};installMacro("assert",expandAssert)},{"./../../reader":"RKZSDK","./../../ast":"/Ek5E3","./../../sequence":"Dhp18X","./../../runtime":"57peRD","./../../string":"WvRJGK","./../../expander":"HujXR7",escodegen:18}],17:[function(require,module,exports){var makeView=require("./view").makeView;var render=require("./render");function Output(id){this.id=id}function makeOutput(id){return new Output(id)}function clear(output){output.marker.clear();output.widget.clear()}function mark(output,editor,line){output.marker=editor.markText({line:line,ch:0},{line:line},{collapsed:true,inclusiveLeft:false,inclusiveRight:true});output.widget=editor.addLineWidget(line,output.view,{showIfHidden:true,noHScroll:true})}function move(output,editor,line){var position=output.marker.find();if(!position||position.line!==line){clear(output);mark(output,editor,line)}}function makeSection(body,type){var view=document.createElement("section");view.className="section-"+type;view.setAttribute("style","width: 100%; float: left;");view.innerHTML="<h3 class=section-head></h3>"+"<div class=section-body></div>";body.appendChild(view);return view}function write(output,editor,state){var view=output.view||(output.view=makeView(editor,output.id));if(state===null)return clear(output);if(state.pending)output.view.style.opacity="0.2";else if(state.pending===null)output.view.style.opacity="";if(state.result){var result=state.result;Object.keys(result).reduce(function(view,type){var section=view.querySelector(".section-"+type)||makeSection(view,type);var output=result[type];if(output){var body=section.querySelector(".section-body");var head=section.querySelector(".section-head");head.textContent=output.title;head.style.display=output.title?"":"none";render(output.value,body);section.style.display=""}else{section.style.display="none"}return view},view.body)}if(state.visible===true)mark(output,editor,state.line);if(state.visible===false)clear(output);if(state.line)move(output,editor,state.line)}exports.makeOutput=makeOutput;exports.write=write},{"./view":19,"./render":13}],13:[function(require,module,exports){"use strict";var method=require("method");var util=require("util");var render=method("render@interactivate");render.define(Object,function(value,view){return view.textContent=util.inspect(value)});render.define(function(value,view){return view.textContent=value});render.define(Error,function(error,view){return view.textContent=String(error)});render.define(Element,function(element,view){if(view.firstChild!==element){view.innerHTML="";view.appendChild(element)}return element});module.exports=render},{util:8,method:20}],6:[function(require,module,exports){{var _ns_={id:"wisp.backend.escodegen.compiler",doc:void 0};var wisp_reader=require("./../../reader");var readString=wisp_reader.readFromString;var read_=wisp_reader.read_;var wisp_ast=require("./../../ast");var meta=wisp_ast.meta;var withMeta=wisp_ast.withMeta;var isSymbol=wisp_ast.isSymbol;var symbol=wisp_ast.symbol;var isKeyword=wisp_ast.isKeyword;var keyword=wisp_ast.keyword;var namespace=wisp_ast.namespace;var isUnquote=wisp_ast.isUnquote;var isUnquoteSplicing=wisp_ast.isUnquoteSplicing;var isQuote=wisp_ast.isQuote;var isSyntaxQuote=wisp_ast.isSyntaxQuote;var name=wisp_ast.name;var gensym=wisp_ast.gensym;var prStr=wisp_ast.prStr;var wisp_sequence=require("./../../sequence");var isEmpty=wisp_sequence.isEmpty;var count=wisp_sequence.count;var isList=wisp_sequence.isList;var list=wisp_sequence.list;var first=wisp_sequence.first;var second=wisp_sequence.second;var third=wisp_sequence.third;var rest=wisp_sequence.rest;var cons=wisp_sequence.cons;var conj=wisp_sequence.conj;var butlast=wisp_sequence.butlast;var reverse=wisp_sequence.reverse;var reduce=wisp_sequence.reduce;var vec=wisp_sequence.vec;var last=wisp_sequence.last;var map=wisp_sequence.map;var filter=wisp_sequence.filter;var take=wisp_sequence.take;var concat=wisp_sequence.concat;var partition=wisp_sequence.partition;var repeat=wisp_sequence.repeat;var interleave=wisp_sequence.interleave;var wisp_runtime=require("./../../runtime");var isOdd=wisp_runtime.isOdd;var isDictionary=wisp_runtime.isDictionary;var dictionary=wisp_runtime.dictionary;var merge=wisp_runtime.merge;var keys=wisp_runtime.keys;var vals=wisp_runtime.vals;var isContainsVector=wisp_runtime.isContainsVector;var mapDictionary=wisp_runtime.mapDictionary;var isString=wisp_runtime.isString;var isNumber=wisp_runtime.isNumber;var isVector=wisp_runtime.isVector;var isBoolean=wisp_runtime.isBoolean;var subs=wisp_runtime.subs;var reFind=wisp_runtime.reFind;var isTrue=wisp_runtime.isTrue;var isFalse=wisp_runtime.isFalse;var isNil=wisp_runtime.isNil;var isRePattern=wisp_runtime.isRePattern;var inc=wisp_runtime.inc;var dec=wisp_runtime.dec;var str=wisp_runtime.str;var char=wisp_runtime.char;var int=wisp_runtime.int;var isEqual=wisp_runtime.isEqual;var isStrictEqual=wisp_runtime.isStrictEqual;var wisp_string=require("./../../string");var split=wisp_string.split;var join=wisp_string.join;var upperCase=wisp_string.upperCase;var replace=wisp_string.replace;var wisp_expander=require("./../../expander");var installMacro=wisp_expander.installMacro;var wisp_analyzer=require("./../../analyzer");var emptyEnv=wisp_analyzer.emptyEnv;var analyze=wisp_analyzer.analyze;var analyze_=wisp_analyzer.analyze_;var wisp_backend_escodegen_writer=require("./writer");var write=wisp_backend_escodegen_writer.write;var compile=wisp_backend_escodegen_writer.compile;var write_=wisp_backend_escodegen_writer.write_;var escodegen=require("escodegen");var generate_=escodegen.generate;var base64Encode=require("base64-encode");var btoa=base64Encode;var fs=require("fs");var readFileSync=fs.readFileSync;var writeFileSync=fs.writeFileSync;var path=require("path");var basename=path.basename;var dirname=path.dirname;var joinPath=path.join}var generate=exports.generate=function generate(options){var nodes=Array.prototype.slice.call(arguments,1);return function(){var sourceMapUriø1=(options||0)["source-map-uri"];var astø1=write_.apply(void 0,nodes);var outputø1=generate_(astø1,{file:(options||0)["output-uri"],sourceMap:(options||0)["source-uri"],sourceMapRoot:(options||0)["source-root"],sourceMapWithCode:true});return{code:""+(outputø1||0)["code"]+"\n//# sourceMappingURL="+(sourceMapUriø1?sourceMapUriø1:""+"data:application/json;charset=utf-8;base64,"+btoa(""+(outputø1||0)["map"]))+"\n","source-map":(outputø1||0)["map"],"ast-js":(options||0)["include-js-ast"]?astø1:void 0}}.call(this)};var expandDefmacro=exports.expandDefmacro=function expandDefmacro(andForm,id){var body=Array.prototype.slice.call(arguments,2);return function(){var fnø1=withMeta(list.apply(void 0,[symbol(void 0,"defn")].concat([id],vec(body))),meta(andForm));var formø1=list.apply(void 0,[symbol(void 0,"do")].concat([fnø1],[id]));var astø1=analyze(formø1);var codeø1=compile(astø1);var macroø1=eval(codeø1);installMacro(id,macroø1);return void 0}.call(this)};installMacro(symbol(void 0,"defmacro"),withMeta(expandDefmacro,{implicit:["&form"]}))},{fs:10,path:12,"./../../reader":"RKZSDK","./../../ast":"/Ek5E3","./../../sequence":"Dhp18X","./../../runtime":"57peRD","./../../string":"WvRJGK","./../../expander":"HujXR7","./../../analyzer":"UZeJrq","./writer":"w7jQYi","base64-encode":7,escodegen:18}],21:[function(require,module,exports){"use strict";function rebase(result,parent,delta){Object.keys(parent).forEach(function(key){if(!(parent[key]==null||key in delta&&delta[key]==null))result[key]=parent[key]},result);Object.keys(delta).forEach(function(key){if(key in parent){var current=delta[key];var previous=parent[key];if(current===previous)current=current;else if(current==null)current=current;else if(typeof current!=="object")result[key]=current;else if(typeof previous!=="object")result[key]=current;else result[key]=rebase({},previous,current)}else{result[key]=delta[key]}});return result}module.exports=rebase},{}],19:[function(require,module,exports){var TEAR_IMAGE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAMCAYAAABBV8wuAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAGpJREFUeNpi/P//PwM2wMSAA7CACEYggLKZgfgvEP8BCYAwKxALAjEPEH8B4g9MUI5IWlqayevXr9eCaCBfGGSSVnJysu/Xr1+fAx3y/9u3by9BfIb29vZCmCAMgCQZ/+NwL07nUlECIMAAMr41sxvv6oEAAAAASUVORK5CYII=";var OUTPUT_STYLE=["margin-left: -10px","padding: 0","whitespace: normal","text-shadow: none"].join(";");var TOP_STYLE=["position: relative","z-index: 2","height: 12px","background-clip: padding-box","background: url('"+TEAR_IMAGE+"') top right repeat-x"].join(";");var BOTTOM_STYLE=["position: relative","z-index: 2","height: 12px","background-clip: padding-box","background: url('"+TEAR_IMAGE+"') top left repeat-x","-webkit-transform: rotate(180deg)","-o-transform: rotate(180deg)","transform: rotate(180deg)"].join(";");var BOX_STYLE=["-moz-box-shadow: 0 0 30px -2px #000","-webkit-box-shadow: 0 0 30px -2px #000","box-shadow: 0 0 30px -2px #000","color: black","background: white","position: relative","margin: 0px","width: 100%","overflow: auto"].join(";");var HEAD_STYLE=["display: table-cell","padding: 10px","padding-left: 20px","white-space: pre","color: white","text-shadow: 0px 1px 5px #000","vertical-align: top"].join(";");var BODY_STYLE=["display: table-cell","padding: 10px","width: 100%"].join(";");var TEMPLATE=['<div style="'+OUTPUT_STYLE+'">',"  <div class='cm-live-output-border-top' style=\""+TOP_STYLE+'"> </div>',"  <div class='cm-live-output-box' style=\""+BOX_STYLE+'">',"    <h1 class='cm-live-output-head' style=\""+HEAD_STYLE+'">Out[0]</h1>',"    <pre class='cm-live-output-body' style=\""+BODY_STYLE+'"></pre>',"  </div>","  <div class='cm-live-output-border-bottom' style=\""+BOTTOM_STYLE+'"></div>',"</div>"].join("\n");function makeView(editor,id){var document=editor.display.input.ownerDocument;var container=document.createElement("section");container.innerHTML=TEMPLATE;var view=container.firstChild;view.id="interactivate-out-"+id;view.label=view.querySelector(".cm-live-output-head");view.label.textContent="Out["+id+"] = ";view.body=view.querySelector(".cm-live-output-body");return view}exports.makeView=makeView},{}],20:[function(require,module,exports){"use strict";var defineProperty=Object.defineProperty||function(object,name,property){object[name]=property.value;return object};var typefy=Object.prototype.toString;var types={"function":"Object",object:"Object"};var host=[];var builtin={};function Primitive(){}function ObjectType(){}ObjectType.prototype=new Primitive;function ErrorType(){}ErrorType.prototype=new ObjectType;var Default=builtin.Default=Primitive.prototype;var Null=builtin.Null=new Primitive;var Void=builtin.Void=new Primitive;builtin.String=new Primitive;builtin.Number=new Primitive;builtin.Boolean=new Primitive;builtin.Object=ObjectType.prototype;builtin.Error=ErrorType.prototype;builtin.EvalError=new ErrorType;builtin.InternalError=new ErrorType;builtin.RangeError=new ErrorType;builtin.ReferenceError=new ErrorType;builtin.StopIteration=new ErrorType;builtin.SyntaxError=new ErrorType;builtin.TypeError=new ErrorType;builtin.URIError=new ErrorType;function Method(id){var name="λ:"+String(id||Math.random().toString(32).substr(2));function dispatch(value){var type=null;var method=value===null?Null[name]:value===void 0?Void[name]:value[name]||(type=builtin[(value.constructor||"").name])&&type[name]||host[value["!"+name]]||(type=builtin[types[typeof value]])&&type[name];method=method||Default[name];if(!method)throw TypeError("Type does not implements method: "+name);return method.apply(method,arguments)}dispatch.toString=function toString(){return name};dispatch.implement=implementMethod;dispatch.define=defineMethod;return dispatch}var defineMethod=function defineMethod(Type,lambda){return define(this,Type,lambda)};var implementMethod=function implementMethod(object,lambda){return implement(this,object,lambda)};var implement=Method("implement@method");var define=Method("define@method");function _implement(method,object,lambda){return defineProperty(object,method.toString(),{enumerable:false,configurable:false,writable:false,value:lambda})}function _define(method,Type,lambda){var type=Type&&typefy.call(Type.prototype);if(!lambda)Default[method]=Type;else if(Type===null)Null[method]=lambda;else if(Type===void 0)Void[method]=lambda;else if(type!=="[object Object]"&&Type.name){var Bulitin=builtin[Type.name]||(builtin[Type.name]=new ObjectType);Bulitin[method]=lambda}else if(Type.name==="Object")builtin.Object[method]=lambda;else if(Type.call===void 0){var index=host.indexOf(lambda);if(index<0)index=host.push(lambda)-1;implement("!"+method,Type.prototype,index)}else implement(method,Type.prototype,lambda)}_define(define,_define);_define(implement,_implement);Method.implement=implement;Method.define=define;Method.Method=Method;Method.method=Method;Method.builtin=builtin;Method.host=host;module.exports=Method},{}],22:[function(require,module,exports){module.exports={name:"escodegen",description:"ECMAScript code generator",homepage:"http://github.com/Constellation/escodegen.html",main:"escodegen.js",bin:{esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},version:"1.0.1-dev",engines:{node:">=0.4.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",url:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/Constellation/escodegen.git"},dependencies:{esprima:"~1.0.2",estraverse:"~1.4.0","source-map":"~0.1.30"},optionalDependencies:{"source-map":"~0.1.30"},devDependencies:{"esprima-moz":"*","commonjs-everywhere":"~0.8.0",q:"*",bower:"*",semver:"*",chai:"~1.7.2","grunt-contrib-jshint":"~0.5.0","grunt-cli":"~0.1.9",grunt:"~0.4.1","grunt-mocha-test":"~0.6.2"},licenses:[{type:"BSD",url:"http://github.com/Constellation/escodegen/raw/master/LICENSE.BSD"}],scripts:{test:"grunt travis","unit-test":"grunt test",lint:"grunt lint",release:"node tools/release.js","build-min":"./node_modules/.bin/cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"./node_modules/.bin/cjsify -a path: tools/entry-point.js > escodegen.browser.js"},readme:"\n### Escodegen [![Build Status](https://secure.travis-ci.org/Constellation/escodegen.png)](http://travis-ci.org/Constellation/escodegen) [![Build Status](https://drone.io/github.com/Constellation/escodegen/status.png)](https://drone.io/github.com/Constellation/escodegen/latest)\n\nEscodegen ([escodegen](http://github.com/Constellation/escodegen)) is\n[ECMAScript](http://www.ecma-international.org/publications/standards/Ecma-262.htm)\n(also popularly known as [JavaScript](http://en.wikipedia.org/wiki/JavaScript>JavaScript))\ncode generator from [Parser API](https://developer.mozilla.org/en/SpiderMonkey/Parser_API) AST.\nSee [online generator demo](http://constellation.github.com/escodegen/demo/index.html).\n\n\n### Install\n\nEscodegen can be used in a web browser:\n\n    <script src=\"escodegen.browser.js\"></script>\n\nescodegen.browser.js is found in tagged-revision. See Tags on GitHub.\n\nOr in a Node.js application via the package manager:\n\n    npm install escodegen\n\n### Usage\n\nA simple example: the program\n\n    escodegen.generate({\n        type: 'BinaryExpression',\n        operator: '+',\n        left: { type: 'Literal', value: 40 },\n        right: { type: 'Literal', value: 2 }\n    });\n\nproduces the string `'40 + 2'`\n\nSee the [API page](https://github.com/Constellation/escodegen/wiki/API) for\noptions. To run the tests, execute `npm test` in the root directory.\n\n### License\n\n#### Escodegen\n\nCopyright (C) 2012 [Yusuke Suzuki](http://github.com/Constellation)\n (twitter: [@Constellation](http://twitter.com/Constellation)) and other contributors.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright\n    notice, this list of conditions and the following disclaimer.\n\n  * Redistributions in binary form must reproduce the above copyright\n    notice, this list of conditions and the following disclaimer in the\n    documentation and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\nARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY\nDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\nON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\nTHIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n#### source-map\n\nSourceNodeMocks has a limited interface of mozilla/source-map SourceNode implementations.\n\nCopyright (c) 2009-2011, Mozilla Foundation and contributors\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the names of the Mozilla Foundation nor the names of project\n  contributors may be used to endorse or promote products derived from this\n  software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n",readmeFilename:"README.md",bugs:{url:"https://github.com/Constellation/escodegen/issues"},_id:"escodegen@1.0.1-dev",dist:{shasum:"78445f6b3835f534d13fa031f09634860d8c2872"},_resolved:"git://github.com/Constellation/escodegen.git#7590952769534af72dd61c132fbd68c50294fbb6",_from:"escodegen@git://github.com/Constellation/escodegen.git#master"}
},{}],18:[function(require,module,exports){(function(global){(function(){"use strict";var Syntax,Precedence,BinaryPrecedence,Regex,SourceNode,estraverse,isArray,base,indent,json,renumber,hexadecimal,quotes,escapeless,newline,space,parentheses,semicolons,safeConcatenation,directive,extra,parse,sourceMap,FORMAT_MINIFY,FORMAT_DEFAULTS;estraverse=require("estraverse");Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};Precedence={Sequence:0,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Unary:13,Postfix:14,Call:15,New:16,Member:17,Primary:18};BinaryPrecedence={"||":Precedence.LogicalOR,"&&":Precedence.LogicalAND,"|":Precedence.BitwiseOR,"^":Precedence.BitwiseXOR,"&":Precedence.BitwiseAND,"==":Precedence.Equality,"!=":Precedence.Equality,"===":Precedence.Equality,"!==":Precedence.Equality,is:Precedence.Equality,isnt:Precedence.Equality,"<":Precedence.Relational,">":Precedence.Relational,"<=":Precedence.Relational,">=":Precedence.Relational,"in":Precedence.Relational,"instanceof":Precedence.Relational,"<<":Precedence.BitwiseSHIFT,">>":Precedence.BitwiseSHIFT,">>>":Precedence.BitwiseSHIFT,"+":Precedence.Additive,"-":Precedence.Additive,"*":Precedence.Multiplicative,"%":Precedence.Multiplicative,"/":Precedence.Multiplicative};Regex={NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")};function getDefaultOptions(){return{indent:null,base:null,parse:null,comment:false,format:{indent:{style:"    ",base:0,adjustMultilineComment:false},newline:"\n",space:" ",json:false,renumber:false,hexadecimal:false,quotes:"single",escapeless:false,compact:false,parentheses:true,semicolons:true,safeConcatenation:false},moz:{starlessGenerator:false,parenthesizedComprehensionBlock:false},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:false,directive:false,verbatim:null}}function stringToArray(str){var length=str.length,result=[],i;for(i=0;i<length;++i){result[i]=str.charAt(i)}return result}function stringRepeat(str,num){var result="";for(num|=0;num>0;num>>>=1,str+=str){if(num&1){result+=str}}return result}isArray=Array.isArray;if(!isArray){isArray=function isArray(array){return Object.prototype.toString.call(array)==="[object Array]"}}function SourceNodeMock(line,column,filename,chunk){var result=[];function flatten(input){var i,iz;if(isArray(input)){for(i=0,iz=input.length;i<iz;++i){flatten(input[i])}}else if(input instanceof SourceNodeMock){result.push(input)}else if(typeof input==="string"&&input){result.push(input)}}flatten(chunk);this.children=result}SourceNodeMock.prototype.toString=function toString(){var res="",i,iz,node;for(i=0,iz=this.children.length;i<iz;++i){node=this.children[i];if(node instanceof SourceNodeMock){res+=node.toString()}else{res+=node}}return res};SourceNodeMock.prototype.replaceRight=function replaceRight(pattern,replacement){var last=this.children[this.children.length-1];if(last instanceof SourceNodeMock){last.replaceRight(pattern,replacement)}else if(typeof last==="string"){this.children[this.children.length-1]=last.replace(pattern,replacement)}else{this.children.push("".replace(pattern,replacement))}return this};SourceNodeMock.prototype.join=function join(sep){var i,iz,result;result=[];iz=this.children.length;if(iz>0){--iz;for(i=0;i<iz;++i){result.push(this.children[i],sep)}result.push(this.children[iz]);this.children=result}return this};function hasLineTerminator(str){return/[\r\n]/g.test(str)}function endsWithLineTerminator(str){var ch=str.charAt(str.length-1);return ch&&isLineTerminator(ch)}function updateDeeply(target,override){var key,val;function isHashObject(target){return typeof target==="object"&&target instanceof Object&&!(target instanceof RegExp)}for(key in override){if(override.hasOwnProperty(key)){val=override[key];if(isHashObject(val)){if(isHashObject(target[key])){updateDeeply(target[key],val)}else{target[key]=updateDeeply({},val)}}else{target[key]=val}}}return target}function generateNumber(value){var result,point,temp,exponent,pos;if(value!==value){throw new Error("Numeric literal whose value is NaN")}if(value<0||value===0&&1/value<0){throw new Error("Numeric literal whose value is negative")}if(value===1/0){return json?"null":renumber?"1e400":"1e+400"}result=""+value;if(!renumber||result.length<3){return result}point=result.indexOf(".");if(!json&&result.charAt(0)==="0"&&point===1){point=0;result=result.slice(1)}temp=result;result=result.replace("e+","e");exponent=0;if((pos=temp.indexOf("e"))>0){exponent=+temp.slice(pos+1);temp=temp.slice(0,pos)}if(point>=0){exponent-=temp.length-point-1;temp=+(temp.slice(0,point)+temp.slice(point+1))+""}pos=0;while(temp.charAt(temp.length+pos-1)==="0"){--pos}if(pos!==0){exponent-=pos;temp=temp.slice(0,pos)}if(exponent!==0){temp+="e"+exponent}if((temp.length<result.length||hexadecimal&&value>1e12&&Math.floor(value)===value&&(temp="0x"+value.toString(16)).length<result.length)&&+temp===value){result=temp}return result}function escapeRegExpCharacter(ch,previousIsBackslash){if((ch&~1)===8232){return(previousIsBackslash?"u":"\\u")+(ch===8232?"2028":"2029")}else if(ch===10||ch===13){return(previousIsBackslash?"":"\\")+(ch===10?"n":"r")}return String.fromCharCode(ch)}function generateRegExp(reg){var match,result,flags,i,iz,ch,characterInBrack,previousIsBackslash;result=reg.toString();if(reg.source){match=result.match(/\/([^/]*)$/);if(!match){return result}flags=match[1];result="";characterInBrack=false;previousIsBackslash=false;for(i=0,iz=reg.source.length;i<iz;++i){ch=reg.source.charCodeAt(i);if(!previousIsBackslash){if(characterInBrack){if(ch===93){characterInBrack=false}}else{if(ch===47){result+="\\"}else if(ch===91){characterInBrack=true}}result+=escapeRegExpCharacter(ch,previousIsBackslash);previousIsBackslash=ch===92}else{result+=escapeRegExpCharacter(ch,previousIsBackslash);previousIsBackslash=false}}return"/"+result+"/"+flags}return result}function escapeAllowedCharacter(ch,next){var code=ch.charCodeAt(0),hex=code.toString(16),result="\\";switch(ch){case"\b":result+="b";break;case"\f":result+="f";break;case"	":result+="t";break;default:if(json||code>255){result+="u"+"0000".slice(hex.length)+hex}else if(ch==="\x00"&&"0123456789".indexOf(next)<0){result+="0"}else if(ch===""){result+="x0B"}else{result+="x"+"00".slice(hex.length)+hex}break}return result}function escapeDisallowedCharacter(ch){var result="\\";switch(ch){case"\\":result+="\\";break;case"\n":result+="n";break;case"\r":result+="r";break;case"\u2028":result+="u2028";break;case"\u2029":result+="u2029";break;default:throw new Error("Incorrectly classified character")}return result}function escapeDirective(str){var i,iz,ch,buf,quote;buf=str;if(typeof buf[0]==="undefined"){buf=stringToArray(buf)}quote=quotes==="double"?'"':"'";for(i=0,iz=buf.length;i<iz;++i){ch=buf[i];if(ch==="'"){quote='"';break}else if(ch==='"'){quote="'";break}else if(ch==="\\"){++i}}return quote+str+quote}function escapeString(str){var result="",i,len,ch,singleQuotes=0,doubleQuotes=0,single;if(typeof str[0]==="undefined"){str=stringToArray(str)}for(i=0,len=str.length;i<len;++i){ch=str[i];if(ch==="'"){++singleQuotes}else if(ch==='"'){++doubleQuotes}else if(ch==="/"&&json){result+="\\"}else if("\\\n\r\u2028\u2029".indexOf(ch)>=0){result+=escapeDisallowedCharacter(ch);continue}else if(json&&ch<" "||!(json||escapeless||ch>=" "&&ch<="~")){result+=escapeAllowedCharacter(ch,str[i+1]);continue}result+=ch}single=!(quotes==="double"||quotes==="auto"&&doubleQuotes<singleQuotes);str=result;result=single?"'":'"';if(typeof str[0]==="undefined"){str=stringToArray(str)}for(i=0,len=str.length;i<len;++i){ch=str[i];if(ch==="'"&&single||ch==='"'&&!single){result+="\\"}result+=ch}return result+(single?"'":'"')}function isWhiteSpace(ch){return"	\f  ".indexOf(ch)>=0||ch.charCodeAt(0)>=5760&&" ᠎             　﻿".indexOf(ch)>=0}function isLineTerminator(ch){return"\n\r\u2028\u2029".indexOf(ch)>=0}function isIdentifierPart(ch){return ch==="$"||ch==="_"||ch==="\\"||ch>="a"&&ch<="z"||ch>="A"&&ch<="Z"||ch>="0"&&ch<="9"||ch.charCodeAt(0)>=128&&Regex.NonAsciiIdentifierPart.test(ch)}function isDecimalDigit(ch){return ch>=48&&ch<=57}function toSourceNode(generated,node){if(node==null){if(generated instanceof SourceNode){return generated}else{node={}}}if(node.loc==null){return new SourceNode(null,null,sourceMap,generated,node.name||null)}return new SourceNode(node.loc.start.line,node.loc.start.column,sourceMap===true?node.loc.source||null:sourceMap,generated,node.name||null)}function noEmptySpace(){return space?space:" "}function join(left,right){var leftSource=toSourceNode(left).toString(),rightSource=toSourceNode(right).toString(),leftChar=leftSource.charAt(leftSource.length-1),rightChar=rightSource.charAt(0);if((leftChar==="+"||leftChar==="-")&&leftChar===rightChar||isIdentifierPart(leftChar)&&isIdentifierPart(rightChar)||leftChar==="/"&&rightChar==="i"){return[left,noEmptySpace(),right]}else if(isWhiteSpace(leftChar)||isLineTerminator(leftChar)||isWhiteSpace(rightChar)||isLineTerminator(rightChar)){return[left,right]}return[left,space,right]}function addIndent(stmt){return[base,stmt]}function withIndent(fn){var previousBase,result;previousBase=base;base+=indent;result=fn.call(this,base);base=previousBase;return result}function calculateSpaces(str){var i;for(i=str.length-1;i>=0;--i){if(isLineTerminator(str.charAt(i))){break}}return str.length-1-i}function adjustMultilineComment(value,specialBase){var array,i,len,line,j,spaces,previousBase;array=value.split(/\r\n|[\r\n]/);spaces=Number.MAX_VALUE;for(i=1,len=array.length;i<len;++i){line=array[i];j=0;while(j<line.length&&isWhiteSpace(line[j])){++j}if(spaces>j){spaces=j}}if(typeof specialBase!=="undefined"){previousBase=base;if(array[1][spaces]==="*"){specialBase+=" "}base=specialBase}else{if(spaces&1){--spaces}previousBase=base}for(i=1,len=array.length;i<len;++i){array[i]=toSourceNode(addIndent(array[i].slice(spaces))).join("")}base=previousBase;return array.join("\n")}function generateComment(comment,specialBase){if(comment.type==="Line"){if(endsWithLineTerminator(comment.value)){return"//"+comment.value}else{return"//"+comment.value+"\n"}}if(extra.format.indent.adjustMultilineComment&&/[\n\r]/.test(comment.value)){return adjustMultilineComment("/*"+comment.value+"*/",specialBase)}return"/*"+comment.value+"*/"}function addCommentsToStatement(stmt,result){var i,len,comment,save,tailingToStatement,specialBase,fragment;if(stmt.leadingComments&&stmt.leadingComments.length>0){save=result;comment=stmt.leadingComments[0];result=[];if(safeConcatenation&&stmt.type===Syntax.Program&&stmt.body.length===0){result.push("\n")}result.push(generateComment(comment));if(!endsWithLineTerminator(toSourceNode(result).toString())){result.push("\n")}for(i=1,len=stmt.leadingComments.length;i<len;++i){comment=stmt.leadingComments[i];fragment=[generateComment(comment)];if(!endsWithLineTerminator(toSourceNode(fragment).toString())){fragment.push("\n")}result.push(addIndent(fragment))}result.push(addIndent(save))}if(stmt.trailingComments){tailingToStatement=!endsWithLineTerminator(toSourceNode(result).toString());specialBase=stringRepeat(" ",calculateSpaces(toSourceNode([base,result,indent]).toString()));for(i=0,len=stmt.trailingComments.length;i<len;++i){comment=stmt.trailingComments[i];if(tailingToStatement){if(i===0){result=[result,indent]}else{result=[result,specialBase]}result.push(generateComment(comment,specialBase))}else{result=[result,addIndent(generateComment(comment))]}if(i!==len-1&&!endsWithLineTerminator(toSourceNode(result).toString())){result=[result,"\n"]}}}return result}function parenthesize(text,current,should){if(current<should){return["(",text,")"]}return text}function maybeBlock(stmt,semicolonOptional,functionBody){var result,noLeadingComment;noLeadingComment=!extra.comment||!stmt.leadingComments;if(stmt.type===Syntax.BlockStatement&&noLeadingComment){return[space,generateStatement(stmt,{functionBody:functionBody})]}if(stmt.type===Syntax.EmptyStatement&&noLeadingComment){return";"}withIndent(function(){result=[newline,addIndent(generateStatement(stmt,{semicolonOptional:semicolonOptional,functionBody:functionBody}))]});return result}function maybeBlockSuffix(stmt,result){var ends=endsWithLineTerminator(toSourceNode(result).toString());if(stmt.type===Syntax.BlockStatement&&(!extra.comment||!stmt.leadingComments)&&!ends){return[result,space]}if(ends){return[result,base]}return[result,newline,base]}function generateVerbatim(expr,option){var i,result;result=expr[extra.verbatim].split(/\r\n|\n/);for(i=1;i<result.length;i++){result[i]=newline+base+result[i]}result=parenthesize(result,Precedence.Sequence,option.precedence);return toSourceNode(result,expr)}function generateIdentifier(node){return toSourceNode(node.name,node)}function generateFunctionBody(node){var result,i,len,expr,arrow;arrow=node.type===Syntax.ArrowFunctionExpression;if(arrow&&node.params.length===1&&node.params[0].type===Syntax.Identifier){result=[generateIdentifier(node.params[0])]}else{result=["("];for(i=0,len=node.params.length;i<len;++i){result.push(generateIdentifier(node.params[i]));if(i+1<len){result.push(","+space)}}result.push(")")}if(arrow){result.push(space,"=>")}if(node.expression){result.push(space);expr=generateExpression(node.body,{precedence:Precedence.Assignment,allowIn:true,allowCall:true});if(expr.toString().charAt(0)==="{"){expr=["(",expr,")"]}result.push(expr)}else{result.push(maybeBlock(node.body,false,true))}return result}function generateExpression(expr,option){var result,precedence,type,currentPrecedence,i,len,raw,fragment,multiline,leftChar,leftSource,rightChar,allowIn,allowCall,allowUnparenthesizedNew,property;precedence=option.precedence;allowIn=option.allowIn;allowCall=option.allowCall;type=expr.type||option.type;if(extra.verbatim&&expr.hasOwnProperty(extra.verbatim)){return generateVerbatim(expr,option)}switch(type){case Syntax.SequenceExpression:result=[];allowIn|=Precedence.Sequence<precedence;for(i=0,len=expr.expressions.length;i<len;++i){result.push(generateExpression(expr.expressions[i],{precedence:Precedence.Assignment,allowIn:allowIn,allowCall:true}));if(i+1<len){result.push(","+space)}}result=parenthesize(result,Precedence.Sequence,precedence);break;case Syntax.AssignmentExpression:allowIn|=Precedence.Assignment<precedence;result=parenthesize([generateExpression(expr.left,{precedence:Precedence.Call,allowIn:allowIn,allowCall:true}),space+expr.operator+space,generateExpression(expr.right,{precedence:Precedence.Assignment,allowIn:allowIn,allowCall:true})],Precedence.Assignment,precedence);break;case Syntax.ArrowFunctionExpression:allowIn|=Precedence.ArrowFunction<precedence;result=parenthesize(generateFunctionBody(expr),Precedence.ArrowFunction,precedence);break;case Syntax.ConditionalExpression:allowIn|=Precedence.Conditional<precedence;result=parenthesize([generateExpression(expr.test,{precedence:Precedence.LogicalOR,allowIn:allowIn,allowCall:true}),space+"?"+space,generateExpression(expr.consequent,{precedence:Precedence.Assignment,allowIn:allowIn,allowCall:true}),space+":"+space,generateExpression(expr.alternate,{precedence:Precedence.Assignment,allowIn:allowIn,allowCall:true})],Precedence.Conditional,precedence);break;case Syntax.LogicalExpression:case Syntax.BinaryExpression:currentPrecedence=BinaryPrecedence[expr.operator];allowIn|=currentPrecedence<precedence;fragment=generateExpression(expr.left,{precedence:currentPrecedence,allowIn:allowIn,allowCall:true});leftSource=fragment.toString();if(leftSource.charAt(leftSource.length-1)==="/"&&isIdentifierPart(expr.operator.charAt(0))){result=[fragment,noEmptySpace(),expr.operator]}else{result=join(fragment,expr.operator)}fragment=generateExpression(expr.right,{precedence:currentPrecedence+1,allowIn:allowIn,allowCall:true});if(expr.operator==="/"&&fragment.toString().charAt(0)==="/"||expr.operator.slice(-1)==="<"&&fragment.toString().slice(0,3)==="!--"){result.push(noEmptySpace(),fragment)}else{result=join(result,fragment)}if(expr.operator==="in"&&!allowIn){result=["(",result,")"]}else{result=parenthesize(result,currentPrecedence,precedence)}break;case Syntax.CallExpression:result=[generateExpression(expr.callee,{precedence:Precedence.Call,allowIn:true,allowCall:true,allowUnparenthesizedNew:false})];result.push("(");for(i=0,len=expr["arguments"].length;i<len;++i){result.push(generateExpression(expr["arguments"][i],{precedence:Precedence.Assignment,allowIn:true,allowCall:true}));if(i+1<len){result.push(","+space)}}result.push(")");if(!allowCall){result=["(",result,")"]}else{result=parenthesize(result,Precedence.Call,precedence)}break;case Syntax.NewExpression:len=expr["arguments"].length;allowUnparenthesizedNew=option.allowUnparenthesizedNew===undefined||option.allowUnparenthesizedNew;result=join("new",generateExpression(expr.callee,{precedence:Precedence.New,allowIn:true,allowCall:false,allowUnparenthesizedNew:allowUnparenthesizedNew&&!parentheses&&len===0}));if(!allowUnparenthesizedNew||parentheses||len>0){result.push("(");for(i=0;i<len;++i){result.push(generateExpression(expr["arguments"][i],{precedence:Precedence.Assignment,allowIn:true,allowCall:true}));if(i+1<len){result.push(","+space)}}result.push(")")}result=parenthesize(result,Precedence.New,precedence);break;case Syntax.MemberExpression:result=[generateExpression(expr.object,{precedence:Precedence.Call,allowIn:true,allowCall:allowCall,allowUnparenthesizedNew:false})];if(expr.computed){result.push("[",generateExpression(expr.property,{precedence:Precedence.Sequence,allowIn:true,allowCall:allowCall}),"]")}else{if(expr.object.type===Syntax.Literal&&typeof expr.object.value==="number"){fragment=toSourceNode(result).toString();if(fragment.indexOf(".")<0&&!/[eExX]/.test(fragment)&&isDecimalDigit(fragment.charCodeAt(fragment.length-1))&&!(fragment.length>=2&&fragment.charCodeAt(0)===48)){result.push(".")}}result.push(".",generateIdentifier(expr.property))}result=parenthesize(result,Precedence.Member,precedence);break;case Syntax.UnaryExpression:fragment=generateExpression(expr.argument,{precedence:Precedence.Unary,allowIn:true,allowCall:true});if(space===""){result=join(expr.operator,fragment)}else{result=[expr.operator];if(expr.operator.length>2){result=join(result,fragment)}else{leftSource=toSourceNode(result).toString();leftChar=leftSource.charAt(leftSource.length-1);rightChar=fragment.toString().charAt(0);if((leftChar==="+"||leftChar==="-")&&leftChar===rightChar||isIdentifierPart(leftChar)&&isIdentifierPart(rightChar)){result.push(noEmptySpace(),fragment)}else{result.push(fragment)}}}result=parenthesize(result,Precedence.Unary,precedence);break;case Syntax.YieldExpression:if(expr.delegate){result="yield*"}else{result="yield"}if(expr.argument){result=join(result,generateExpression(expr.argument,{precedence:Precedence.Assignment,allowIn:true,allowCall:true}))}break;case Syntax.UpdateExpression:if(expr.prefix){result=parenthesize([expr.operator,generateExpression(expr.argument,{precedence:Precedence.Unary,allowIn:true,allowCall:true})],Precedence.Unary,precedence)}else{result=parenthesize([generateExpression(expr.argument,{precedence:Precedence.Postfix,allowIn:true,allowCall:true}),expr.operator],Precedence.Postfix,precedence)}break;case Syntax.FunctionExpression:result="function";if(expr.id){result=[result,noEmptySpace(),generateIdentifier(expr.id),generateFunctionBody(expr)]}else{result=[result+space,generateFunctionBody(expr)]}break;case Syntax.ArrayPattern:case Syntax.ArrayExpression:if(!expr.elements.length){result="[]";break}multiline=expr.elements.length>1;result=["[",multiline?newline:""];withIndent(function(indent){for(i=0,len=expr.elements.length;i<len;++i){if(!expr.elements[i]){if(multiline){result.push(indent)}if(i+1===len){result.push(",")}}else{result.push(multiline?indent:"",generateExpression(expr.elements[i],{precedence:Precedence.Assignment,allowIn:true,allowCall:true}))}if(i+1<len){result.push(","+(multiline?newline:space))}}});if(multiline&&!endsWithLineTerminator(toSourceNode(result).toString())){result.push(newline)}result.push(multiline?base:"","]");break;case Syntax.Property:if(expr.kind==="get"||expr.kind==="set"){result=[expr.kind,noEmptySpace(),generateExpression(expr.key,{precedence:Precedence.Sequence,allowIn:true,allowCall:true}),generateFunctionBody(expr.value)]}else{if(expr.shorthand){result=generateExpression(expr.key,{precedence:Precedence.Sequence,allowIn:true,allowCall:true})}else if(expr.method){result=[];if(expr.value.generator){result.push("*")}result.push(generateExpression(expr.key,{precedence:Precedence.Sequence,allowIn:true,allowCall:true}),generateFunctionBody(expr.value))}else{result=[generateExpression(expr.key,{precedence:Precedence.Sequence,allowIn:true,allowCall:true}),":"+space,generateExpression(expr.value,{precedence:Precedence.Assignment,allowIn:true,allowCall:true})]}}break;case Syntax.ObjectExpression:if(!expr.properties.length){result="{}";break}multiline=expr.properties.length>1;withIndent(function(){fragment=generateExpression(expr.properties[0],{precedence:Precedence.Sequence,allowIn:true,allowCall:true,type:Syntax.Property})});if(!multiline){if(!hasLineTerminator(toSourceNode(fragment).toString())){result=["{",space,fragment,space,"}"];break}}withIndent(function(indent){result=["{",newline,indent,fragment];if(multiline){result.push(","+newline);for(i=1,len=expr.properties.length;i<len;++i){result.push(indent,generateExpression(expr.properties[i],{precedence:Precedence.Sequence,allowIn:true,allowCall:true,type:Syntax.Property}));if(i+1<len){result.push(","+newline)}}}});if(!endsWithLineTerminator(toSourceNode(result).toString())){result.push(newline)}result.push(base,"}");break;case Syntax.ObjectPattern:if(!expr.properties.length){result="{}";break}multiline=false;if(expr.properties.length===1){property=expr.properties[0];if(property.value.type!==Syntax.Identifier){multiline=true}}else{for(i=0,len=expr.properties.length;i<len;++i){property=expr.properties[i];if(!property.shorthand){multiline=true;break}}}result=["{",multiline?newline:""];withIndent(function(indent){for(i=0,len=expr.properties.length;i<len;++i){result.push(multiline?indent:"",generateExpression(expr.properties[i],{precedence:Precedence.Sequence,allowIn:true,allowCall:true}));if(i+1<len){result.push(","+(multiline?newline:space))}}});if(multiline&&!endsWithLineTerminator(toSourceNode(result).toString())){result.push(newline)}result.push(multiline?base:"","}");break;case Syntax.ThisExpression:result="this";break;case Syntax.Identifier:result=generateIdentifier(expr);break;case Syntax.Literal:if(expr.hasOwnProperty("raw")&&parse){try{raw=parse(expr.raw).body[0].expression;if(raw.type===Syntax.Literal){if(raw.value===expr.value){result=expr.raw;break}}}catch(e){}}if(expr.value===null){result="null";break}if(typeof expr.value==="string"){result=escapeString(expr.value);break}if(typeof expr.value==="number"){result=generateNumber(expr.value);break}if(typeof expr.value==="boolean"){result=expr.value?"true":"false";break}result=generateRegExp(expr.value);break;case Syntax.ComprehensionExpression:result=["[",generateExpression(expr.body,{precedence:Precedence.Assignment,allowIn:true,allowCall:true})];if(expr.blocks){for(i=0,len=expr.blocks.length;i<len;++i){fragment=generateExpression(expr.blocks[i],{precedence:Precedence.Sequence,allowIn:true,allowCall:true});result=join(result,fragment)}}if(expr.filter){result=join(result,"if"+space);fragment=generateExpression(expr.filter,{precedence:Precedence.Sequence,allowIn:true,allowCall:true});if(extra.moz.parenthesizedComprehensionBlock){result=join(result,["(",fragment,")"])}else{result=join(result,fragment)}}result.push("]");break;case Syntax.ComprehensionBlock:if(expr.left.type===Syntax.VariableDeclaration){fragment=[expr.left.kind,noEmptySpace(),generateStatement(expr.left.declarations[0],{allowIn:false})]}else{fragment=generateExpression(expr.left,{precedence:Precedence.Call,allowIn:true,allowCall:true})}fragment=join(fragment,expr.of?"of":"in");fragment=join(fragment,generateExpression(expr.right,{precedence:Precedence.Sequence,allowIn:true,allowCall:true}));if(extra.moz.parenthesizedComprehensionBlock){result=["for"+space+"(",fragment,")"]}else{result=join("for"+space,fragment)}break;default:throw new Error("Unknown expression type: "+expr.type)}return toSourceNode(result,expr)}function generateStatement(stmt,option){var i,len,result,node,allowIn,functionBody,directiveContext,fragment,semicolon;allowIn=true;semicolon=";";functionBody=false;directiveContext=false;if(option){allowIn=option.allowIn===undefined||option.allowIn;if(!semicolons&&option.semicolonOptional===true){semicolon=""}functionBody=option.functionBody;directiveContext=option.directiveContext}switch(stmt.type){case Syntax.BlockStatement:result=["{",newline];withIndent(function(){for(i=0,len=stmt.body.length;i<len;++i){fragment=addIndent(generateStatement(stmt.body[i],{semicolonOptional:i===len-1,directiveContext:functionBody}));result.push(fragment);if(!endsWithLineTerminator(toSourceNode(fragment).toString())){result.push(newline)}}});result.push(addIndent("}"));break;case Syntax.BreakStatement:if(stmt.label){result="break "+stmt.label.name+semicolon}else{result="break"+semicolon}break;case Syntax.ContinueStatement:if(stmt.label){result="continue "+stmt.label.name+semicolon}else{result="continue"+semicolon}break;case Syntax.DirectiveStatement:if(stmt.raw){result=stmt.raw+semicolon}else{result=escapeDirective(stmt.directive)+semicolon}break;case Syntax.DoWhileStatement:result=join("do",maybeBlock(stmt.body));result=maybeBlockSuffix(stmt.body,result);result=join(result,["while"+space+"(",generateExpression(stmt.test,{precedence:Precedence.Sequence,allowIn:true,allowCall:true}),")"+semicolon]);break;case Syntax.CatchClause:withIndent(function(){result=["catch"+space+"(",generateExpression(stmt.param,{precedence:Precedence.Sequence,allowIn:true,allowCall:true}),")"]});result.push(maybeBlock(stmt.body));break;case Syntax.DebuggerStatement:result="debugger"+semicolon;break;case Syntax.EmptyStatement:result=";";break;case Syntax.ExpressionStatement:result=[generateExpression(stmt.expression,{precedence:Precedence.Sequence,allowIn:true,allowCall:true})];fragment=toSourceNode(result).toString();if(fragment.charAt(0)==="{"||fragment.slice(0,8)==="function"&&" (".indexOf(fragment.charAt(8))>=0||directive&&directiveContext&&stmt.expression.type===Syntax.Literal&&typeof stmt.expression.value==="string"){result=["(",result,")"+semicolon]}else{result.push(semicolon)}break;case Syntax.VariableDeclarator:if(stmt.init){result=[generateExpression(stmt.id,{precedence:Precedence.Assignment,allowIn:allowIn,allowCall:true}),space,"=",space,generateExpression(stmt.init,{precedence:Precedence.Assignment,allowIn:allowIn,allowCall:true})]}else{result=generateIdentifier(stmt.id)}break;case Syntax.VariableDeclaration:result=[stmt.kind];if(stmt.declarations.length===1&&stmt.declarations[0].init&&stmt.declarations[0].init.type===Syntax.FunctionExpression){result.push(noEmptySpace(),generateStatement(stmt.declarations[0],{allowIn:allowIn}))}else{withIndent(function(){node=stmt.declarations[0];if(extra.comment&&node.leadingComments){result.push("\n",addIndent(generateStatement(node,{allowIn:allowIn})))}else{result.push(noEmptySpace(),generateStatement(node,{allowIn:allowIn}))}for(i=1,len=stmt.declarations.length;i<len;++i){node=stmt.declarations[i];if(extra.comment&&node.leadingComments){result.push(","+newline,addIndent(generateStatement(node,{allowIn:allowIn})))}else{result.push(","+space,generateStatement(node,{allowIn:allowIn}))}}})}result.push(semicolon);break;case Syntax.ThrowStatement:result=[join("throw",generateExpression(stmt.argument,{precedence:Precedence.Sequence,allowIn:true,allowCall:true})),semicolon];break;case Syntax.TryStatement:result=["try",maybeBlock(stmt.block)];result=maybeBlockSuffix(stmt.block,result);if(stmt.handlers){for(i=0,len=stmt.handlers.length;i<len;++i){result=join(result,generateStatement(stmt.handlers[i]));if(stmt.finalizer||i+1!==len){result=maybeBlockSuffix(stmt.handlers[i].body,result)}}}else{if(stmt.handler){result=join(result,generateStatement(stmt.handler));if(stmt.finalizer||stmt.guardedHandlers.length>0){result=maybeBlockSuffix(stmt.handler.body,result)}}for(i=0,len=stmt.guardedHandlers.length;i<len;++i){result=join(result,generateStatement(stmt.guardedHandlers[i]));if(stmt.finalizer||i+1!==len){result=maybeBlockSuffix(stmt.guardedHandlers[i].body,result)}}}if(stmt.finalizer){result=join(result,["finally",maybeBlock(stmt.finalizer)])}break;case Syntax.SwitchStatement:withIndent(function(){result=["switch"+space+"(",generateExpression(stmt.discriminant,{precedence:Precedence.Sequence,allowIn:true,allowCall:true}),")"+space+"{"+newline]});if(stmt.cases){for(i=0,len=stmt.cases.length;i<len;++i){fragment=addIndent(generateStatement(stmt.cases[i],{semicolonOptional:i===len-1}));result.push(fragment);if(!endsWithLineTerminator(toSourceNode(fragment).toString())){result.push(newline)}}}result.push(addIndent("}"));break;case Syntax.SwitchCase:withIndent(function(){if(stmt.test){result=[join("case",generateExpression(stmt.test,{precedence:Precedence.Sequence,allowIn:true,allowCall:true})),":"]}else{result=["default:"]}i=0;len=stmt.consequent.length;if(len&&stmt.consequent[0].type===Syntax.BlockStatement){fragment=maybeBlock(stmt.consequent[0]);
result.push(fragment);i=1}if(i!==len&&!endsWithLineTerminator(toSourceNode(result).toString())){result.push(newline)}for(;i<len;++i){fragment=addIndent(generateStatement(stmt.consequent[i],{semicolonOptional:i===len-1&&semicolon===""}));result.push(fragment);if(i+1!==len&&!endsWithLineTerminator(toSourceNode(fragment).toString())){result.push(newline)}}});break;case Syntax.IfStatement:withIndent(function(){result=["if"+space+"(",generateExpression(stmt.test,{precedence:Precedence.Sequence,allowIn:true,allowCall:true}),")"]});if(stmt.alternate){result.push(maybeBlock(stmt.consequent));result=maybeBlockSuffix(stmt.consequent,result);if(stmt.alternate.type===Syntax.IfStatement){result=join(result,["else ",generateStatement(stmt.alternate,{semicolonOptional:semicolon===""})])}else{result=join(result,join("else",maybeBlock(stmt.alternate,semicolon==="")))}}else{result.push(maybeBlock(stmt.consequent,semicolon===""))}break;case Syntax.ForStatement:withIndent(function(){result=["for"+space+"("];if(stmt.init){if(stmt.init.type===Syntax.VariableDeclaration){result.push(generateStatement(stmt.init,{allowIn:false}))}else{result.push(generateExpression(stmt.init,{precedence:Precedence.Sequence,allowIn:false,allowCall:true}),";")}}else{result.push(";")}if(stmt.test){result.push(space,generateExpression(stmt.test,{precedence:Precedence.Sequence,allowIn:true,allowCall:true}),";")}else{result.push(";")}if(stmt.update){result.push(space,generateExpression(stmt.update,{precedence:Precedence.Sequence,allowIn:true,allowCall:true}),")")}else{result.push(")")}});result.push(maybeBlock(stmt.body,semicolon===""));break;case Syntax.ForInStatement:result=["for"+space+"("];withIndent(function(){if(stmt.left.type===Syntax.VariableDeclaration){withIndent(function(){result.push(stmt.left.kind+noEmptySpace(),generateStatement(stmt.left.declarations[0],{allowIn:false}))})}else{result.push(generateExpression(stmt.left,{precedence:Precedence.Call,allowIn:true,allowCall:true}))}result=join(result,"in");result=[join(result,generateExpression(stmt.right,{precedence:Precedence.Sequence,allowIn:true,allowCall:true})),")"]});result.push(maybeBlock(stmt.body,semicolon===""));break;case Syntax.LabeledStatement:result=[stmt.label.name+":",maybeBlock(stmt.body,semicolon==="")];break;case Syntax.Program:len=stmt.body.length;result=[safeConcatenation&&len>0?"\n":""];for(i=0;i<len;++i){fragment=addIndent(generateStatement(stmt.body[i],{semicolonOptional:!safeConcatenation&&i===len-1,directiveContext:true}));result.push(fragment);if(i+1<len&&!endsWithLineTerminator(toSourceNode(fragment).toString())){result.push(newline)}}break;case Syntax.FunctionDeclaration:result=[stmt.generator&&!extra.moz.starlessGenerator?"function* ":"function ",generateIdentifier(stmt.id),generateFunctionBody(stmt)];break;case Syntax.ReturnStatement:if(stmt.argument){result=[join("return",generateExpression(stmt.argument,{precedence:Precedence.Sequence,allowIn:true,allowCall:true})),semicolon]}else{result=["return"+semicolon]}break;case Syntax.WhileStatement:withIndent(function(){result=["while"+space+"(",generateExpression(stmt.test,{precedence:Precedence.Sequence,allowIn:true,allowCall:true}),")"]});result.push(maybeBlock(stmt.body,semicolon===""));break;case Syntax.WithStatement:withIndent(function(){result=["with"+space+"(",generateExpression(stmt.object,{precedence:Precedence.Sequence,allowIn:true,allowCall:true}),")"]});result.push(maybeBlock(stmt.body,semicolon===""));break;default:throw new Error("Unknown statement type: "+stmt.type)}if(extra.comment){result=addCommentsToStatement(stmt,result)}fragment=toSourceNode(result).toString();if(stmt.type===Syntax.Program&&!safeConcatenation&&newline===""&&fragment.charAt(fragment.length-1)==="\n"){result=toSourceNode(result).replaceRight(/\s+$/,"")}return toSourceNode(result,stmt)}function generate(node,options){var defaultOptions=getDefaultOptions(),result,pair;if(options!=null){if(typeof options.indent==="string"){defaultOptions.format.indent.style=options.indent}if(typeof options.base==="number"){defaultOptions.format.indent.base=options.base}options=updateDeeply(defaultOptions,options);indent=options.format.indent.style;if(typeof options.base==="string"){base=options.base}else{base=stringRepeat(indent,options.format.indent.base)}}else{options=defaultOptions;indent=options.format.indent.style;base=stringRepeat(indent,options.format.indent.base)}json=options.format.json;renumber=options.format.renumber;hexadecimal=json?false:options.format.hexadecimal;quotes=json?"double":options.format.quotes;escapeless=options.format.escapeless;newline=options.format.newline;space=options.format.space;if(options.format.compact){newline=space=indent=base=""}parentheses=options.format.parentheses;semicolons=options.format.semicolons;safeConcatenation=options.format.safeConcatenation;directive=options.directive;parse=json?null:options.parse;sourceMap=options.sourceMap;extra=options;if(sourceMap){if(!exports.browser){SourceNode=require("source-map").SourceNode}else{SourceNode=global.sourceMap.SourceNode}}else{SourceNode=SourceNodeMock}switch(node.type){case Syntax.BlockStatement:case Syntax.BreakStatement:case Syntax.CatchClause:case Syntax.ContinueStatement:case Syntax.DirectiveStatement:case Syntax.DoWhileStatement:case Syntax.DebuggerStatement:case Syntax.EmptyStatement:case Syntax.ExpressionStatement:case Syntax.ForStatement:case Syntax.ForInStatement:case Syntax.FunctionDeclaration:case Syntax.IfStatement:case Syntax.LabeledStatement:case Syntax.Program:case Syntax.ReturnStatement:case Syntax.SwitchStatement:case Syntax.SwitchCase:case Syntax.ThrowStatement:case Syntax.TryStatement:case Syntax.VariableDeclaration:case Syntax.VariableDeclarator:case Syntax.WhileStatement:case Syntax.WithStatement:result=generateStatement(node);break;case Syntax.AssignmentExpression:case Syntax.ArrayExpression:case Syntax.ArrayPattern:case Syntax.BinaryExpression:case Syntax.CallExpression:case Syntax.ConditionalExpression:case Syntax.FunctionExpression:case Syntax.Identifier:case Syntax.Literal:case Syntax.LogicalExpression:case Syntax.MemberExpression:case Syntax.NewExpression:case Syntax.ObjectExpression:case Syntax.ObjectPattern:case Syntax.Property:case Syntax.SequenceExpression:case Syntax.ThisExpression:case Syntax.UnaryExpression:case Syntax.UpdateExpression:case Syntax.YieldExpression:result=generateExpression(node,{precedence:Precedence.Sequence,allowIn:true,allowCall:true});break;default:throw new Error("Unknown node type: "+node.type)}if(!sourceMap){return result.toString()}pair=result.toStringWithSourceMap({file:options.file,sourceRoot:options.sourceMapRoot});if(options.sourceContent){pair.map.setSourceContent(options.sourceMap,options.sourceContent)}if(options.sourceMapWithCode){return pair}return pair.map.toString()}FORMAT_MINIFY={indent:{style:"",base:0},renumber:true,hexadecimal:true,quotes:"auto",escapeless:true,compact:true,parentheses:false,semicolons:false};FORMAT_DEFAULTS=getDefaultOptions().format;exports.version=require("./package.json").version;exports.generate=generate;exports.attachComments=estraverse.attachComments;exports.browser=false;exports.FORMAT_MINIFY=FORMAT_MINIFY;exports.FORMAT_DEFAULTS=FORMAT_DEFAULTS})()})(window)},{"./package.json":22,"source-map":23,estraverse:24}],15:[function(require,module,exports){"use strict";var method=require("method");var diff=method("diff@diffpatcher");diff.define(null,function(from,to){return to});diff.define(undefined,function(from,to){return to});diff.define(Object,function(from,to){return calculate(from,to||{})||{}});function calculate(from,to){var diff={};var changes=0;Object.keys(from).forEach(function(key){changes=changes+1;if(!(key in to)&&from[key]!=null)diff[key]=null;else changes=changes-1});Object.keys(to).forEach(function(key){changes=changes+1;var previous=from[key];var current=to[key];if(previous===current)return changes=changes-1;if(typeof current!=="object")return diff[key]=current;if(typeof previous!=="object")return diff[key]=current;var delta=calculate(previous,current);if(delta)diff[key]=delta;else changes=changes-1});return changes?diff:null}diff.calculate=calculate;module.exports=diff},{method:20}],16:[function(require,module,exports){"use strict";var method=require("method");var rebase=require("./rebase");var patch=method("patch@diffpatcher");patch.define(Object,function patch(hash,delta){return rebase({},hash,delta)});module.exports=patch},{"./rebase":21,method:20}],24:[function(require,module,exports){(function(){(function(root,factory){"use strict";if(typeof define==="function"&&define.amd){define(["exports"],factory)}else if(typeof exports!=="undefined"){factory(exports)}else{factory(root.estraverse={})}})(this,function(exports){"use strict";var Syntax,isArray,VisitorOption,VisitorKeys,BREAK,SKIP;Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};function ignoreJSHintError(){}isArray=Array.isArray;if(!isArray){isArray=function isArray(array){return Object.prototype.toString.call(array)==="[object Array]"}}function deepCopy(obj){var ret={},key,val;for(key in obj){if(obj.hasOwnProperty(key)){val=obj[key];if(typeof val==="object"&&val!==null){ret[key]=deepCopy(val)}else{ret[key]=val}}}return ret}function shallowCopy(obj){var ret={},key;for(key in obj){if(obj.hasOwnProperty(key)){ret[key]=obj[key]}}return ret}ignoreJSHintError(shallowCopy);function upperBound(array,func){var diff,len,i,current;len=array.length;i=0;while(len){diff=len>>>1;current=i+diff;if(func(array[current])){len=diff}else{i=current+1;len-=diff+1}}return i}function lowerBound(array,func){var diff,len,i,current;len=array.length;i=0;while(len){diff=len>>>1;current=i+diff;if(func(array[current])){i=current+1;len-=diff+1}else{len=diff}}return i}ignoreJSHintError(lowerBound);VisitorKeys={AssignmentExpression:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","body","superClass"],ClassExpression:["id","body","superClass"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],Identifier:[],IfStatement:["test","consequent","alternate"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition:["key","value"],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","handler","guardedHandlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};BREAK={};SKIP={};VisitorOption={Break:BREAK,Skip:SKIP};function Reference(parent,key){this.parent=parent;this.key=key}Reference.prototype.replace=function replace(node){this.parent[this.key]=node};function Element(node,path,wrap,ref){this.node=node;this.path=path;this.wrap=wrap;this.ref=ref}function Controller(){}Controller.prototype.path=function path(){var i,iz,j,jz,result,element;function addToPath(result,path){if(isArray(path)){for(j=0,jz=path.length;j<jz;++j){result.push(path[j])}}else{result.push(path)}}if(!this.__current.path){return null}result=[];for(i=2,iz=this.__leavelist.length;i<iz;++i){element=this.__leavelist[i];addToPath(result,element.path)}addToPath(result,this.__current.path);return result};Controller.prototype.parents=function parents(){var i,iz,result;result=[];for(i=1,iz=this.__leavelist.length;i<iz;++i){result.push(this.__leavelist[i].node)}return result};Controller.prototype.current=function current(){return this.__current.node};Controller.prototype.__execute=function __execute(callback,element){var previous,result;result=undefined;previous=this.__current;this.__current=element;this.__state=null;if(callback){result=callback.call(this,element.node,this.__leavelist[this.__leavelist.length-1].node)}this.__current=previous;return result};Controller.prototype.notify=function notify(flag){this.__state=flag};Controller.prototype.skip=function(){this.notify(SKIP)};Controller.prototype["break"]=function(){this.notify(BREAK)};Controller.prototype.__initialize=function(root,visitor){this.visitor=visitor;this.root=root;this.__worklist=[];this.__leavelist=[];this.__current=null;this.__state=null};Controller.prototype.traverse=function traverse(root,visitor){var worklist,leavelist,element,node,nodeType,ret,key,current,current2,candidates,candidate,sentinel;this.__initialize(root,visitor);sentinel={};worklist=this.__worklist;leavelist=this.__leavelist;worklist.push(new Element(root,null,null,null));leavelist.push(new Element(null,null,null,null));while(worklist.length){element=worklist.pop();if(element===sentinel){element=leavelist.pop();ret=this.__execute(visitor.leave,element);if(this.__state===BREAK||ret===BREAK){return}continue}if(element.node){ret=this.__execute(visitor.enter,element);if(this.__state===BREAK||ret===BREAK){return}worklist.push(sentinel);leavelist.push(element);if(this.__state===SKIP||ret===SKIP){continue}node=element.node;nodeType=element.wrap||node.type;candidates=VisitorKeys[nodeType];current=candidates.length;while((current-=1)>=0){key=candidates[current];candidate=node[key];if(!candidate){continue}if(!isArray(candidate)){worklist.push(new Element(candidate,key,null,null));continue}current2=candidate.length;while((current2-=1)>=0){if(!candidate[current2]){continue}if((nodeType===Syntax.ObjectExpression||nodeType===Syntax.ObjectPattern)&&"properties"===candidates[current]){element=new Element(candidate[current2],[key,current2],"Property",null)}else{element=new Element(candidate[current2],[key,current2],null,null)}worklist.push(element)}}}}};Controller.prototype.replace=function replace(root,visitor){var worklist,leavelist,node,nodeType,target,element,current,current2,candidates,candidate,sentinel,outer,key;this.__initialize(root,visitor);sentinel={};worklist=this.__worklist;leavelist=this.__leavelist;outer={root:root};element=new Element(root,null,null,new Reference(outer,"root"));worklist.push(element);leavelist.push(element);while(worklist.length){element=worklist.pop();if(element===sentinel){element=leavelist.pop();target=this.__execute(visitor.leave,element);if(target!==undefined&&target!==BREAK&&target!==SKIP){element.ref.replace(target)}if(this.__state===BREAK||target===BREAK){return outer.root}continue}target=this.__execute(visitor.enter,element);if(target!==undefined&&target!==BREAK&&target!==SKIP){element.ref.replace(target);element.node=target}if(this.__state===BREAK||target===BREAK){return outer.root}node=element.node;if(!node){continue}worklist.push(sentinel);leavelist.push(element);if(this.__state===SKIP||target===SKIP){continue}nodeType=element.wrap||node.type;candidates=VisitorKeys[nodeType];current=candidates.length;while((current-=1)>=0){key=candidates[current];candidate=node[key];if(!candidate){continue}if(!isArray(candidate)){worklist.push(new Element(candidate,key,null,new Reference(node,key)));continue}current2=candidate.length;while((current2-=1)>=0){if(!candidate[current2]){continue}if(nodeType===Syntax.ObjectExpression&&"properties"===candidates[current]){element=new Element(candidate[current2],[key,current2],"Property",new Reference(candidate,current2))}else{element=new Element(candidate[current2],[key,current2],null,new Reference(candidate,current2))}worklist.push(element)}}}return outer.root};function traverse(root,visitor){var controller=new Controller;return controller.traverse(root,visitor)}function replace(root,visitor){var controller=new Controller;return controller.replace(root,visitor)}function extendCommentRange(comment,tokens){var target;target=upperBound(tokens,function search(token){return token.range[0]>comment.range[0]});comment.extendedRange=[comment.range[0],comment.range[1]];if(target!==tokens.length){comment.extendedRange[1]=tokens[target].range[0]}target-=1;if(target>=0){comment.extendedRange[0]=tokens[target].range[1]}return comment}function attachComments(tree,providedComments,tokens){var comments=[],comment,len,i,cursor;if(!tree.range){throw new Error("attachComments needs range information")}if(!tokens.length){if(providedComments.length){for(i=0,len=providedComments.length;i<len;i+=1){comment=deepCopy(providedComments[i]);comment.extendedRange=[0,tree.range[0]];comments.push(comment)}tree.leadingComments=comments}return tree}for(i=0,len=providedComments.length;i<len;i+=1){comments.push(extendCommentRange(deepCopy(providedComments[i]),tokens))}cursor=0;traverse(tree,{enter:function(node){var comment;while(cursor<comments.length){comment=comments[cursor];if(comment.extendedRange[1]>node.range[0]){break}if(comment.extendedRange[1]===node.range[0]){if(!node.leadingComments){node.leadingComments=[]}node.leadingComments.push(comment);comments.splice(cursor,1)}else{cursor+=1}}if(cursor===comments.length){return VisitorOption.Break}if(comments[cursor].extendedRange[0]>node.range[1]){return VisitorOption.Skip}}});cursor=0;traverse(tree,{leave:function(node){var comment;while(cursor<comments.length){comment=comments[cursor];if(node.range[1]<comment.extendedRange[0]){break}if(node.range[1]===comment.extendedRange[0]){if(!node.trailingComments){node.trailingComments=[]}node.trailingComments.push(comment);comments.splice(cursor,1)}else{cursor+=1}}if(cursor===comments.length){return VisitorOption.Break}if(comments[cursor].extendedRange[0]>node.range[1]){return VisitorOption.Skip}}});return tree}exports.version="1.3.3-dev";exports.Syntax=Syntax;exports.traverse=traverse;exports.replace=replace;exports.attachComments=attachComments;exports.VisitorKeys=VisitorKeys;exports.VisitorOption=VisitorOption;exports.Controller=Controller})})()},{}],23:[function(require,module,exports){exports.SourceMapGenerator=require("./source-map/source-map-generator").SourceMapGenerator;exports.SourceMapConsumer=require("./source-map/source-map-consumer").SourceMapConsumer;exports.SourceNode=require("./source-map/source-node").SourceNode},{"./source-map/source-map-consumer":25,"./source-map/source-map-generator":26,"./source-map/source-node":27}],25:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var util=require("./util");var binarySearch=require("./binary-search");var ArraySet=require("./array-set").ArraySet;var base64VLQ=require("./base64-vlq");function SourceMapConsumer(aSourceMap){var sourceMap=aSourceMap;if(typeof aSourceMap==="string"){sourceMap=JSON.parse(aSourceMap.replace(/^\)\]\}'/,""))}var version=util.getArg(sourceMap,"version");var sources=util.getArg(sourceMap,"sources");var names=util.getArg(sourceMap,"names",[]);var sourceRoot=util.getArg(sourceMap,"sourceRoot",null);var sourcesContent=util.getArg(sourceMap,"sourcesContent",null);var mappings=util.getArg(sourceMap,"mappings");var file=util.getArg(sourceMap,"file",null);if(version!=this._version){throw new Error("Unsupported version: "+version)}this._names=ArraySet.fromArray(names,true);this._sources=ArraySet.fromArray(sources,true);this.sourceRoot=sourceRoot;this.sourcesContent=sourcesContent;this._mappings=mappings;this.file=file}SourceMapConsumer.fromSourceMap=function SourceMapConsumer_fromSourceMap(aSourceMap){var smc=Object.create(SourceMapConsumer.prototype);smc._names=ArraySet.fromArray(aSourceMap._names.toArray(),true);smc._sources=ArraySet.fromArray(aSourceMap._sources.toArray(),true);smc.sourceRoot=aSourceMap._sourceRoot;smc.sourcesContent=aSourceMap._generateSourcesContent(smc._sources.toArray(),smc.sourceRoot);smc.file=aSourceMap._file;smc.__generatedMappings=aSourceMap._mappings.slice().sort(util.compareByGeneratedPositions);smc.__originalMappings=aSourceMap._mappings.slice().sort(util.compareByOriginalPositions);return smc};SourceMapConsumer.prototype._version=3;Object.defineProperty(SourceMapConsumer.prototype,"sources",{get:function(){return this._sources.toArray().map(function(s){return this.sourceRoot?util.join(this.sourceRoot,s):s},this)}});SourceMapConsumer.prototype.__generatedMappings=null;Object.defineProperty(SourceMapConsumer.prototype,"_generatedMappings",{get:function(){if(!this.__generatedMappings){this.__generatedMappings=[];this.__originalMappings=[];this._parseMappings(this._mappings,this.sourceRoot)}return this.__generatedMappings}});SourceMapConsumer.prototype.__originalMappings=null;Object.defineProperty(SourceMapConsumer.prototype,"_originalMappings",{get:function(){if(!this.__originalMappings){this.__generatedMappings=[];this.__originalMappings=[];this._parseMappings(this._mappings,this.sourceRoot)}return this.__originalMappings}});SourceMapConsumer.prototype._parseMappings=function SourceMapConsumer_parseMappings(aStr,aSourceRoot){var generatedLine=1;var previousGeneratedColumn=0;var previousOriginalLine=0;var previousOriginalColumn=0;var previousSource=0;var previousName=0;var mappingSeparator=/^[,;]/;var str=aStr;var mapping;var temp;while(str.length>0){if(str.charAt(0)===";"){generatedLine++;str=str.slice(1);previousGeneratedColumn=0}else if(str.charAt(0)===","){str=str.slice(1)}else{mapping={};mapping.generatedLine=generatedLine;temp=base64VLQ.decode(str);mapping.generatedColumn=previousGeneratedColumn+temp.value;previousGeneratedColumn=mapping.generatedColumn;str=temp.rest;if(str.length>0&&!mappingSeparator.test(str.charAt(0))){temp=base64VLQ.decode(str);mapping.source=this._sources.at(previousSource+temp.value);previousSource+=temp.value;str=temp.rest;if(str.length===0||mappingSeparator.test(str.charAt(0))){throw new Error("Found a source, but no line and column")}temp=base64VLQ.decode(str);mapping.originalLine=previousOriginalLine+temp.value;previousOriginalLine=mapping.originalLine;mapping.originalLine+=1;str=temp.rest;if(str.length===0||mappingSeparator.test(str.charAt(0))){throw new Error("Found a source and line, but no column")}temp=base64VLQ.decode(str);mapping.originalColumn=previousOriginalColumn+temp.value;previousOriginalColumn=mapping.originalColumn;str=temp.rest;if(str.length>0&&!mappingSeparator.test(str.charAt(0))){temp=base64VLQ.decode(str);mapping.name=this._names.at(previousName+temp.value);previousName+=temp.value;str=temp.rest}}this.__generatedMappings.push(mapping);if(typeof mapping.originalLine==="number"){this.__originalMappings.push(mapping)}}}this.__originalMappings.sort(util.compareByOriginalPositions)};SourceMapConsumer.prototype._findMapping=function SourceMapConsumer_findMapping(aNeedle,aMappings,aLineName,aColumnName,aComparator){if(aNeedle[aLineName]<=0){throw new TypeError("Line must be greater than or equal to 1, got "+aNeedle[aLineName])}if(aNeedle[aColumnName]<0){throw new TypeError("Column must be greater than or equal to 0, got "+aNeedle[aColumnName])}return binarySearch.search(aNeedle,aMappings,aComparator)};SourceMapConsumer.prototype.originalPositionFor=function SourceMapConsumer_originalPositionFor(aArgs){var needle={generatedLine:util.getArg(aArgs,"line"),generatedColumn:util.getArg(aArgs,"column")};var mapping=this._findMapping(needle,this._generatedMappings,"generatedLine","generatedColumn",util.compareByGeneratedPositions);if(mapping){var source=util.getArg(mapping,"source",null);if(source&&this.sourceRoot){source=util.join(this.sourceRoot,source)}return{source:source,line:util.getArg(mapping,"originalLine",null),column:util.getArg(mapping,"originalColumn",null),name:util.getArg(mapping,"name",null)}}return{source:null,line:null,column:null,name:null}};SourceMapConsumer.prototype.sourceContentFor=function SourceMapConsumer_sourceContentFor(aSource){if(!this.sourcesContent){return null}if(this.sourceRoot){aSource=util.relative(this.sourceRoot,aSource)}if(this._sources.has(aSource)){return this.sourcesContent[this._sources.indexOf(aSource)]}var url;if(this.sourceRoot&&(url=util.urlParse(this.sourceRoot))){var fileUriAbsPath=aSource.replace(/^file:\/\//,"");if(url.scheme=="file"&&this._sources.has(fileUriAbsPath)){return this.sourcesContent[this._sources.indexOf(fileUriAbsPath)]}if((!url.path||url.path=="/")&&this._sources.has("/"+aSource)){return this.sourcesContent[this._sources.indexOf("/"+aSource)]}}throw new Error('"'+aSource+'" is not in the SourceMap.')};SourceMapConsumer.prototype.generatedPositionFor=function SourceMapConsumer_generatedPositionFor(aArgs){var needle={source:util.getArg(aArgs,"source"),originalLine:util.getArg(aArgs,"line"),originalColumn:util.getArg(aArgs,"column")};if(this.sourceRoot){needle.source=util.relative(this.sourceRoot,needle.source)}var mapping=this._findMapping(needle,this._originalMappings,"originalLine","originalColumn",util.compareByOriginalPositions);if(mapping){return{line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null)}}return{line:null,column:null}};SourceMapConsumer.GENERATED_ORDER=1;SourceMapConsumer.ORIGINAL_ORDER=2;SourceMapConsumer.prototype.eachMapping=function SourceMapConsumer_eachMapping(aCallback,aContext,aOrder){var context=aContext||null;var order=aOrder||SourceMapConsumer.GENERATED_ORDER;var mappings;switch(order){case SourceMapConsumer.GENERATED_ORDER:mappings=this._generatedMappings;break;case SourceMapConsumer.ORIGINAL_ORDER:mappings=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var sourceRoot=this.sourceRoot;mappings.map(function(mapping){var source=mapping.source;if(source&&sourceRoot){source=util.join(sourceRoot,source)}return{source:source,generatedLine:mapping.generatedLine,generatedColumn:mapping.generatedColumn,originalLine:mapping.originalLine,originalColumn:mapping.originalColumn,name:mapping.name}}).forEach(aCallback,context)};exports.SourceMapConsumer=SourceMapConsumer})},{"./util":28,"./binary-search":29,"./array-set":30,"./base64-vlq":31,amdefine:32}],26:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var base64VLQ=require("./base64-vlq");var util=require("./util");var ArraySet=require("./array-set").ArraySet;function SourceMapGenerator(aArgs){this._file=util.getArg(aArgs,"file");this._sourceRoot=util.getArg(aArgs,"sourceRoot",null);this._sources=new ArraySet;this._names=new ArraySet;this._mappings=[];this._sourcesContents=null}SourceMapGenerator.prototype._version=3;SourceMapGenerator.fromSourceMap=function SourceMapGenerator_fromSourceMap(aSourceMapConsumer){var sourceRoot=aSourceMapConsumer.sourceRoot;var generator=new SourceMapGenerator({file:aSourceMapConsumer.file,sourceRoot:sourceRoot});aSourceMapConsumer.eachMapping(function(mapping){var newMapping={generated:{line:mapping.generatedLine,column:mapping.generatedColumn}};if(mapping.source){newMapping.source=mapping.source;if(sourceRoot){newMapping.source=util.relative(sourceRoot,newMapping.source)}newMapping.original={line:mapping.originalLine,column:mapping.originalColumn};if(mapping.name){newMapping.name=mapping.name}}generator.addMapping(newMapping)});aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content){generator.setSourceContent(sourceFile,content)}});return generator};SourceMapGenerator.prototype.addMapping=function SourceMapGenerator_addMapping(aArgs){var generated=util.getArg(aArgs,"generated");var original=util.getArg(aArgs,"original",null);var source=util.getArg(aArgs,"source",null);var name=util.getArg(aArgs,"name",null);this._validateMapping(generated,original,source,name);if(source&&!this._sources.has(source)){this._sources.add(source)}if(name&&!this._names.has(name)){this._names.add(name)}this._mappings.push({generatedLine:generated.line,generatedColumn:generated.column,originalLine:original!=null&&original.line,originalColumn:original!=null&&original.column,source:source,name:name})};SourceMapGenerator.prototype.setSourceContent=function SourceMapGenerator_setSourceContent(aSourceFile,aSourceContent){var source=aSourceFile;if(this._sourceRoot){source=util.relative(this._sourceRoot,source)}if(aSourceContent!==null){if(!this._sourcesContents){this._sourcesContents={}}this._sourcesContents[util.toSetString(source)]=aSourceContent}else{delete this._sourcesContents[util.toSetString(source)];if(Object.keys(this._sourcesContents).length===0){this._sourcesContents=null}}};SourceMapGenerator.prototype.applySourceMap=function SourceMapGenerator_applySourceMap(aSourceMapConsumer,aSourceFile){if(!aSourceFile){aSourceFile=aSourceMapConsumer.file}var sourceRoot=this._sourceRoot;if(sourceRoot){aSourceFile=util.relative(sourceRoot,aSourceFile)}var newSources=new ArraySet;var newNames=new ArraySet;this._mappings.forEach(function(mapping){if(mapping.source===aSourceFile&&mapping.originalLine){var original=aSourceMapConsumer.originalPositionFor({line:mapping.originalLine,column:mapping.originalColumn});if(original.source!==null){if(sourceRoot){mapping.source=util.relative(sourceRoot,original.source)}else{mapping.source=original.source}mapping.originalLine=original.line;mapping.originalColumn=original.column;if(original.name!==null&&mapping.name!==null){mapping.name=original.name}}}var source=mapping.source;if(source&&!newSources.has(source)){newSources.add(source)}var name=mapping.name;if(name&&!newNames.has(name)){newNames.add(name)}},this);this._sources=newSources;this._names=newNames;aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content){if(sourceRoot){sourceFile=util.relative(sourceRoot,sourceFile)}this.setSourceContent(sourceFile,content)}},this)};SourceMapGenerator.prototype._validateMapping=function SourceMapGenerator_validateMapping(aGenerated,aOriginal,aSource,aName){if(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aGenerated.line>0&&aGenerated.column>=0&&!aOriginal&&!aSource&&!aName){return
}else if(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aOriginal&&"line"in aOriginal&&"column"in aOriginal&&aGenerated.line>0&&aGenerated.column>=0&&aOriginal.line>0&&aOriginal.column>=0&&aSource){return}else{throw new Error("Invalid mapping: "+JSON.stringify({generated:aGenerated,source:aSource,orginal:aOriginal,name:aName}))}};SourceMapGenerator.prototype._serializeMappings=function SourceMapGenerator_serializeMappings(){var previousGeneratedColumn=0;var previousGeneratedLine=1;var previousOriginalColumn=0;var previousOriginalLine=0;var previousName=0;var previousSource=0;var result="";var mapping;this._mappings.sort(util.compareByGeneratedPositions);for(var i=0,len=this._mappings.length;i<len;i++){mapping=this._mappings[i];if(mapping.generatedLine!==previousGeneratedLine){previousGeneratedColumn=0;while(mapping.generatedLine!==previousGeneratedLine){result+=";";previousGeneratedLine++}}else{if(i>0){if(!util.compareByGeneratedPositions(mapping,this._mappings[i-1])){continue}result+=","}}result+=base64VLQ.encode(mapping.generatedColumn-previousGeneratedColumn);previousGeneratedColumn=mapping.generatedColumn;if(mapping.source){result+=base64VLQ.encode(this._sources.indexOf(mapping.source)-previousSource);previousSource=this._sources.indexOf(mapping.source);result+=base64VLQ.encode(mapping.originalLine-1-previousOriginalLine);previousOriginalLine=mapping.originalLine-1;result+=base64VLQ.encode(mapping.originalColumn-previousOriginalColumn);previousOriginalColumn=mapping.originalColumn;if(mapping.name){result+=base64VLQ.encode(this._names.indexOf(mapping.name)-previousName);previousName=this._names.indexOf(mapping.name)}}}return result};SourceMapGenerator.prototype._generateSourcesContent=function SourceMapGenerator_generateSourcesContent(aSources,aSourceRoot){return aSources.map(function(source){if(!this._sourcesContents){return null}if(aSourceRoot){source=util.relative(aSourceRoot,source)}var key=util.toSetString(source);return Object.prototype.hasOwnProperty.call(this._sourcesContents,key)?this._sourcesContents[key]:null},this)};SourceMapGenerator.prototype.toJSON=function SourceMapGenerator_toJSON(){var map={version:this._version,file:this._file,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};if(this._sourceRoot){map.sourceRoot=this._sourceRoot}if(this._sourcesContents){map.sourcesContent=this._generateSourcesContent(map.sources,map.sourceRoot)}return map};SourceMapGenerator.prototype.toString=function SourceMapGenerator_toString(){return JSON.stringify(this)};exports.SourceMapGenerator=SourceMapGenerator})},{"./base64-vlq":31,"./util":28,"./array-set":30,amdefine:32}],27:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var SourceMapGenerator=require("./source-map-generator").SourceMapGenerator;var util=require("./util");function SourceNode(aLine,aColumn,aSource,aChunks,aName){this.children=[];this.sourceContents={};this.line=aLine===undefined?null:aLine;this.column=aColumn===undefined?null:aColumn;this.source=aSource===undefined?null:aSource;this.name=aName===undefined?null:aName;if(aChunks!=null)this.add(aChunks)}SourceNode.fromStringWithSourceMap=function SourceNode_fromStringWithSourceMap(aGeneratedCode,aSourceMapConsumer){var node=new SourceNode;var remainingLines=aGeneratedCode.split("\n");var lastGeneratedLine=1,lastGeneratedColumn=0;var lastMapping=null;aSourceMapConsumer.eachMapping(function(mapping){if(lastMapping===null){while(lastGeneratedLine<mapping.generatedLine){node.add(remainingLines.shift()+"\n");lastGeneratedLine++}if(lastGeneratedColumn<mapping.generatedColumn){var nextLine=remainingLines[0];node.add(nextLine.substr(0,mapping.generatedColumn));remainingLines[0]=nextLine.substr(mapping.generatedColumn);lastGeneratedColumn=mapping.generatedColumn}}else{if(lastGeneratedLine<mapping.generatedLine){var code="";do{code+=remainingLines.shift()+"\n";lastGeneratedLine++;lastGeneratedColumn=0}while(lastGeneratedLine<mapping.generatedLine);if(lastGeneratedColumn<mapping.generatedColumn){var nextLine=remainingLines[0];code+=nextLine.substr(0,mapping.generatedColumn);remainingLines[0]=nextLine.substr(mapping.generatedColumn);lastGeneratedColumn=mapping.generatedColumn}addMappingWithCode(lastMapping,code)}else{var nextLine=remainingLines[0];var code=nextLine.substr(0,mapping.generatedColumn-lastGeneratedColumn);remainingLines[0]=nextLine.substr(mapping.generatedColumn-lastGeneratedColumn);lastGeneratedColumn=mapping.generatedColumn;addMappingWithCode(lastMapping,code)}}lastMapping=mapping},this);addMappingWithCode(lastMapping,remainingLines.join("\n"));aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content){node.setSourceContent(sourceFile,content)}});return node;function addMappingWithCode(mapping,code){if(mapping===null||mapping.source===undefined){node.add(code)}else{node.add(new SourceNode(mapping.originalLine,mapping.originalColumn,mapping.source,code,mapping.name))}}};SourceNode.prototype.add=function SourceNode_add(aChunk){if(Array.isArray(aChunk)){aChunk.forEach(function(chunk){this.add(chunk)},this)}else if(aChunk instanceof SourceNode||typeof aChunk==="string"){if(aChunk){this.children.push(aChunk)}}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk)}return this};SourceNode.prototype.prepend=function SourceNode_prepend(aChunk){if(Array.isArray(aChunk)){for(var i=aChunk.length-1;i>=0;i--){this.prepend(aChunk[i])}}else if(aChunk instanceof SourceNode||typeof aChunk==="string"){this.children.unshift(aChunk)}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk)}return this};SourceNode.prototype.walk=function SourceNode_walk(aFn){var chunk;for(var i=0,len=this.children.length;i<len;i++){chunk=this.children[i];if(chunk instanceof SourceNode){chunk.walk(aFn)}else{if(chunk!==""){aFn(chunk,{source:this.source,line:this.line,column:this.column,name:this.name})}}}};SourceNode.prototype.join=function SourceNode_join(aSep){var newChildren;var i;var len=this.children.length;if(len>0){newChildren=[];for(i=0;i<len-1;i++){newChildren.push(this.children[i]);newChildren.push(aSep)}newChildren.push(this.children[i]);this.children=newChildren}return this};SourceNode.prototype.replaceRight=function SourceNode_replaceRight(aPattern,aReplacement){var lastChild=this.children[this.children.length-1];if(lastChild instanceof SourceNode){lastChild.replaceRight(aPattern,aReplacement)}else if(typeof lastChild==="string"){this.children[this.children.length-1]=lastChild.replace(aPattern,aReplacement)}else{this.children.push("".replace(aPattern,aReplacement))}return this};SourceNode.prototype.setSourceContent=function SourceNode_setSourceContent(aSourceFile,aSourceContent){this.sourceContents[util.toSetString(aSourceFile)]=aSourceContent};SourceNode.prototype.walkSourceContents=function SourceNode_walkSourceContents(aFn){for(var i=0,len=this.children.length;i<len;i++){if(this.children[i]instanceof SourceNode){this.children[i].walkSourceContents(aFn)}}var sources=Object.keys(this.sourceContents);for(var i=0,len=sources.length;i<len;i++){aFn(util.fromSetString(sources[i]),this.sourceContents[sources[i]])}};SourceNode.prototype.toString=function SourceNode_toString(){var str="";this.walk(function(chunk){str+=chunk});return str};SourceNode.prototype.toStringWithSourceMap=function SourceNode_toStringWithSourceMap(aArgs){var generated={code:"",line:1,column:0};var map=new SourceMapGenerator(aArgs);var sourceMappingActive=false;var lastOriginalSource=null;var lastOriginalLine=null;var lastOriginalColumn=null;var lastOriginalName=null;this.walk(function(chunk,original){generated.code+=chunk;if(original.source!==null&&original.line!==null&&original.column!==null){if(lastOriginalSource!==original.source||lastOriginalLine!==original.line||lastOriginalColumn!==original.column||lastOriginalName!==original.name){map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name})}lastOriginalSource=original.source;lastOriginalLine=original.line;lastOriginalColumn=original.column;lastOriginalName=original.name;sourceMappingActive=true}else if(sourceMappingActive){map.addMapping({generated:{line:generated.line,column:generated.column}});lastOriginalSource=null;sourceMappingActive=false}chunk.split("").forEach(function(ch){if(ch==="\n"){generated.line++;generated.column=0}else{generated.column++}})});this.walkSourceContents(function(sourceFile,sourceContent){map.setSourceContent(sourceFile,sourceContent)});return{code:generated.code,map:map}};exports.SourceNode=SourceNode})},{"./source-map-generator":26,"./util":28,amdefine:32}],32:[function(require,module,exports){(function(process,__filename){"use strict";function amdefine(module,requireFn){"use strict";var defineCache={},loaderCache={},alreadyCalled=false,path=require("path"),makeRequire,stringRequire;function trimDots(ary){var i,part;for(i=0;ary[i];i+=1){part=ary[i];if(part==="."){ary.splice(i,1);i-=1}else if(part===".."){if(i===1&&(ary[2]===".."||ary[0]==="..")){break}else if(i>0){ary.splice(i-1,2);i-=2}}}}function normalize(name,baseName){var baseParts;if(name&&name.charAt(0)==="."){if(baseName){baseParts=baseName.split("/");baseParts=baseParts.slice(0,baseParts.length-1);baseParts=baseParts.concat(name.split("/"));trimDots(baseParts);name=baseParts.join("/")}}return name}function makeNormalize(relName){return function(name){return normalize(name,relName)}}function makeLoad(id){function load(value){loaderCache[id]=value}load.fromText=function(id,text){throw new Error("amdefine does not implement load.fromText")};return load}makeRequire=function(systemRequire,exports,module,relId){function amdRequire(deps,callback){if(typeof deps==="string"){return stringRequire(systemRequire,exports,module,deps,relId)}else{deps=deps.map(function(depName){return stringRequire(systemRequire,exports,module,depName,relId)});process.nextTick(function(){callback.apply(null,deps)})}}amdRequire.toUrl=function(filePath){if(filePath.indexOf(".")===0){return normalize(filePath,path.dirname(module.filename))}else{return filePath}};return amdRequire};requireFn=requireFn||function req(){return module.require.apply(module,arguments)};function runFactory(id,deps,factory){var r,e,m,result;if(id){e=loaderCache[id]={};m={id:id,uri:__filename,exports:e};r=makeRequire(requireFn,e,m,id)}else{if(alreadyCalled){throw new Error("amdefine with no module ID cannot be called more than once per file.")}alreadyCalled=true;e=module.exports;m=module;r=makeRequire(requireFn,e,m,module.id)}if(deps){deps=deps.map(function(depName){return r(depName)})}if(typeof factory==="function"){result=factory.apply(m.exports,deps)}else{result=factory}if(result!==undefined){m.exports=result;if(id){loaderCache[id]=m.exports}}}stringRequire=function(systemRequire,exports,module,id,relId){var index=id.indexOf("!"),originalId=id,prefix,plugin;if(index===-1){id=normalize(id,relId);if(id==="require"){return makeRequire(systemRequire,exports,module,relId)}else if(id==="exports"){return exports}else if(id==="module"){return module}else if(loaderCache.hasOwnProperty(id)){return loaderCache[id]}else if(defineCache[id]){runFactory.apply(null,defineCache[id]);return loaderCache[id]}else{if(systemRequire){return systemRequire(originalId)}else{throw new Error("No module with ID: "+id)}}}else{prefix=id.substring(0,index);id=id.substring(index+1,id.length);plugin=stringRequire(systemRequire,exports,module,prefix,relId);if(plugin.normalize){id=plugin.normalize(id,makeNormalize(relId))}else{id=normalize(id,relId)}if(loaderCache[id]){return loaderCache[id]}else{plugin.load(id,makeRequire(systemRequire,exports,module,relId),makeLoad(id),{});return loaderCache[id]}}};function define(id,deps,factory){if(Array.isArray(id)){factory=deps;deps=id;id=undefined}else if(typeof id!=="string"){factory=id;id=deps=undefined}if(deps&&!Array.isArray(deps)){factory=deps;deps=undefined}if(!deps){deps=["require","exports","module"]}if(id){defineCache[id]=[id,deps,factory]}else{runFactory(id,deps,factory)}}define.require=function(id){if(loaderCache[id]){return loaderCache[id]}if(defineCache[id]){runFactory.apply(null,defineCache[id]);return loaderCache[id]}};define.amd={};return define}module.exports=amdefine})(require("__browserify_process"),"/node_modules/wisp/node_modules/escodegen/node_modules/source-map/node_modules/amdefine/amdefine.js")},{path:12,__browserify_process:11}],28:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){function getArg(aArgs,aName,aDefaultValue){if(aName in aArgs){return aArgs[aName]}else if(arguments.length===3){return aDefaultValue}else{throw new Error('"'+aName+'" is a required argument.')}}exports.getArg=getArg;var urlRegexp=/([\w+\-.]+):\/\/((\w+:\w+)@)?([\w.]+)?(:(\d+))?(\S+)?/;var dataUrlRegexp=/^data:.+\,.+/;function urlParse(aUrl){var match=aUrl.match(urlRegexp);if(!match){return null}return{scheme:match[1],auth:match[3],host:match[4],port:match[6],path:match[7]}}exports.urlParse=urlParse;function urlGenerate(aParsedUrl){var url=aParsedUrl.scheme+"://";if(aParsedUrl.auth){url+=aParsedUrl.auth+"@"}if(aParsedUrl.host){url+=aParsedUrl.host}if(aParsedUrl.port){url+=":"+aParsedUrl.port}if(aParsedUrl.path){url+=aParsedUrl.path}return url}exports.urlGenerate=urlGenerate;function join(aRoot,aPath){var url;if(aPath.match(urlRegexp)||aPath.match(dataUrlRegexp)){return aPath}if(aPath.charAt(0)==="/"&&(url=urlParse(aRoot))){url.path=aPath;return urlGenerate(url)}return aRoot.replace(/\/$/,"")+"/"+aPath}exports.join=join;function toSetString(aStr){return"$"+aStr}exports.toSetString=toSetString;function fromSetString(aStr){return aStr.substr(1)}exports.fromSetString=fromSetString;function relative(aRoot,aPath){aRoot=aRoot.replace(/\/$/,"");var url=urlParse(aRoot);if(aPath.charAt(0)=="/"&&url&&url.path=="/"){return aPath.slice(1)}return aPath.indexOf(aRoot+"/")===0?aPath.substr(aRoot.length+1):aPath}exports.relative=relative;function strcmp(aStr1,aStr2){var s1=aStr1||"";var s2=aStr2||"";return(s1>s2)-(s1<s2)}function compareByOriginalPositions(mappingA,mappingB,onlyCompareOriginal){var cmp;cmp=strcmp(mappingA.source,mappingB.source);if(cmp){return cmp}cmp=mappingA.originalLine-mappingB.originalLine;if(cmp){return cmp}cmp=mappingA.originalColumn-mappingB.originalColumn;if(cmp||onlyCompareOriginal){return cmp}cmp=strcmp(mappingA.name,mappingB.name);if(cmp){return cmp}cmp=mappingA.generatedLine-mappingB.generatedLine;if(cmp){return cmp}return mappingA.generatedColumn-mappingB.generatedColumn}exports.compareByOriginalPositions=compareByOriginalPositions;function compareByGeneratedPositions(mappingA,mappingB,onlyCompareGenerated){var cmp;cmp=mappingA.generatedLine-mappingB.generatedLine;if(cmp){return cmp}cmp=mappingA.generatedColumn-mappingB.generatedColumn;if(cmp||onlyCompareGenerated){return cmp}cmp=strcmp(mappingA.source,mappingB.source);if(cmp){return cmp}cmp=mappingA.originalLine-mappingB.originalLine;if(cmp){return cmp}cmp=mappingA.originalColumn-mappingB.originalColumn;if(cmp){return cmp}return strcmp(mappingA.name,mappingB.name)}exports.compareByGeneratedPositions=compareByGeneratedPositions})},{amdefine:32}],29:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){function recursiveSearch(aLow,aHigh,aNeedle,aHaystack,aCompare){var mid=Math.floor((aHigh-aLow)/2)+aLow;var cmp=aCompare(aNeedle,aHaystack[mid],true);if(cmp===0){return aHaystack[mid]}else if(cmp>0){if(aHigh-mid>1){return recursiveSearch(mid,aHigh,aNeedle,aHaystack,aCompare)}return aHaystack[mid]}else{if(mid-aLow>1){return recursiveSearch(aLow,mid,aNeedle,aHaystack,aCompare)}return aLow<0?null:aHaystack[aLow]}}exports.search=function search(aNeedle,aHaystack,aCompare){return aHaystack.length>0?recursiveSearch(-1,aHaystack.length,aNeedle,aHaystack,aCompare):null}})},{amdefine:32}],30:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var util=require("./util");function ArraySet(){this._array=[];this._set={}}ArraySet.fromArray=function ArraySet_fromArray(aArray,aAllowDuplicates){var set=new ArraySet;for(var i=0,len=aArray.length;i<len;i++){set.add(aArray[i],aAllowDuplicates)}return set};ArraySet.prototype.add=function ArraySet_add(aStr,aAllowDuplicates){var isDuplicate=this.has(aStr);var idx=this._array.length;if(!isDuplicate||aAllowDuplicates){this._array.push(aStr)}if(!isDuplicate){this._set[util.toSetString(aStr)]=idx}};ArraySet.prototype.has=function ArraySet_has(aStr){return Object.prototype.hasOwnProperty.call(this._set,util.toSetString(aStr))};ArraySet.prototype.indexOf=function ArraySet_indexOf(aStr){if(this.has(aStr)){return this._set[util.toSetString(aStr)]}throw new Error('"'+aStr+'" is not in the set.')};ArraySet.prototype.at=function ArraySet_at(aIdx){if(aIdx>=0&&aIdx<this._array.length){return this._array[aIdx]}throw new Error("No element indexed by "+aIdx)};ArraySet.prototype.toArray=function ArraySet_toArray(){return this._array.slice()};exports.ArraySet=ArraySet})},{"./util":28,amdefine:32}],31:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var base64=require("./base64");var VLQ_BASE_SHIFT=5;var VLQ_BASE=1<<VLQ_BASE_SHIFT;var VLQ_BASE_MASK=VLQ_BASE-1;var VLQ_CONTINUATION_BIT=VLQ_BASE;function toVLQSigned(aValue){return aValue<0?(-aValue<<1)+1:(aValue<<1)+0}function fromVLQSigned(aValue){var isNegative=(aValue&1)===1;var shifted=aValue>>1;return isNegative?-shifted:shifted}exports.encode=function base64VLQ_encode(aValue){var encoded="";var digit;var vlq=toVLQSigned(aValue);do{digit=vlq&VLQ_BASE_MASK;vlq>>>=VLQ_BASE_SHIFT;if(vlq>0){digit|=VLQ_CONTINUATION_BIT}encoded+=base64.encode(digit)}while(vlq>0);return encoded};exports.decode=function base64VLQ_decode(aStr){var i=0;var strLen=aStr.length;var result=0;var shift=0;var continuation,digit;do{if(i>=strLen){throw new Error("Expected more digits in base 64 VLQ value.")}digit=base64.decode(aStr.charAt(i++));continuation=!!(digit&VLQ_CONTINUATION_BIT);digit&=VLQ_BASE_MASK;result=result+(digit<<shift);shift+=VLQ_BASE_SHIFT}while(continuation);return{value:fromVLQSigned(result),rest:aStr.slice(i)}}})},{"./base64":33,amdefine:32}],33:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var charToIntMap={};var intToCharMap={};"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(function(ch,index){charToIntMap[ch]=index;intToCharMap[index]=ch});exports.encode=function base64_encode(aNumber){if(aNumber in intToCharMap){return intToCharMap[aNumber]}throw new TypeError("Must be between 0 and 63: "+aNumber)};exports.decode=function base64_decode(aChar){if(aChar in charToIntMap){return charToIntMap[aChar]}throw new TypeError("Not a valid base 64 digit: "+aChar)}})},{amdefine:32}]},{},[1]);