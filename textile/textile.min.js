/***
 * Textile parser for JavaScript
 *
 * Copyright (c) 2012 Borgar Ãžorsteinsson (MIT License).
 *
 */(function(){"use strict";function r(e){n={}}function st(e){var t=null,n=e+"",r=0;return{save:function(){t=r},load:function(){r=t,e=n.slice(r)},advance:function(t){return r+=typeof t=="string"?t.length:t,e=n.slice(r)},lookbehind:function(e){return e=e==null?1:e,n.slice(r-e,r)},startsWith:function(t){return e.substring(0,t.length)===t},valueOf:function(){return e},toString:function(){return e}}}function ot(e){var t=i(e)?e:[];return{add:function(e){if(typeof e=="string"&&typeof t[t.length-1]=="string")t[t.length-1]+=e;else if(i(e)){var n=e.filter(function(e){return e!==undefined});t.push(n)}else e&&t.push(e);return this},merge:function(e){for(var t=0,n=e.length;t<n;t++)this.add(e[t]);return this},linebreak:function(){t.length&&this.add("\n")},get:function(){return t}}}function ut(e,t){if(!e)return undefined;var n,r={};for(n in e)n in e&&(!t||!(n in t))&&(r[n]=e[n]);return r}function at(e){var t={},n,r;while(n=M.exec(e))t[n[1]]=typeof n[2]=="string"?n[2].replace(/^(["'])(.*)\1$/,"$2"):null,e=e.slice(n[0].length);return t}function ft(e,t){var n=e+"",r=[],i=r,s=[],o,u=t?function(e){return e in t}:function(){return!0},a;e=typeof e=="string"?st(e):e;do if((o=A.exec(e))&&u("!"))e.advance(o[0]),r.push(["!",o[1]]);else if((o=O.exec(e))&&u(o[1])){a=o[1];var f=o[2];if(s.length)for(var l=s.length-1;l>=0;l--){var c=s[l];if(c[0]===a){s.splice(l),r=s[s.length-1]||i;break}}e.advance(o[0])}else if((o=L.exec(e))&&u(o[1])){e.advance(o[0]),a=o[1];var h=o[3]||o[1]in tt,p=o[4],d=[a];o[2]&&d.push(at(o[2])),h?(r.push(d),p&&r.push(p)):(p&&d.push(p),s.push(d),r.push(d),r=d)}else o=/([^<]+|[^\0])/.exec(e),o&&r.push(o[0]),e.advance(o?o[0].length||1:1);while(e.valueOf());return i}function lt(e,t,n){e+="";if(!e||t==="notextile")return undefined;var r,i={},s={style:i},u=e,a=t==="table"||t==="td"||o.test(t),f=t==="img",l=!a&&!f&&t!=="a",c=f?$:V;do{if(r=G.exec(u)){r[1].split(";").forEach(function(e){var t=e.match(Y);t&&(i[t[1]]=t[2])}),u=u.slice(r[0].length);continue}if(r=Z.exec(u)){s.lang=r[1],u=u.slice(r[0].length);continue}if(r=z.exec(u)){var h=u.slice(r[0].length);if(!h&&l||n&&(h[0]===" "||n===h.slice(0,n.length))){r=null;continue}var p=r[1].split("#");p[0]&&(s["class"]=p[0]),p[1]&&(s.id=p[1]),u=h;continue}if(a){if(r=W.exec(u)){i["padding-left"]=r[1].length+"em",u=u.slice(r[0].length);continue}if(r=X.exec(u)){i["padding-right"]=r[1].length+"em",u=u.slice(r[0].length);continue}}if(f||a)if(r=c.exec(u)){var d=nt[r[1]];f?s.align=d:i["text-align"]=d,u=u.slice(r[0].length);continue}if(t==="td"||t==="tr")if(r=J.exec(u)){i["vertical-align"]=rt[r[1]],u=u.slice(r[0].length);continue}if(t==="td"){if(r=K.exec(u)){s.colspan=r[1],u=u.slice(r[0].length);continue}if(r=Q.exec(u)){s.rowspan=r[1],u=u.slice(r[0].length);continue}}}while(r);var v=[];for(var m in i)v.push(m+":"+i[m]);return v.length?s.style=v.join(";"):delete s.style,u==e?undefined:[e.length-u.length,s]}function ct(e){return typeof e!="string"?e:e.replace(/([^\-]|^)->/,"$1&#8594;").replace(D,"$1&#215;$2").replace(/([^.]?)\.{3}/g,"$1&#8230;").replace(P,"$1&#8212;$2").replace(/( )-( )/g,"$1&#8211;$2").replace(H,"$1&#8482;").replace(B,"$1&#174;").replace(j,"$1&#169;").replace(I,"$1&#8243;").replace(R,"$1&#8221;").replace(/"/g,"&#8220;").replace(q,"$1&#8242;").replace(F,"$1&#8217;$2").replace(U,"$1&#8217;").replace(/'/g,"&#8216;")}function ht(e){e=st(e.replace(/(^|\n)[\t ]+/,"$1"));var t=function(e){var t="\n";while(e--)t+="  ";return t},n=[],r,i;while(r=c.exec(e)){var s=["li"],o=lt(r[2],"li");o&&(r[2]=r[2].slice(o[0]),o=o[1]);var u=r[1].length,a=r[1].substr(-1)==="#"?"ol":"ul",f=n.length===u,l=null,h,p,d;while(n.length<u)h=[a,t(n.length+1),l=["li"]],p=n[n.length-1],p&&(p.li.push(t(n.length)),p.li.push(h)),n.push({ul:h,li:l});while(n.length>u)d=n.pop(),d.ul.push(t(n.length));p=n[n.length-1],l||(p.ul.push(t(n.length),s),p.li=s),o&&p.li.push(o),Array.prototype.push.apply(p.li,dt(r[2].trim())),e.advance(r[0])}while(n.length)i=n.pop(),i.ul.push(t(n.length));return i.ul}function pt(e){e=st(e.trim());var t=["table"],n,r,i,s,o;if(o=p.exec(e))e.advance(o[0]),i=lt(o[2],"table"),i&&t.push(i[1]);while(o=d.exec(e)){n=["tr"],o[1]&&(i=lt(o[1],"tr"))&&n.push(i[1]),t.push("\n	",n),r=st(o[2]);do{r.save();var u=r.startsWith("_"),a=[u?"th":"td"];u&&r.advance(1),i=lt(r,"td"),i&&(r.advance(i[0]),a.push(i[1]));if(i||u){var f=/^\.\s*/.exec(r);f?r.advance(f[0]):(a=["td"],r.load())}var l=/^(==.*?==|[^\|])*/.exec(r);a=a.concat(dt(l[0])),n.push("\n		",a),s=r.valueOf().charAt(l[0].length)==="|",r.advance(l[0].length+1)}while(s);n.push("\n	"),e.advance(o[0])}return t.push("\n"),t}function dt(t){t=st(t);var n=ot(),r,i;do{t.save();if(t.startsWith("\n")){t.advance(1),n.add(["br"]),n.add("\n");continue}if(r=/^==(.*?)==/.exec(t)){t.advance(r[0]),n.add(r[1]);continue}var s=t.lookbehind(1),o=!s||/^[\s>.,"'?!;:()]$/.test(s);if((r=m.exec(t))&&(o||r[1])){t.advance(r[0]);var u=r[2],a=r[1],f=et[u],l=f==="code";if(i=!l&&lt(t,f,u))t.advance(i[0]),i=i[1];var c,h;if(a==="[")c="^(.*?)",h="(?:])";else if(a==="{")c="^(.*?)",h="(?:})";else{var p=e.escape(u.charAt(0));c=l?"^(\\S+|\\S+.*?\\S)":"^([^\\s"+p+"]+|[^\\s"+p+"].*?\\S("+p+"*))",h="(?=$|[\\s.,\"'!?;:()\u00ab\u00bb\u201e\u201c\u201d\u201a\u2018\u2019])"}var d=e.compile(c+"("+e.escape(u)+")"+h);if((r=d.exec(t))&&r[1]){t.advance(r[0]),l?n.add([f,r[1]]):n.add([f,i].concat(dt(r[1])));continue}t.load()}if((r=y.exec(t))||(r=b.exec(t))){t.advance(r[0]),i=r[1]&&lt(r[1],"img");var v=i?i[1]:{src:""},g=["img",v];v.src=r[2],v.alt=r[3]?v.title=r[3]:"",r[4]&&(g=["a",{href:r[4]},g]),n.add(g);continue}if(r=A.exec(t)){t.advance(r[0]),n.add(["!",r[1]]);continue}if(r=L.exec(t)){t.advance(r[0]);var x=r[1],N=r[3]||r[1]in tt,k=[x],O=r[4];r[2]&&k.push(at(r[2]));if(N){n.add(k).add(O);continue}var M=e.compile("^(.*?)(</"+x+"\\s*>)","s");if(r=M.exec(t)){t.advance(r[0]);if(x==="code")k.push(O,r[1]);else{if(x==="notextile"){n.merge(dt(r[1]));continue}k=k.concat(dt(r[1]))}n.add(k);continue}t.load()}if(r=C.exec(t)){t.advance(r[0]),n.add(["sup",{"class":"footnote",id:"fnr"+r[1]},["a",{href:"#fn"+r[1]},r[1]]]);continue}if(r=w.exec(t)){t.advance(r[0]);var _=["span",{"class":"caps"},r[1]];r[2]&&(_=["acronym",{title:r[2]},_]),n.add(_);continue}if(o&&(r=E.exec(t))||(r=S.exec(t))){t.advance(r[0].length);var D=r[1].match(T),P=D?r[1].slice(0,r[1].length-D[0].length):r[1];(i=lt(P,"a"))?(P=P.slice(i[0]),i=i[1]):i={},D&&!P&&(P=D[0],D=""),i.href=r[2],D&&(i.title=D[1]),n.add(["a",i].concat(dt(P.replace(/^(\.?\s*)/,""))));continue}r=/([a-zA-Z0-9,.':]+|\s+|[^\0])/.exec(t),r&&n.add(r[0]),t.advance(r?r[0].length||1:1)}while(t.valueOf());return n.get().map(ct)}function vt(t){var n=ot(),r=function(e,t,n,r){t=t||"p";var i=[];return e.split(/\n\n+/).forEach(function(e,s){t==="p"&&/^\s/.test(e)?(e=e.replace(/\n[\t ]/g," ").trim(),i=i.concat(dt(e))):(r&&s&&i.push(r),i.push(n?[t,n].concat(dt(e)):[t].concat(dt(e))))}),i},i={},o;t=st(t.replace(/^( *\n)+/,""));while(t.valueOf()){t.save();if(o=x.exec(t)){t.advance(o[0]),i[o[1]]=o[2];continue}n.linebreak();if(o=s.exec(t)){t.advance(o[0]);var c=o[0],p=lt(t,c);p&&(t.advance(p[0]),p=p[1]);if(o=/\.(\.?)\s?/.exec(t)){var d=!!o[1];o=(d?a:u).exec(t.advance(o[0])),t.advance(o[0]);if(c==="bq"){var v,m=o[1];if(o=/^:(\S+)\s+/.exec(m))p||(p={}),p.cite=o[1],m=m.slice(o[0].length);n.add(["blockquote",p,"\n"].concat(r(m,"p",ut(p,{cite:1,id:1}),"\n")).concat(["\n"]))}else if(c==="bc"){var g=p?ut(p,{id:1}):null;n.add(["pre",p,g?["code",g,o[1]]:["code",o[1]]])}else if(c==="notextile")n.merge(ft(o[1]));else if(c!=="###")if(c==="pre")n.add(["pre",p,o[1]]);else if(N.test(c)){var y=c.replace(/\D+/g,"");p||(p={}),p["class"]=(p["class"]?p["class"]+" ":"")+"footnote",p.id="fn"+y,n.add(["p",p,["a",{href:"#fnr"+y},["sup",y]]," ",o[1]])}else n.merge(r(o[1],c,p,"\n"));continue}t.load()}if(o=A.exec(t)){t.advance(o[0]+(/(?:\s*\n+)+/.exec(t)||[])[0]),n.add(["!",o[1]]);continue}if(o=k.exec(t)){var b=o[1],w=o[3]||b in tt,E=o[4];if(b in it){t.advance(o[0]);var S=[b];o[2]&&S.push(at(o[2]));if(w){n.add(S);continue}var T=e.compile("^(.*?)(\\s*)(</"+b+"\\s*>)(\\s*)","s");if(o=T.exec(t)){t.advance(o[0]),b==="pre"?(S.push(E),S=S.concat(ft(o[1].replace(/\n+$/,""),{code:1})),o[2]&&S.push(o[2]),n.add(S)):b==="notextile"?(S=ft(o[1].trim()),n.merge(S)):b==="script"||b==="noscript"?(S.push(E+o[1]),n.add(S)):(/\n/.test(E)&&S.push("\n"),/\n/.test(o[1])?S=S.concat(vt(o[1])):S=S.concat(dt(o[1].replace(/^ +/,""))),/\n/.test(o[2])&&S.push("\n"),n.add(S));continue}}t.load()}if(o=f.exec(t)){t.advance(o[0]),n.add(["hr"]);continue}if(o=l.exec(t)){t.advance(o[0]),n.add(ht(o[0]));continue}if(o=h.exec(t)){t.advance(o[0]),n.add(pt(o[1]));continue}o=u.exec(t),n.merge(r(o[1],"p",undefined,"\n")),t.advance(o[0])}return n.get().map(mt,i)}function mt(e){if(i(e)){if(e[0]==="a"){var t=e[1];typeof t=="object"&&"href"in t&&t.href in this&&(t.href=this[t.href])}for(var n=1,r=e.length;n<r;n++)i(e[n])&&mt.call(this,e[n])}return e}function gt(e,n){r(n);var i=vt(e).map(t.toHTML).join("");return i}var e={_cache:{},pattern:{punct:"[!-/:-@\\[\\\\\\]-`{-~]",space:"\\s"},escape:function(e){return e.replace(/[\-\[\]\{\}\(\)\*\+\?\.\,\\\^\$\|\#\s]/g,"\\$&")},collapse:function(e){return e.replace(/(?:#.*?(?:\n|$))/g,"").replace(/\s+/g,"")},expand_patterns:function(t){return t.replace(/\[\:\s*(\w+)\s*\:\]/g,function(t,n){return n in e.pattern?e.expand_patterns(e.pattern[n]):n})},isRegExp:function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},compile:function(t,n){e.isRegExp(t)&&(arguments.length===1&&(n=(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")),t=t.source);var r=t+(n||"");if(r in e._cache)return e._cache[r];var i=e.expand_patterns(t);return n&&/x/.test(n)&&(i=e.collapse(i)),n&&/s/.test(n)&&(i=i.replace(/([^\\])\./g,"$1[^\\0]")),n=(n||"").replace(/[^gim]/g,""),e._cache[r]=new RegExp(i,n)}},t={escape:function(e,t){return e.replace(/&(?!(#\d{2,}|#x[\da-fA-F]{2,}|[a-zA-Z][a-zA-Z1-4]{1,6});)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,t?"&quot;":'"').replace(/'/g,t?"&#39;":"'")},toHTML:function(e){e=e.concat();if(typeof e=="string")return t.escape(e);var n=e.shift(),r={},s=[],o="",u;e.length&&typeof e[0]=="object"&&!i(e[0])&&(r=e.shift());while(e.length)s.push(t.toHTML(e.shift()));for(u in r)o+=" "+u+'="'+t.escape(r[u],!0)+'"';return n=="!"?"<!--"+s.join("")+"-->":n=="img"||n=="br"||n=="hr"?"<"+n+o+" />":"<"+n+o+">"+s.join("")+"</"+n+">"}},n={},i=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};e.pattern.blocks="(?:b[qc]|div|notextile|pre|h[1-6]|fn\\d+|p|###)",e.pattern.pba_class="\\([^\\)]+\\)",e.pattern.pba_style="\\{[^\\}]+\\}",e.pattern.pba_lang="\\[[^\\[\\]]+\\]",e.pattern.pba_align="(?:<>|<|>|=)",e.pattern.pba_pad="[\\(\\)]+",e.pattern.pba_attr="(?:[:pba_class:]|[:pba_style:]|[:pba_lang:]|[:pba_align:]|[:pba_pad:])*",e.pattern.url_punct="[.,\u00ab\u00bb\u2033\u2039\u203a!?]",e.pattern.html_id="[a-zA-Z][a-zA-Z\\d:]*",e.pattern.html_attr="(?:\"[^\"]+\"|'[^']+'|[^>\\s]+)",e.pattern.tx_urlch='[\\w"$\\-_.+!*\'(),";\\/?:@=&%#{}|\\\\^~\\[\\]`]',e.pattern.tx_cite=":((?:[^\\s()]|\\([^\\s()]+\\)|[()])+?)(?=[!-\\.:-@\\[\\\\\\]-`{-~]+(?:$|\\s)|$|\\s)",e.pattern.ucaps="A-Z\u00c0-\u00d6\u00d8-\u00de\u0100\u0102\u0104\u0106\u0108\u010a\u010c\u010e\u0110\u0112\u0114\u0116\u0118\u011a\u011c\u011e\u0120\u0122\u0124\u0126\u0128\u012a\u012c\u012e\u0130\u0132\u0134\u0136\u0139\u013b\u013d\u013f\u0141\u0143\u0145\u0147\u014a\u014c\u014e\u0150\u0152\u0154\u0156\u0158\u015a\u015c\u015e\u0160\u0162\u0164\u0166\u0168\u016a\u016c\u016e\u0170\u0172\u0174\u0176\u0178\u0179\u017b\u017d\u0181\u0182\u0184\u0186\u0187\u0189-\u018b\u018e-\u0191\u0193\u0194\u0196-\u0198\u019c\u019d\u019f\u01a0\u01a2\u01a4\u01a6\u01a7\u01a9\u01ac\u01ae\u01af\u01b1-\u01b3\u01b5\u01b7\u01b8\u01bc\u01c4\u01c7\u01ca\u01cd\u01cf\u01d1\u01d3\u01d5\u01d7\u01d9\u01db\u01de\u01e0\u01e2\u01e4\u01e6\u01e8\u01ea\u01ec\u01ee\u01f1\u01f4\u01f6-\u01f8\u01fa\u01fc\u01fe\u0200\u0202\u0204\u0206\u0208\u020a\u020c\u020e\u0210\u0212\u0214\u0216\u0218\u021a\u021c\u021e\u0220\u0222\u0224\u0226\u0228\u022a\u022c\u022e\u0230\u0232\u023a\u023b\u023d\u023e\u0241\u0243-\u0246\u0248\u024a\u024c\u024e\u1e00\u1e02\u1e04\u1e06\u1e08\u1e0a\u1e0c\u1e0e\u1e10\u1e12\u1e14\u1e16\u1e18\u1e1a\u1e1c\u1e1e\u1e20\u1e22\u1e24\u1e26\u1e28\u1e2a\u1e2c\u1e2e\u1e30\u1e32\u1e34\u1e36\u1e38\u1e3a\u1e3c\u1e3e\u1e40\u1e42\u1e44\u1e46\u1e48\u1e4a\u1e4c\u1e4e\u1e50\u1e52\u1e54\u1e56\u1e58\u1e5a\u1e5c\u1e5e\u1e60\u1e62\u1e64\u1e66\u1e68\u1e6a\u1e6c\u1e6e\u1e70\u1e72\u1e74\u1e76\u1e78\u1e7a\u1e7c\u1e7e\u1e80\u1e82\u1e84\u1e86\u1e88\u1e8a\u1e8c\u1e8e\u1e90\u1e92\u1e94\u1e9e\u1ea0\u1ea2\u1ea4\u1ea6\u1ea8\u1eaa\u1eac\u1eae\u1eb0\u1eb2\u1eb4\u1eb6\u1eb8\u1eba\u1ebc\u1ebe\u1ec0\u1ec2\u1ec4\u1ec6\u1ec8\u1eca\u1ecc\u1ece\u1ed0\u1ed2\u1ed4\u1ed6\u1ed8\u1eda\u1edc\u1ede\u1ee0\u1ee2\u1ee4\u1ee6\u1ee8\u1eea\u1eec\u1eee\u1ef0\u1ef2\u1ef4\u1ef6\u1ef8\u1efa\u1efc\u1efe\u2c60\u2c62-\u2c64\u2c67\u2c69\u2c6b\u2c6d-\u2c70\u2c72\u2c75\u2c7e\u2c7f\ua722\ua724\ua726\ua728\ua72a\ua72c\ua72e\ua732\ua734\ua736\ua738\ua73a\ua73c\ua73e\ua740\ua742\ua744\ua746\ua748\ua74a\ua74c\ua74e\ua750\ua752\ua754\ua756\ua758\ua75a\ua75c\ua75e\ua760\ua762\ua764\ua766\ua768\ua76a\ua76c\ua76e\ua779\ua77b\ua77d\ua77e\ua780\ua782\ua784\ua786\ua78b\ua78d\ua790\ua792\ua7a0\ua7a2\ua7a4\ua7a6\ua7a8\ua7aa";var s=e.compile(/^([:blocks:])/),o=e.compile(/^[:blocks:]$/),u=e.compile(/^(.+?)($|\n(?:\s*\n|$)+)/,"s"),a=e.compile(/^(.+?)($|\n+(?=[:blocks:][:pba_attr:]\.))/,"s"),f=/^(\-\-\-+|\*\*\*+|___+)(\n\s+|$)/,l=/^((?:[\t ]*[\#\*]+[\(\)\{\[\s\.]+.+?(?:\n|$))+)(\s*\n)?/,c=/^([\#\*]+)(.+?)(\n|$)/,h=e.compile(/^((?:table[:pba_attr:]\.\n)?(?:(?:[:pba_attr:]\.[^\n\S]*)?\|.*?\|[^\n\S]*(?:\n|$))+)([^\n\S]*\n)?/,"s"),p=/^table(_?)([^\n]+)\.\s?\n/,d=e.compile(/^([:pba_attr:]\.[^\n\S]*)?\|(.*?)\|[^\n\S]*(\n|$)/,"s"),v=/^\[(__?|\*\*?|\?\?|[\-\+\^~@%])([^\n]+)\1\]/,m=/^([\[\{]?)(__?|\*\*?|\?\?|[\-\+\^~@%])/,g=e.compile(/^.+?(?=[\\<!\[_\*`]|\n|$)/,"s"),y=e.compile(/^!(?!\s)([:pba_attr:](?:\.[^\n\S]|\.(?:[^\.\/]))?)([^!\s]+?) ?(?:\(((?:[^\(]+|\([^\(\)]+\))+)\))?!(?::([^\s]+?(?=[!-\.:-@\[\\\]-`{-~](?:$|\s)|\s|$)))?/),b=e.compile(/^\[!(?!\s)([:pba_attr:](?:\.[^\n\S]|\.(?:[^\.\/]))?)([^!\s]+?) ?(?:\(((?:[^\(]+|\([^\(\)]+\))+)\))?!(?::([^\s]+?(?=[!-\.:-@\[\\\]-`{-~](?:$|\s)|\s|$)))?\]/),w=e.compile(/^((?!TM\)|tm\))[[:ucaps:]](?:[[:ucaps:]\d]{1,}(?=\()|[[:ucaps:]\d]{2,}))(?:\((.*?)\))?(?=\W|$)/),E=e.compile(/^"(?!\s)((?:[^\n"]|"(?![\s:])[^\n"]+"(?!:))+)"[:tx_cite:]/),S=/^\["([^\n]+?)":((?:\[[a-z0-9]*\]|[^\]])+)\]/,x=e.compile(/^\[([^\]]+)\]((?:https?:\/\/|\/)\S+)(?:\s*\n|$)/),T=/\s*\(((?:\([^\(\)]*\)|[^\(\)]+)+)\)$/,N=/^fn\d+$/,C=/^\[(\d+)\]/,k=e.compile(/^\s*<([:html_id:](?::[a-zA-Z\d]+)*)((?:\s[^=\s\/]+(?:\s*=\s*[:html_attr:])?)+)?\s*(\/?)>(\n*)/),L=e.compile(/^<([:html_id:])((?:\s[^=\s\/]+(?:\s*=\s*[:html_attr:])?)+)?\s*(\/?)>(\n*)/),A=e.compile(/^<!--(.+?)-->/,"s"),O=e.compile(/^<\/([:html_id:])([^>]*)>/),M=e.compile(/^\s*([^=\s]+)(?:\s*=\s*("[^"]+"|'[^']+'|[^>\s]+))?/),_=/&(#\d\d{2,}|#x[\da-fA-F]{2,}|[a-zA-Z][a-zA-Z1-4]{1,6});/,D=/([\d\.,]+['"]? ?)x( ?)(?=[\d\.,]['"]?)/g,P=/(^|[\s\w])--([\s\w]|$)/g,H=/(\b ?|\s|^)(?:\((?:TM|tm)\)|\[(?:TM|tm)\])/g,B=/(\b ?|\s|^)(?:\(R\)|\[R\])/gi,j=/(\b ?|\s|^)(?:\(C\)|\[C\])/gi,F=/(\w)\'(\w)/g,I=e.compile(/(\d*[\.,]?\d+)"(?=\s|$|[:punct:])/g),q=e.compile(/(\d*[\.,]?\d+)'(?=\s|$|[:punct:])/g),R=e.compile(/([^\s\[\(])"(?=$|\s|[:punct:])/g),U=e.compile(/([^\s\[\(])'(?=$|\s|[:punct:])/g),z=/^\(([^\(\)\n]+)\)/,W=/^([\(]+)/,X=/^([\)]+)/,V=/^(<>|<|>|=)/,$=/^(<|>|=)/,J=/^(~|\^|\-)/,K=/^\\(\d+)/,Q=/^\/(\d+)/,G=/^\{([^\}]*)\}/,Y=/^\s*([^:\s]+)\s*:\s*(.+)\s*$/,Z=/^\[([^\[\]]+)\]/,et={"*":"strong","**":"b","??":"cite",_:"em",__:"i","-":"del","%":"span","+":"ins","~":"sub","^":"sup","@":"code"},tt={br:1,hr:1,img:1,link:1,meta:1,wbr:1,area:1,param:1,input:1,option:1,base:1},nt={"<":"left","=":"center",">":"right","<>":"justify"},rt={"~":"bottom","^":"top","-":"middle"},it={p:0,hr:0,ul:1,ol:0,li:0,div:1,pre:0,object:1,script:0,noscript:0,blockquote:1,notextile:1};gt.parse=gt.convert=gt,gt.html_parser=ft,gt.jsonml=function(e,t){return r(t),["html"].concat(vt(e))},gt.serialize=t.toHTML,gt.setOptions=gt.set_options=r,typeof module!="undefined"&&module.exports?module.exports=gt:this.textile=gt}).call(function(){return this||(typeof window!="undefined"?window:global)}());
